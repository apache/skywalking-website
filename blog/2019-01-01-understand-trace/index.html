<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.74.3" />
<META NAME="ROBOTS" CONTENT="INDEX, FOLLOW">



<link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png">
<link rel="manifest" href="/favicons/site.webmanifest">
<link rel="mask-icon" href="/favicons/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">

<title>Understand distributed trace easier in the incoming 6-GA | Apache SkyWalking</title><meta property="og:title" content="Understand distributed trace easier in the incoming 6-GA" />
<meta property="og:description" content="Distributed tracing is a necessary part of modern microservices architecture, but how to understand or use distributed tracing data is unclear to some end users. This blog overviews typical distributed tracing use cases with new visualization features in SkyWalking v6." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://skywalking.apache.org/blog/2019-01-01-understand-trace/" />
<meta property="article:published_time" content="2019-01-01T00:00:00+00:00" />
<meta property="article:modified_time" content="2020-12-18T10:13:54+08:00" />
<meta itemprop="name" content="Understand distributed trace easier in the incoming 6-GA">
<meta itemprop="description" content="Distributed tracing is a necessary part of modern microservices architecture, but how to understand or use distributed tracing data is unclear to some end users. This blog overviews typical distributed tracing use cases with new visualization features in SkyWalking v6.">
<meta itemprop="datePublished" content="2019-01-01T00:00:00+00:00" />
<meta itemprop="dateModified" content="2020-12-18T10:13:54+08:00" />
<meta itemprop="wordCount" content="702">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Understand distributed trace easier in the incoming 6-GA"/>
<meta name="twitter:description" content="Distributed tracing is a necessary part of modern microservices architecture, but how to understand or use distributed tracing data is unclear to some end users. This blog overviews typical distributed tracing use cases with new visualization features in SkyWalking v6."/>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-178891182-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>




<link rel="preload" href="/scss/main.min.5ebca377c1752f1a81f98a25fed6668c3014628df5089f7f1a4c6b75f3b92edf.css" as="style">
<link href="/scss/main.min.5ebca377c1752f1a81f98a25fed6668c3014628df5089f7f1a4c6b75f3b92edf.css" rel="stylesheet" integrity="">


<script
        src="https://cdn.bootcdn.net/ajax/libs/jquery/3.3.1/jquery.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>





    <title>Understand distributed trace easier in the incoming 6-GA | Apache SkyWalking</title>
  </head>
  <body class="td-page td-blog">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
    <div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div>
    <a class="navbar-brand" href="/">
        <span class="navbar-logo"><img src="/images/logo.png"></span> 
    </a>
    <div class="td-navbar-nav-scroll ml-md-auto" id="navigation">
        <ul class="navbar-nav mt-lg-0">
              
            
            <li class="nav-item mr-3 mb-2 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="/docs" ><span>Projects and Documentations</span></a>
			</li>
              
            
            <li class="nav-item mr-3 mb-2 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="/events" ><span>Events</span></a>
			</li>
              
            
            <li class="nav-item mr-3 mb-2 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="/blog" ><span>Blogs</span></a>
			</li>
              
            
            <li class="nav-item mr-3 mb-2 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="/downloads" ><span>Downloads</span></a>
			</li>
              
            
            <li class="nav-item mr-3 mb-2 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="/team" ><span>Team</span></a>
			</li>
              
            
            <li class="nav-item mr-3 mb-2 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="/zh" ><span>中文博客</span></a>
			</li>
              
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Links
              </a>
                <div class="dropdown-menu">
                    
                    <a class="dropdown-item" href="http://www.apache.org/">Apache Software Foundation</a> 
                    <a class="dropdown-item" href="https://github.com/apache/skywalking/issues">GitHub Issue Tracker</a> 
                    <a class="dropdown-item" href="https://lists.apache.org/list.html?dev@skywalking.apache.org">Dev Mailing List</a> 
                    <a class="dropdown-item" href="http://www.apache.org/licenses/">License</a> 
                    <a class="dropdown-item" href="http://www.apache.org/events/current-event">Apache Events</a> 
                    <a class="dropdown-item" href="http://www.apache.org/security/">Security</a> 
                    <a class="dropdown-item" href="http://www.apache.org/foundation/sponsorship.html">Sponsor and Donate</a> 
                    <a class="dropdown-item" href="http://www.apache.org/foundation/thanks.html">Thanks</a> 
                </div>
            </li>
             
            
			
        </ul>
    </div>
    <div class="navbar-nav d-none d-lg-block search-input-box">
<input type="search" class="form-control td-search-input" placeholder="&#xf002 Search this site…" aria-label="Search this site…" autocomplete="off">
</div>
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row container container-center">
          <div class="toc d-none d-xl-block d-md-none d-sm-none col-xl-2 td-toc d-print-none">
            




<div class="td-page-meta ml-2 pb-1 pt-2 mb-0">











</div>






<nav id="TableOfContents">
  <ul>
    <li><a href="#background">Background</a></li>
    <li><a href="#metric-and-topology">Metric and topology</a></li>
    <li><a href="#trace">Trace</a>
      <ul>
        <li><a href="#error-occurred">Error occurred</a></li>
        <li><a href="#slow-span">Slow span</a></li>
        <li><a href="#too-many-child-spans">Too many child spans</a></li>
        <li><a href="#trace-depth">Trace depth</a></li>
      </ul>
    </li>
    <li><a href="#at-the-end">At the end</a></li>
  </ul>
</nav>



          </div>
          <main class="col-12 col-md-12 col-xl-10 pl-md-4 pr-md-4" role="main">
            
<div class="td-content">
	<h1>Understand distributed trace easier in the incoming 6-GA</h1>
	<div class="lead">Distributed tracing is a necessary part of modern microservices architecture, but how to understand or use distributed tracing data is unclear to some end users. This blog overviews typical distributed tracing use cases with new visualization features in SkyWalking v6.</div>
	<div class="td-byline mb-4">
		By <b>Wu Sheng(Tetrate)</b> |
		<time datetime="2019-01-01" class="text-muted">Tuesday, January 01, 2019</time>
	</div>
	<h2 id="background">Background</h2>
<p>Distributed tracing is a necessary part of modern microservices architecture, but how to understand or use distributed tracing data is unclear to some end users. This blog overviews typical distributed tracing use cases with new visualization features in SkyWalking v6. We hope new users will understand more through these examples.</p>
<h2 id="metric-and-topology">Metric and topology</h2>
<p>Trace data underpins in two well known analysis features: <strong>metric</strong> and <strong>topology</strong></p>
<p><strong>Metric</strong> of each service, service instance, endpoint are derived from entry spans in trace. Metrics represent response time performance. So, you could have average response time, 99% response time, success rate, etc. These are broken down by service, service instance, endpoint.</p>
<p><strong>Topology</strong> represents links between services and is distributed tracing&rsquo;s most attractive feature. Topologies allows all users to understand distributed service relationships and dependencies even when they are varied or complex. This is important as it brings a single view to all interested parties, regardless of if they are a developer, designer or operator.</p>
<p>Here&rsquo;s an example topology of 4 projects, including Kafka and two outside dependencies.</p>
<p><img src="./demo-spring.png" alt=""></p>
<p align="center">Topology in SkyWalking optional UI, RocketBot</p>
<h2 id="trace">Trace</h2>
<p>In a distributed tracing system, we spend a lot of resources(CPU, Memory, Disk and Network) to generate, transport and persistent trace data. Let&rsquo;s try to answer why we do this? What are the typical diagnosis and system performance questions we can answer with trace data?</p>
<p>SkyWalking v6 includes two trace views:</p>
<ol>
<li>TreeMode: The first time provided. Help you easier to identify issues.</li>
<li>ListMode: Traditional view in time line, also usually seen in other tracing system, such as Zipkin.</li>
</ol>
<h3 id="error-occurred">Error occurred</h3>
<p>In the trace view, the easiest part is locating the error, possibly caused by a code exception or network fault. Both ListMode and TreeMode can identify errors, while the span detail screen provides details.</p>
<p><img src="span-error.png" alt=""></p>
<p align="center">ListMode error span</p>
<p><img src="span-error-2.png" alt=""></p>
<p align="center">TreeMode error span</p>
<h3 id="slow-span">Slow span</h3>
<p>A high priority feature is identifying the slowest spans in a trace. This uses execution duration captured by application agents. In the old ListMode trace view, parent span almost always includes the child span&rsquo;s duration, due to nesting. In other words, a slow span usually causes its parent to also become slow. In SkyWalking 6, we provide <code>Top 5 of slow span</code> filter to help you locate the spans directly.</p>
<p><img src="top5-span.png" alt=""></p>
<p align="center">Top 5 slow span</p>
<p>The above screenshot highlights the top 5 slow spans, excluding child span duration. Also, this shows all spans&rsquo; execution time, which helps identify the slowest ones.</p>
<h3 id="too-many-child-spans">Too many child spans</h3>
<p>In some cases, individual durations are quick, but the trace is still slow, like this one:</p>
<p><img src="top5-not-clear.png" alt=""></p>
<p align="center">Trace with no slow span</p>
<p>To understand if the root problem is related to too many operations, use <code>Top 5 of children span number</code>. This filter shows the amount of children each span has, highlighting the top 5.</p>
<p><img src="too-many-child.png" alt=""></p>
<p align="center">13 database accesses of a span</p>
<p>In this screenshot, there is a span with 13 children, which are all Database accesses. Also, when you see overview of trace, database cost 1380ms of this 2000ms trace.</p>
<p><img src="database-long-duration.png" alt=""></p>
<p align="center">1380ms database accesses</p>
<p>In this example, the root cause is too many database accesses. This is also typical in other scenarios like too many RPCs or cache accesses.</p>
<h3 id="trace-depth">Trace depth</h3>
<p>Trace depth is also related latency. Like the <a href="#too-many-child-spans">too many child spans</a> scenario, each span latency looks good, but the whole trace is slow.</p>
<p><img src="deep-trace-1.png" alt=""></p>
<p align="center">Trace depth</p>
<p>Here, the slowest spans are less than 500ms, which are not too slow for a 2000ms trace. When you see the first line, there are four different colors representing four services involved in this distributed trace. Every one of them costs 100~400ms. For all four, there nearly 2000ms. From here, we know this slow trace is caused by 3 RPCs in a serial sequence.</p>
<h2 id="at-the-end">At the end</h2>
<p>Distributed tracing and APM tools help users identify root causes, allowing development and operation teams to optimize accordingly. We hope you enjoyed this, and love Apache SkyWalking and our new trace visualization. If so, <a href="https://github.com/apache/incubator-skywalking">give us a star on GitHub</a> to encourage us.</p>
<p>SkyWalking 6 is scheduled to release at the end of January 2019. You can contact the project team through the following channels:</p>
<ul>
<li>Follow <a href="https://twitter.com/ASFSkyWalking">SkyWalking twitter</a></li>
<li>Subscribe mailing list: <a href="mailto:dev@skywalking.apache.org">dev@skywalking.apache.org</a> . Send to <a href="mailto:dev-subscribe@kywalking.apache.org">dev-subscribe@kywalking.apache.org</a> to subscribe the mail list.</li>
<li>Join <a href="https://gitter.im/OpenSkywalking/Lobby">Gitter</a> room.</li>
</ul>

	

	<ul class="list-unstyled d-flex justify-content-between align-items-center mb-0 pt-5">
  <li>
    <a href="/blog/2018-12-12-skywalking-service-mesh-ready/" class="btn btn-primary "><span class="mr-1">←</span> Previous</a>
  </li>
    <a href="/blog/2019-01-25-mesh-loadtest/" class="btn btn-primary ">Next <span class="ml-1">→</span></a>
  </li>
</ul>

</div>


          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 sky-row">
  <div class="container-fluid text-center">
    <div class="">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Twitter" aria-label="Twitter">
    <a class="text-white" target="_blank" href="https://twitter.com/asfskywalking">
      <i class="fab fa-twitter"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Slack" aria-label="Slack">
    <a class="text-white" target="_blank" href="http://s.apache.org/slack-invite">
      <i class="fab fa-slack"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Mailing list" aria-label="Mailing list">
    <a class="text-white" target="_blank" href="https://lists.apache.org/list.html?dev@skywalking.apache.org">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-white" target="_blank" href="https://github.com/apache/skywalking">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
</ul>

        
        
    </div>
    <div class="">

        <small class="text-white">&copy; 2020 The Apache Software Foundation All Rights Reserved</small>
        
	
    </div>
    <div class="">
      <small class="text-white   mt-4">Apache SkyWalking, SkyWalking, Apache, the Apache feather logo, and the Apache SkyWalking project logo are either registered trademarks or trademarks of the Apache Software Foundation.</small>
    </div>
  </div>
</footer>


    </div>
    
<div id="popup">
    <div class="mask">
        <img src=""/>
    </div>
</div>

    <div class="sidebar-mask"></div>
<div class="sidebar">
    <nav class="nav-links">
        <div class="nav-item"><a href="/docs/" class="nav-link">Projects and Documentation</a></div>
        <div class="nav-item"><a href="/events/" class="nav-link">Events</a></div>
        <div class="nav-item"><a href="/blog/" class="nav-link router-link-exact-active router-link-active">Blog</a>
        </div>
        <div class="nav-item"><a href="/downloads/" class="nav-link">Downloads</a></div>
        <div class="nav-item"><a href="/team/" class="nav-link">Team</a></div>
        <div class="nav-item"><a href="/zh/" class="nav-link">中文博客</a></div>
        <div class="nav-item">
            <div class="dropdown-wrapper open"><a class="dropdown-title"><span class="title">Links</span> <span
                    class="arrow down"></span></a>
                <ul class="nav-dropdown" style="">
                    <li class="dropdown-item">
                        <a href="http://www.apache.org/" target="_blank"
                           rel="noopener noreferrer" class="nav-link external">
                            Apache Software Foundation
                        </a>
                    </li>
                    <li class="dropdown-item">
                        <a href="https://github.com/apache/skywalking/issues"
                           target="_blank" rel="noopener noreferrer"
                           class="nav-link external">
                            GitHub Issue Tracker
                        </a>
                    </li>
                    <li class="dropdown-item">
                        <a href="https://lists.apache.org/list.html?dev@skywalking.apache.org" target="_blank"
                           rel="noopener noreferrer" class="nav-link external">
                            Dev Mailing List
                        </a>
                    </li>
                    <li class="dropdown-item">
                        <a href="http://www.apache.org/licenses/" target="_blank"
                           rel="noopener noreferrer" class="nav-link external">
                            License
                        </a>
                    </li>
                    <li class="dropdown-item">
                        <a href="http://www.apache.org/events/current-event"
                           target="_blank" rel="noopener noreferrer"
                           class="nav-link external">
                            Apache Events
                        </a>
                    </li>
                    <li class="dropdown-item">
                        <a href="http://www.apache.org/security/" target="_blank"
                           rel="noopener noreferrer" class="nav-link external">
                            Security
                        </a>
                    </li>
                    <li class="dropdown-item">
                        <a href="http://www.apache.org/foundation/sponsorship.html"
                           target="_blank" rel="noopener noreferrer"
                           class="nav-link external">
                            Sponsorship and Donate
                        </a>
                    </li>
                    <li class="dropdown-item">
                        <a href="http://www.apache.org/foundation/thanks.html"
                           target="_blank" rel="noopener noreferrer"
                           class="nav-link external">
                            Thanks
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</div>

    
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>








<script src="/js/main.min.9afd47a9296ca656cd4491a6e6bc5146aa48d7618a77cbcc865ea4952db1fe2c.js" integrity="sha256-mv1HqSlsplbNRJGm5rxRRqpI12GKd8vMhl6klS2x/iw=" crossorigin="anonymous"></script>





  </body>
</html>
