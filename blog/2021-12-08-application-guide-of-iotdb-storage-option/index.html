<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="twitter:site" content="skywalking.apache.org">
<meta name="twitter:image:src" content="https://skywalking.apache.org/images/skywalking_400x400.png">
<meta property="og:image" content="https://skywalking.apache.org/images/skywalking_400x400.png">

<meta name="generator" content="Hugo 0.80.0" />


<script async src="https://www.googletagmanager.com/gtag/js?id=G-GR8N6PGRJ3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);};
  gtag('js', new Date());gtag('config', 'G-GR8N6PGRJ3');
</script>
<META NAME="ROBOTS" CONTENT="INDEX, FOLLOW">
<link rel="stylesheet" href="//at.alicdn.com/t/c/font_3007530_pvozs1rz2wn.css">



<link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png">
<link rel="manifest" href="/favicons/site.webmanifest">
<link rel="mask-icon" href="/favicons/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">

<title>The Application Guide of Apache IoTDB Storage Option | Apache SkyWalking</title><meta property="og:title" content="The Application Guide of Apache IoTDB Storage Option" />
<meta property="og:description" content="This guide will tell you how to use SkyWalking Showcase to run demo applications or start manually step by step. In addition, it introduces some methods about visiting IoTDB server and gives some query SQLs as example." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/blog/2021-12-08-application-guide-of-iotdb-storage-option/" />
<meta property="article:published_time" content="2021-12-08T00:00:00+00:00" />
<meta property="article:modified_time" content="2024-03-22T00:20:00+00:00" />
<meta itemprop="name" content="The Application Guide of Apache IoTDB Storage Option">
<meta itemprop="description" content="This guide will tell you how to use SkyWalking Showcase to run demo applications or start manually step by step. In addition, it introduces some methods about visiting IoTDB server and gives some query SQLs as example.">
<meta itemprop="datePublished" content="2021-12-08T00:00:00+00:00" />
<meta itemprop="dateModified" content="2024-03-22T00:20:00+00:00" />
<meta itemprop="wordCount" content="1105">



<meta itemprop="keywords" content="Storage,IoTDB," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="The Application Guide of Apache IoTDB Storage Option"/>
<meta name="twitter:description" content="This guide will tell you how to use SkyWalking Showcase to run demo applications or start manually step by step. In addition, it introduces some methods about visiting IoTDB server and gives some query SQLs as example."/>



<link rel="preload" href="/scss/main.min.592235942cb3c9f3dd697382a4e7a1fad8e1c182dad2841bdce6b43b4a346ae8.css" as="style">
<link href="/scss/main.min.592235942cb3c9f3dd697382a4e7a1fad8e1c182dad2841bdce6b43b4a346ae8.css" rel="stylesheet" integrity="">



<link rel="stylesheet" href="/css/docSearch.css" />


<script src="/js/jquery-3.6.0.min.js"></script>





    <title>The Application Guide of Apache IoTDB Storage Option | Apache SkyWalking</title>
  </head>
  <body class="td-page td-blog">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand  flex-column flex-md-row td-navbar">
    <div class="sidebar-button">
      <i class="iconfont icon-menu"></i>
    </div>
    <a class="navbar-brand" href="/">
        <span class="navbar-logo"><img width="130" src="/images/logo.svg" alt="SkyWalking"></span> 
    </a>
    <div class="td-navbar-nav-scroll navbar-nav-wrapper" id="navigation">
        <ul class="navbar-nav mt-lg-0">
             
            
            
            <li class="nav-item mr-3 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="/docs" ><span>Projects and Docs</span></a>
			</li>
            
            
            
            
            <li class="nav-item mr-3 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="/events" ><span>Events</span></a>
			</li>
            
            
            
            
            <li class="nav-item mr-3 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="/blog" ><span>Blogs</span></a>
			</li>
            
            
            
            
            <li class="nav-item mr-3 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="/downloads" ><span>Downloads</span></a>
			</li>
            
            
            
            
            <li class="nav-item mr-3 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="/team" ><span>Team</span></a>
			</li>
            
            
            
            
            <li class="nav-item mr-3 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="/users" ><span>Users</span></a>
			</li>
            
            
            
            
            
            <li class="nav-item mr-3 mb-lg-0">
                <span class="link dropdown blog">
                    <a class="link-name nav-link dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">中文资料</a>
                    <div class="dropdown-menu">
                        <a class="dropdown-item" href="/zh/">博客</a>
                        <a class="dropdown-item" href="https://space.bilibili.com/390683219" target="_blank" rel="noopener noreferrer">
                            B站
                        </a>
                        <a class="dropdown-item" href="https://juejin.cn/user/13673577331607" target="_blank" rel="noopener noreferrer">
                            掘金
                        </a>
                    </div>
                </span>
            </li>

            
			
        </ul>
    </div>
    <div class="navbar-nav d-none d-lg-block search-input-box">
         
            
        
            
        
            
        
            
        
            
        
            
        
            
            <span class="link dropdown">
                <a class="link-name dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Links
                </a>
                <div class="dropdown-menu">
                    
                    <a class="dropdown-item" href="http://www.apache.org/">Apache Software Foundation</a> 
                    <a class="dropdown-item" href="https://github.com/apache/skywalking/issues">GitHub Issue Tracker</a> 
                    <a class="dropdown-item" href="https://github.com/apache/skywalking/discussions">Discussion</a> 
                    <a class="dropdown-item" href="https://lists.apache.org/list.html?dev@skywalking.apache.org">Dev Mailing List</a> 
                    <a class="dropdown-item" href="https://cwiki.apache.org/confluence/display/SKYWALKING/Home">WIKI</a> 
                    <a class="dropdown-item" href="http://www.apache.org/licenses/">License</a> 
                    <a class="dropdown-item" href="http://www.apache.org/events/current-event">Apache Events</a> 
                    <a class="dropdown-item" href="http://www.apache.org/security/">Security</a> 
                    <a class="dropdown-item" href="http://www.apache.org/foundation/sponsorship.html">Sponsor and Donate</a> 
                    <a class="dropdown-item" href="http://www.apache.org/foundation/thanks.html">Thanks</a> 
                    <a class="dropdown-item" href="https://apache.org/foundation/policies/privacy.html">Privacy</a> 
                </div>
            </span>
            
        
        
<div id="docsearch"></div>


    </div>
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row container container-center">

          <main class="col-12 col-md-12 col-xl-10 pl-md-4 pr-md-4" role="main">
            
<div class="td-content">
	<h1>The Application Guide of Apache IoTDB Storage Option</h1>
	<div class="lead">This guide will tell you how to use SkyWalking Showcase to run demo applications or start manually step by step. In addition, it introduces some methods about visiting IoTDB server and gives some query SQLs as example.</div>
	<div class="td-byline mb-4">
		By <b><a href="https://github.com/LIU-WEI-git">Wei Liu</a>, School of Computer Science, NPU, China</b> |
		<time datetime="2021-12-08" class="text-muted">Wednesday, December 08, 2021</time>


		
		<p class="mt-1 tags-box">
			<i class="iconfont icon-tags"></i>Tags |
			
			<span> <a href="/tags/storage">Storage</a></span>
			
			<span> <a href="/tags/iotdb">IoTDB</a></span>
			
		</p>
		


	</div>
	<p>This document is one of the outcomes of <a href="https://summer.iscas.ac.cn/#/org/prodetail/210070771">Apache IoTDB - Apache SkyWalking Adapter</a> in <a href="https://summer.iscas.ac.cn/#/homepage">Summer 2021 of Open Source Promotion Plan</a>. The design and development work is under the guidance of <a href="https://github.com/jixuan1989">@jixuan1989</a> from IoTDB and <a href="https://github.com/wu-sheng">@wu-sheng</a> from SkyWalking. Thanks for their guidance and the help from community.</p>
<h2 id="start-with-skywalking-showcase">Start with SkyWalking Showcase</h2>
<p>Before using SkyWalking Showcase to quick start with IoTDB, please ensure your have <code>make</code> installed and Docker daemon running.</p>
<p>Please run the command below.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">git clone https://github.com/LIU-WEI-git/skywalking-showcase.git
<span style="color:#0086b3">cd</span> skywalking-showcase
make deploy.docker <span style="color:#008080">FEATURE_FLAGS</span><span style="color:#000;font-weight:bold">=</span>single-node.iotdb,agent
</code></pre></div><p>The former variable <code>single-node.iotdb</code> will deploy only one single node of SkyWalking OAP-v8.9.0, and SkyWalking RocketBot UI-v8.9.0, IoTDB-v0.12.3 as storage. The latter variable <code>agent</code> will deploy micro-services with SkyWalking agent enabled, which include agents for Java, NodeJS server, browser, Python.</p>
<p><img src="iotdb-showcase-command.png" alt="iotdb-showcase-command"></p>
<p>These shell command maybe take a long while. After pulling and running docker image, please visit http://localhost:9999/. Then you will see the SkyWalking UI and data from OAP backend.</p>
<p><img src="iotdb-showcase-screenshot.png" alt="iotdb-showcase-screenshot"></p>
<p>If you want to use more functions of SkyWalking Showcase, please visit its <a href="https://skywalking.apache.org/docs/skywalking-showcase/latest/readme/">official document</a> and clone <a href="https://github.com/apache/skywalking-showcase">official repository</a>.</p>
<h2 id="start-manually">Start Manually</h2>
<p>If you want to download and run IoTDB and SkyWalking manually, here is the guidance.</p>
<h3 id="install-and-run-iotdb">Install and Run IoTDB</h3>
<p>Apache IoTDB (Database for Internet of Things) is an IoT native database with high performance for data management and analysis, deployable on the edge and the cloud. It is a time-series database storage option for SkyWalking now.
Please ensure your <strong>IoTDB server version &gt;= <a href="https://github.com/apache/iotdb/releases/tag/v0.12.3">0.12.3</a></strong> and a single node version is sufficient. For more installation details, please see official document: <a href="https://iotdb.apache.org/UserGuide/V0.12.x/QuickStart/QuickStart.html">IoTDB Quick Start</a> and <a href="https://iotdb.apache.org/Download/">IoTDB Download Page</a>. You could download it from <a href="https://hub.docker.com/r/apache/iotdb">Docker Hub</a> as well.</p>
<p>There is some connection tools for IoTDB</p>
<ul>
<li><a href="https://iotdb.apache.org/UserGuide/V0.12.x/CLI/Command-Line-Interface.html">Command Line Interface(CLI)</a><br>
If iotdb-cli connects successfully, you will see</li>
</ul>
<pre><code> _____       _________  ______   ______
|_   _|     |  _   _  ||_   _ `.|_   _ \
  | |   .--.|_/ | | \_|  | | `. \ | |_) |
  | | / .'`\ \  | |      | |  | | |  __'.
 _| |_| \__. | _| |_    _| |_.' /_| |__) |
|_____|'.__.' |_____|  |______.'|_______/  version x.x.x


IoTDB&gt; login successfully
IoTDB&gt;
</code></pre><ul>
<li><a href="https://iotdb.apache.org/UserGuide/V0.12.x/Ecosystem%20Integration/Grafana.html">IoTDB-Grafana</a><br>
IoTDB-Grafana is a connector which we developed to show time series data in IoTDB by reading data from IoTDB and sends to <a href="https://grafana.com/">Grafana</a>.
<img src="https://user-images.githubusercontent.com/13203019/51664878-6e54a380-1ff5-11e9-9718-4d0e24627fa8.png" alt="Grafana-IoTDB-Screenshot"></li>
<li><a href="https://iotdb.apache.org/UserGuide/V0.12.x/Ecosystem%20Integration/Zeppelin-IoTDB.html">Zeppelin-IoTDB</a><br>
You could enable Zeppelin to operate IoTDB via SQL.
<img src="https://user-images.githubusercontent.com/5548915/102752947-520a3e80-43a5-11eb-8fb1-8fac471c8c7e.png" alt="Zeppelin-IoTDB-Screenshot"></li>
</ul>
<p>For more ecosystem integration, please visit official documents.</p>
<p>We will use iotdb-cli in the next examples.</p>
<h3 id="run-skywalking-oap-server">Run SkyWalking OAP Server</h3>
<p>There are some SkyWalking official documents which will help you start. Please ensure your <strong>SkyWalking version &gt;= <a href="https://github.com/apache/skywalking/releases/tag/v8.9.0">8.9.0</a></strong>. We recommend you download SkyWalking OAP distributions from its official download page or pull docker images.</p>
<ul>
<li><a href="https://skywalking.apache.org/downloads/">SkyWalking Download Page</a></li>
<li><a href="https://skywalking.apache.org/docs/main/latest/en/setup/backend/backend-setup/">SkyWalking Backend Setup</a></li>
<li><a href="https://skywalking.apache.org/docs/main/latest/en/setup/backend/ui-setup/">SkyWalking UI Setup</a></li>
</ul>
<p>Before starting SkyWalking backend, please edit <code>/config/application.yml</code>, set <code>storage.selector: ${SW_STORAGE:iotdb}</code> or set environment variable <code>SW_STORAGE=iotdb</code>. All config options about IoTDB is following, please edit it or not according to your local environment:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#000080">storage</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">selector</span>:<span style="color:#bbb"> </span>${SW_STORAGE:iotdb}<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">iotdb</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">host</span>:<span style="color:#bbb"> </span>${SW_STORAGE_IOTDB_HOST:127.0.0.1}<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">rpcPort</span>:<span style="color:#bbb"> </span>${SW_STORAGE_IOTDB_RPC_PORT:6667}<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">username</span>:<span style="color:#bbb"> </span>${SW_STORAGE_IOTDB_USERNAME:root}<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">password</span>:<span style="color:#bbb"> </span>${SW_STORAGE_IOTDB_PASSWORD:root}<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">storageGroup</span>:<span style="color:#bbb"> </span>${SW_STORAGE_IOTDB_STORAGE_GROUP:root.skywalking}<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">sessionPoolSize</span>:<span style="color:#bbb"> </span>${SW_STORAGE_IOTDB_SESSIONPOOL_SIZE:16}<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">fetchTaskLogMaxSize</span>:<span style="color:#bbb"> </span>${SW_STORAGE_IOTDB_FETCH_TASK_LOG_MAX_SIZE:1000}<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># the max number of fetch task log in a request</span><span style="color:#bbb">
</span></code></pre></div><h2 id="visit-iotdb-server-and-query-skywalking-data">Visit IoTDB Server and Query SkyWalking Data</h2>
<p>There are some official document about data model and IoTDB-SQL language:</p>
<ul>
<li><a href="https://iotdb.apache.org/UserGuide/V0.12.x/Data-Concept/Data-Model-and-Terminology.html">Data Model and Terminology</a></li>
<li><a href="https://iotdb.apache.org/UserGuide/V0.12.x/IoTDB-SQL-Language/DDL-Data-Definition-Language.html">DDL (Data Definition Language)</a></li>
<li><a href="https://iotdb.apache.org/UserGuide/V0.12.x/IoTDB-SQL-Language/DML-Data-Manipulation-Language.html">DML (Data Manipulation Language)</a></li>
<li><a href="https://iotdb.apache.org/UserGuide/V0.12.x/IoTDB-SQL-Language/Maintenance-Command.html">Maintenance Command</a></li>
</ul>
<h3 id="example-model-and-insert-sql">Example Model and Insert SQL</h3>
<p>Before giving any example, we set time display type as long (CLI: <code>set time_display_type=long</code>).</p>
<p>In our design, we choose <code>id</code>, <code>entity_id</code>, <code>node_type</code>, <code>service_id</code>, <code>service_group</code>, <code>trace_id</code> as indexes and fix their appearance order. The value of these indexed fields store in the path with double quotation mark wrapping, just like <code>&quot;value&quot;</code>.</p>
<p>There is a model named <code>service_traffic</code> with fields <code>id</code>, <code>time_bucket</code>, <code>name</code>, <code>node_type</code>, <code>service_group</code>. In order to see its data, we could use a query SQL: <code>select * from root.skywalking.service_traffic align by device</code>. <code>root.skywalking</code> is the default storage group and <code>align by device</code> could return a more friendly result. The query result is following:</p>
<table>
<thead>
<tr>
<th>Time</th>
<th>Device</th>
<th>name</th>
</tr>
</thead>
<tbody>
<tr>
<td>1637919540000</td>
<td>root.skywalking.service_traffic.&ldquo;YXBwbGljYXRpb24tZGVtbw==.1&rdquo;.&ldquo;0&rdquo;.&quot;&quot;</td>
<td>application-demo</td>
</tr>
<tr>
<td>1637919600000</td>
<td>root.skywalking.service_traffic.&ldquo;YXBwbGljYXRpb24tZGVtby1teXNxbA==.1&rdquo;.&ldquo;0&rdquo;.&quot;&quot;</td>
<td>application-demo-mysql</td>
</tr>
</tbody>
</table>
<p>Another example model is <code>service_cpm</code> which has fields <code>id</code>, <code>service_id</code>, <code>total</code>, <code>value</code>. Query its data with <code>select * from root.skywalking.service_cpm align by device</code>. The result is following:</p>
<table>
<thead>
<tr>
<th>Time</th>
<th>Device</th>
<th>total</th>
<th>value</th>
</tr>
</thead>
<tbody>
<tr>
<td>1637919540000</td>
<td>root.skywalking.service_cpm.&ldquo;202111261739_YXBwbGljYXRpb24tZGVtbw==.1&rdquo;.&ldquo;YXBwbGljYXRpb24tZGVtbw==.1&rdquo;</td>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td>1637919600000</td>
<td>root.skywalking.service_cpm.&ldquo;202111261740_YXBwbGljYXRpb24tZGVtby1teXNxbA==.1&rdquo;.&ldquo;YXBwbGljYXRpb24tZGVtby1teXNxbA==.1&rdquo;</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>1637917200000</td>
<td>root.skywalking.service_cpm.&ldquo;2021112617_YXBwbGljYXRpb24tZGVtbw==.1&rdquo;.&ldquo;YXBwbGljYXRpb24tZGVtbw==.1&rdquo;</td>
<td>2</td>
<td>0</td>
</tr>
</tbody>
</table>
<p>For the first data of <code>service_traffic</code>, the mapping between fields and values is following. Notice, all <code>time_bucket</code> are converted to <code>timestamp</code>(also named <code>time</code> in IoTDB) and the value of all indexed fields are stored in the Device path.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>id(indexed)</td>
<td>YXBwbGljYXRpb24tZGVtbw==.1</td>
</tr>
<tr>
<td>time(converted from time_bucket)</td>
<td>1637919540000</td>
</tr>
<tr>
<td>name</td>
<td>application-demo</td>
</tr>
<tr>
<td>node_type(indexed)</td>
<td>0</td>
</tr>
<tr>
<td>service_group(indexed)</td>
<td>(empty string)</td>
</tr>
</tbody>
</table>
<p>You could use the SQL below to insert example data.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#000;font-weight:bold">create</span> <span style="color:#000;font-weight:bold">storage</span> <span style="color:#000;font-weight:bold">group</span> root.skywalking
<span style="color:#000;font-weight:bold">insert</span> <span style="color:#000;font-weight:bold">into</span> root.skywalking.service_traffic.<span style="color:#d14">&#34;YXBwbGljYXRpb24tZGVtbw==.1&#34;</span>.<span style="color:#d14">&#34;0&#34;</span>.<span style="color:#d14">&#34;&#34;</span>(<span style="color:#000;font-weight:bold">timestamp</span>, name) <span style="color:#000;font-weight:bold">values</span>(<span style="color:#099">1637919540000</span>, <span style="color:#d14">&#34;application-demo&#34;</span>)
<span style="color:#000;font-weight:bold">insert</span> <span style="color:#000;font-weight:bold">into</span> root.skywalking.service_traffic.<span style="color:#d14">&#34;YXBwbGljYXRpb24tZGVtby1teXNxbA==.1&#34;</span>.<span style="color:#d14">&#34;0&#34;</span>.<span style="color:#d14">&#34;&#34;</span>(<span style="color:#000;font-weight:bold">timestamp</span>, name) <span style="color:#000;font-weight:bold">values</span>(<span style="color:#099">1637919600000</span>, <span style="color:#d14">&#34;application-demo-mysql&#34;</span>)
<span style="color:#000;font-weight:bold">insert</span> <span style="color:#000;font-weight:bold">into</span> root.skywalking.service_cpm.<span style="color:#d14">&#34;202111261739_YXBwbGljYXRpb24tZGVtbw==.1&#34;</span>.<span style="color:#d14">&#34;YXBwbGljYXRpb24tZGVtbw==.1&#34;</span>(<span style="color:#000;font-weight:bold">timestamp</span>, total, value) <span style="color:#000;font-weight:bold">values</span>(<span style="color:#099">1637919540000</span>, <span style="color:#099">2</span>, <span style="color:#099">2</span>)
<span style="color:#000;font-weight:bold">insert</span> <span style="color:#000;font-weight:bold">into</span> root.skywalking.service_cpm.<span style="color:#d14">&#34;202111261740_YXBwbGljYXRpb24tZGVtby1teXNxbA==.1&#34;</span>.<span style="color:#d14">&#34;YXBwbGljYXRpb24tZGVtby1teXNxbA==.1&#34;</span>(<span style="color:#000;font-weight:bold">timestamp</span>, total, value) <span style="color:#000;font-weight:bold">values</span>(<span style="color:#099">1637919600000</span>, <span style="color:#099">1</span>, <span style="color:#099">1</span>)
<span style="color:#000;font-weight:bold">insert</span> <span style="color:#000;font-weight:bold">into</span> root.skywalking.service_cpm.<span style="color:#d14">&#34;2021112617_YXBwbGljYXRpb24tZGVtbw==.1&#34;</span>.<span style="color:#d14">&#34;YXBwbGljYXRpb24tZGVtbw==.1&#34;</span>(<span style="color:#000;font-weight:bold">timestamp</span>, total, value) <span style="color:#000;font-weight:bold">values</span>(<span style="color:#099">1637917200000</span>, <span style="color:#099">2</span>, <span style="color:#099">0</span>)
</code></pre></div><h3 id="query-sql">Query SQL</h3>
<p>Now, let&rsquo;s show some query examples.</p>
<ol>
<li>
<p>Filter Query</p>
<ul>
<li>If you want to query <code>name</code> field of <code>service_traffic</code>, the query SQL is <code>select name from root.skywalking.service_traffic align by device</code>.</li>
<li>If you want to query <code>service_traffic</code> with <code>id = YXBwbGljYXRpb24tZGVtbw==.1</code>, the query SQL is <code>select * from root.skywalking.service_traffic.&quot;YXBwbGljYXRpb24tZGVtbw==.1&quot; align by device</code>.</li>
<li>If you want to query <code>service_traffic</code> with <code>name = application-demo</code>, the query SQL is <code>select * from root.skywalking.service_traffic where name = &quot;application-demo&quot; align by device</code>.</li>
<li>Combining the above three, the query SQL is <code>select name from root.skywalking.service_traffic.&quot;YXBwbGljYXRpb24tZGVtbw==.1&quot; where name = &quot;application-demo&quot; align by device</code>.</li>
</ul>
</li>
<li>
<p>Fuzzy Query</p>
<ul>
<li>If you want to query <code>service_traffic</code> with <code>name</code> contains <code>application</code>, the query SQL is <code>select * from root.skywalking.service_traffic.*.*.* where name like '%application%' align by device</code>.</li>
</ul>
</li>
<li>
<p>Aggregate Query<br>
IoTDB only supports <code>group by time</code> and <code>group by level</code>. The former please refer to <a href="https://iotdb.apache.org/UserGuide/V0.12.x/IoTDB-SQL-Language/DML-Data-Manipulation-Language.html#down-frequency-aggregate-query">Down-Frequency Aggregate Query</a> and the latter please refer to <a href="https://iotdb.apache.org/UserGuide/V0.12.x/IoTDB-SQL-Language/DML-Data-Manipulation-Language.html#aggregation-by-level">Aggregation By Level</a>. Here is an example about <code>group by level</code>: <code>select sum(total) from root.skywalking.service_cpm.*.* group by level = 3</code>. We couldn&rsquo;t get a expected result since our design make the data of one model spread across multiple devices. So we don&rsquo;t recommend using <code>group by level</code> to query SkyWalking backend data. You could refer to the <a href="https://github.com/apache/iotdb/discussions/3907">Discussion #3907</a> in IoTDB community for more details.</p>
</li>
<li>
<p>Sort Query<br>
IoTDB only supports <code>order by time</code>, but we could use its <a href="https://iotdb.apache.org/UserGuide/V0.12.x/IoTDB-SQL-Language/DML-Data-Manipulation-Language.html#selector-functions">select function</a> which contains <code>top_k</code> and <code>bottom_k</code> to get top/bottom k data. For example, <code>select top_k(total, &quot;k&quot;=&quot;3&quot;) from root.skywalking.service_cpm.*.*</code>. We don&rsquo;t recommend using this to query SkyWalking backend data since its result is not friendly. You could refer to the <a href="https://github.com/apache/iotdb/discussions/3888">Discussion #3888</a> in IoTDB community for more details.</p>
</li>
<li>
<p>Pagination Query<br>
We could use <code>limit</code> and <code>offset</code> to paginate the query result. Please refer to <a href="https://iotdb.apache.org/UserGuide/V0.12.x/IoTDB-SQL-Language/DML-Data-Manipulation-Language.html#row-and-column-control-over-query-results">Row and Column Control over Query Results</a>.</p>
</li>
<li>
<p>Delete</p>
<ul>
<li>Delete storage group:
<ul>
<li><code>delete storage group root.skywalking</code></li>
</ul>
</li>
<li>Delete timeseries:
<ul>
<li><code>delete timeseries root.skywalking.service_cpm.*.*.total</code></li>
<li><code>delete timeseries root.skywalking.service_cpm.&quot;202111261739_YXBwbGljYXRpb24tZGVtbw==.1&quot;.&quot;YXBwbGljYXRpb24tZGVtbw==.1&quot;.total</code></li>
</ul>
</li>
<li>Delete data:
<ul>
<li><code>delete from root.skywalking.service_traffic</code></li>
<li><code>delete from root.skywalking.service_traffic where time &lt; 1637919540000</code></li>
</ul>
</li>
</ul>
</li>
</ol>

	

	<ul class="list-unstyled d-flex justify-content-between align-items-center mb-0 pt-5">
  <li>
    <a href="/blog/2021-12-06-extend-skywalking-with-nbb/" class="btn btn-primary "><span class="mr-1">←</span> Previous</a>
  </li>
    <a href="/blog/2021-12-08-apisix-integrate-skywalking-plugin/apisix-integrate-skywalking-plugin/" class="btn btn-primary ">Next <span class="ml-1">→</span></a>
  </li>
</ul>

</div>


          </main>
          <div class="d-none d-xl-block col-xl-2 td-toc d-print-none">

            <div class="tags-wrapper">
    <div class="font-weight-bold post-meta ">
        <i class="iconfont icon-tags pr-1" aria-hidden="true"></i>
        Tags
    </div>
    <ul class="tags-box">
        
        <li>
            <a href="/tags/agent/" class="tag-link">Agent</a>
            <span class="count">10</span>
        </li>
        
        <li>
            <a href="/tags/apache-shenyu-incubating/" class="tag-link">Apache ShenYu (incubating)</a>
            <span class="count">1</span>
        </li>
        
        <li>
            <a href="/tags/apisix/" class="tag-link">APISIX</a>
            <span class="count">1</span>
        </li>
        
        <li>
            <a href="/tags/apm/" class="tag-link">APM</a>
            <span class="count">1</span>
        </li>
        
        <li>
            <a href="/tags/arthas/" class="tag-link">Arthas</a>
            <span class="count">1</span>
        </li>
        
        <li>
            <a href="/tags/aurora/" class="tag-link">Aurora</a>
            <span class="count">2</span>
        </li>
        
        <li>
            <a href="/tags/aws/" class="tag-link">AWS</a>
            <span class="count">2</span>
        </li>
        
        <li>
            <a href="/tags/browser/" class="tag-link">Browser</a>
            <span class="count">1</span>
        </li>
        
        <li>
            <a href="/tags/chaos-engineering/" class="tag-link">Chaos Engineering</a>
            <span class="count">1</span>
        </li>
        
        <li>
            <a href="/tags/chaos-mesh/" class="tag-link">Chaos Mesh</a>
            <span class="count">1</span>
        </li>
        
        <li>
            <a href="/tags/clickhouse/" class="tag-link">ClickHouse</a>
            <span class="count">2</span>
        </li>
        
        <li>
            <a href="/tags/conference/" class="tag-link">Conference</a>
            <span class="count">6</span>
        </li>
        
        <li>
            <a href="/tags/database/" class="tag-link">Database</a>
            <span class="count">1</span>
        </li>
        
        <li>
            <a href="/tags/demo/" class="tag-link">Demo</a>
            <span class="count">3</span>
        </li>
        
        <li>
            <a href="/tags/design/" class="tag-link">Design</a>
            <span class="count">2</span>
        </li>
        
        <li>
            <a href="/tags/dotnetcore/" class="tag-link">DotNetCore</a>
            <span class="count">1</span>
        </li>
        
        <li>
            <a href="/tags/ebpf/" class="tag-link">eBPF</a>
            <span class="count">6</span>
        </li>
        
        <li>
            <a href="/tags/golang/" class="tag-link">Golang</a>
            <span class="count">5</span>
        </li>
        
        <li>
            <a href="/tags/grafana/" class="tag-link">Grafana</a>
            <span class="count">2</span>
        </li>
        
        <li>
            <a href="/tags/http/" class="tag-link">HTTP</a>
            <span class="count">2</span>
        </li>
        
        <li>
            <a href="/tags/infrastructure-monitoring/" class="tag-link">Infrastructure Monitoring</a>
            <span class="count">1</span>
        </li>
        
        <li>
            <a href="/tags/iotdb/" class="tag-link">IoTDB</a>
            <span class="count">2</span>
        </li>
        
        <li>
            <a href="/tags/istio/" class="tag-link">Istio</a>
            <span class="count">2</span>
        </li>
        
        <li>
            <a href="/tags/java/" class="tag-link">Java</a>
            <span class="count">2</span>
        </li>
        
        <li>
            <a href="/tags/kafka/" class="tag-link">Kafka</a>
            <span class="count">1</span>
        </li>
        
        <li>
            <a href="/tags/kong/" class="tag-link">Kong</a>
            <span class="count">1</span>
        </li>
        
        <li>
            <a href="/tags/lal/" class="tag-link">LAL</a>
            <span class="count">1</span>
        </li>
        
        <li>
            <a href="/tags/license/" class="tag-link">License</a>
            <span class="count">5</span>
        </li>
        
        <li>
            <a href="/tags/logging/" class="tag-link">Logging</a>
            <span class="count">3</span>
        </li>
        
        <li>
            <a href="/tags/logs/" class="tag-link">Logs</a>
            <span class="count">2</span>
        </li>
        
        <li>
            <a href="/tags/metric/" class="tag-link">Metric</a>
            <span class="count">6</span>
        </li>
        
        <li>
            <a href="/tags/metrics/" class="tag-link">Metrics</a>
            <span class="count">2</span>
        </li>
        
        <li>
            <a href="/tags/nginx/" class="tag-link">Nginx</a>
            <span class="count">5</span>
        </li>
        
        <li>
            <a href="/tags/observability/" class="tag-link">Observability</a>
            <span class="count">10</span>
        </li>
        
        <li>
            <a href="/tags/ospp/" class="tag-link">OSPP</a>
            <span class="count">1</span>
        </li>
        
        <li>
            <a href="/tags/performance/" class="tag-link">Performance</a>
            <span class="count">3</span>
        </li>
        
        <li>
            <a href="/tags/profiling/" class="tag-link">Profiling</a>
            <span class="count">5</span>
        </li>
        
        <li>
            <a href="/tags/promql/" class="tag-link">PromQL</a>
            <span class="count">2</span>
        </li>
        
        <li>
            <a href="/tags/python/" class="tag-link">Python</a>
            <span class="count">1</span>
        </li>
        
        <li>
            <a href="/tags/rds/" class="tag-link">RDS</a>
            <span class="count">2</span>
        </li>
        
        <li>
            <a href="/tags/release-blog/" class="tag-link">Release Blog</a>
            <span class="count">4</span>
        </li>
        
        <li>
            <a href="/tags/rocketmq/" class="tag-link">RocketMQ</a>
            <span class="count">1</span>
        </li>
        
        <li>
            <a href="/tags/satellite/" class="tag-link">Satellite</a>
            <span class="count">1</span>
        </li>
        
        <li>
            <a href="/tags/service-mesh/" class="tag-link">Service Mesh</a>
            <span class="count">6</span>
        </li>
        
        <li>
            <a href="/tags/sharding-sphere/" class="tag-link">Sharding-Sphere</a>
            <span class="count">1</span>
        </li>
        
        <li>
            <a href="/tags/sharding-sphere-proxy/" class="tag-link">Sharding-Sphere-proxy</a>
            <span class="count">1</span>
        </li>
        
        <li>
            <a href="/tags/skywalking/" class="tag-link">SkyWalking</a>
            <span class="count">5</span>
        </li>
        
        <li>
            <a href="/tags/spring/" class="tag-link">Spring</a>
            <span class="count">1</span>
        </li>
        
        <li>
            <a href="/tags/storage/" class="tag-link">Storage</a>
            <span class="count">2</span>
        </li>
        
        <li>
            <a href="/tags/testing/" class="tag-link">Testing</a>
            <span class="count">3</span>
        </li>
        
        <li>
            <a href="/tags/trace/" class="tag-link">Trace</a>
            <span class="count">4</span>
        </li>
        
        <li>
            <a href="/tags/tracing/" class="tag-link">Tracing</a>
            <span class="count">10</span>
        </li>
        
        <li>
            <a href="/tags/tutorial/" class="tag-link">Tutorial</a>
            <span class="count">1</span>
        </li>
        
        <li>
            <a href="/tags/user-manual/" class="tag-link">User Manual</a>
            <span class="count">2</span>
        </li>
        
        <li>
            <a href="/tags/video/" class="tag-link">Video</a>
            <span class="count">8</span>
        </li>
        
        <li>
            <a href="/tags/web-performance/" class="tag-link">Web-performance</a>
            <span class="count">1</span>
        </li>
        
    </ul>
</div>



            




<div class="td-page-meta ml-2 pb-1 pt-2 mb-0">











</div>






<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#start-with-skywalking-showcase">Start with SkyWalking Showcase</a></li>
        <li><a href="#start-manually">Start Manually</a>
          <ul>
            <li><a href="#install-and-run-iotdb">Install and Run IoTDB</a></li>
            <li><a href="#run-skywalking-oap-server">Run SkyWalking OAP Server</a></li>
          </ul>
        </li>
        <li><a href="#visit-iotdb-server-and-query-skywalking-data">Visit IoTDB Server and Query SkyWalking Data</a>
          <ul>
            <li><a href="#example-model-and-insert-sql">Example Model and Insert SQL</a></li>
            <li><a href="#query-sql">Query SQL</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>




<script>
  $(function () {
    var $toc = $("#TableOfContents");
    if (!$toc || !$toc.length) {
      return;
    }
    var top = $toc.offset().top;
    $(window).on("scroll", debounce(setTop, 100))
    $(window).on("scroll", debounce(addActive, 30))

    function addActive() {
      var scrollValue = $(window).scrollTop();
      var topEle = null;
      $.each($('main h1, main h2, main h3'), function (index, item) {
        if ($(item).offset().top - 70 > scrollValue) {
          return
        }
        if (!topEle) {
          topEle = item
        } else if ($(item).offset().top >= $(topEle).offset().top) {
          topEle = item
        }
        if (topEle) {
          var id = $(item).attr('id');
          $toc.find('a').removeClass("active").end().find('a[href="' + '#' + id + '"]').addClass("active")
        }
      })
    }

    function setTop() {
      var scrollValue = $(window).scrollTop();
      if (scrollValue >= top - 70) {
        $toc.addClass('fixed')
      } else {
        $toc.removeClass('fixed')
      }
    }

    function debounce(fn, wait) {
      var timeout = null;
      return function () {
        clearTimeout(timeout);
        timeout = setTimeout(() => {
          fn.apply(this, arguments);
        }, wait);
      };
    }
  })

</script>

          </div>
        </div>
      </div>
      
<footer class="py-5 sky-row">
  <div class="container-fluid text-center">
    <div class="">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Twitter" aria-label="Twitter">
    <a class="text-color" target="_blank" href="https://twitter.com/asfskywalking">
      <i class="iconfont icon-twitter"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Slack" aria-label="Slack">
    <a class="text-color" target="_blank" href="http://s.apache.org/slack-invite">
      <i class="iconfont icon-slack"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Mailing list" aria-label="Mailing list">
    <a class="text-color" target="_blank" href="https://lists.apache.org/list.html?dev@skywalking.apache.org">
      <i class="iconfont icon-email"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-color" target="_blank" href="https://github.com/apache/skywalking">
      <i class="iconfont icon-github"></i>
    </a>
  </li>
  
</ul>

        
        
    </div>
    <div class="">

        <small class="text-color">&copy; 2017 - 2024 The Apache Software Foundation All Rights Reserved</small>
        
	
    </div>
    <div class="">
      <small class="text-color mt-4">Apache SkyWalking, SkyWalking, Apache, the Apache feather logo, and the Apache SkyWalking project logo are either registered trademarks or trademarks of the Apache Software Foundation.</small>
    </div>
  </div>
</footer>


    </div>
    















































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































    
<div id="popup">
    <div class="mask">
        <img src=""/>
    </div>
</div>

    <div class="sidebar-mask"></div>
<div class="sidebar">
    <nav class="nav-links">
        <div class="nav-item"><a href="/docs/" class="nav-link">Projects and Documentation</a></div>
        <div class="nav-item"><a href="/events/" class="nav-link">Events</a></div>
        <div class="nav-item"><a href="/blog/" class="nav-link router-link-exact-active router-link-active">Blog</a>
        </div>
        <div class="nav-item"><a href="/downloads/" class="nav-link">Downloads</a></div>
        <div class="nav-item"><a href="/team/" class="nav-link">Team</a></div>
        <div class="nav-item"><a href="/users/" class="nav-link">Users</a></div>
        <div class="nav-item">
            <div class="dropdown-wrapper open">
                <a class="dropdown-title"><span>中文资料</span>
                    <span class="arrow down"></span>
                </a>
                <ul class="nav-dropdown">
                    <li class="dropdown-item">
                        <a href="/zh/" class="nav-link external">博客</a>
                    </li>
                    <li class="dropdown-item">
                        <a href="https://space.bilibili.com/390683219" target="_blank"
                           rel="noopener noreferrer" class="nav-link external">B站</a>
                    </li>
                    <li class="dropdown-item">
                        <a href="https://juejin.cn/user/13673577331607" target="_blank"
                           rel="noopener noreferrer" class="nav-link external">掘金</a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="nav-item">
            <div class="dropdown-wrapper open">
                <a class="dropdown-title">
                    <span>Links</span>
                    <span class="arrow down"></span>
                </a>
                <ul class="nav-dropdown">
                    <li class="dropdown-item">
                        <a href="http://www.apache.org/" target="_blank"
                           rel="noopener noreferrer" class="nav-link external">
                            Apache Software Foundation
                        </a>
                    </li>
                    <li class="dropdown-item">
                        <a href="https://github.com/apache/skywalking/issues"
                           target="_blank" rel="noopener noreferrer"
                           class="nav-link external">
                            GitHub Issue Tracker
                        </a>
                    </li>
                    <li class="dropdown-item">
                        <a href="https://lists.apache.org/list.html?dev@skywalking.apache.org" target="_blank"
                           rel="noopener noreferrer" class="nav-link external">
                            Dev Mailing List
                        </a>
                    </li>
                    <li class="dropdown-item">
                        <a href="http://www.apache.org/licenses/" target="_blank"
                           rel="noopener noreferrer" class="nav-link external">
                            License
                        </a>
                    </li>
                    <li class="dropdown-item">
                        <a href="http://www.apache.org/events/current-event"
                           target="_blank" rel="noopener noreferrer"
                           class="nav-link external">
                            Apache Events
                        </a>
                    </li>
                    <li class="dropdown-item">
                        <a href="http://www.apache.org/security/" target="_blank"
                           rel="noopener noreferrer" class="nav-link external">
                            Security
                        </a>
                    </li>
                    <li class="dropdown-item">
                        <a href="http://www.apache.org/foundation/sponsorship.html"
                           target="_blank" rel="noopener noreferrer"
                           class="nav-link external">
                            Sponsorship and Donate
                        </a>
                    </li>
                    <li class="dropdown-item">
                        <a href="http://www.apache.org/foundation/thanks.html"
                           target="_blank" rel="noopener noreferrer"
                           class="nav-link external">
                            Thanks
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</div>

    <script src="/js/bootstrap.bundle.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>









<script src="/js/main.min.dc00f5ca911ee5aa105ea6de6b3b7e8d8169ba5a3bf156b1fcfe23dfe3e62b0a.js" integrity="sha256-3AD1ypEe5aoQXqbeazt&#43;jYFpulo78Vax/P4j3&#43;PmKwo=" crossorigin="anonymous"></script>


<script src="/js/mermaid.min.js"></script>
<script>
    window.onload = () => mermaid.init(undefined, ".language-mermaid");
</script>


<script defer
src="https://widget.kapa.ai/kapa-widget.bundle.js"
data-website-id="8a08392b-9c4d-4816-8bc4-f93e0ecdd2a7"
data-project-name="SkyWalking"
data-project-color="#2B74B8"
data-button-text="Ask AI"
data-search-mode-enabled="true"
data-modal-open-on-command-k="true"
data-modal-disclaimer="The AI supports multiple languages, but it may not be accessible in China, a proxy is required."
data-project-logo="https://miro.medium.com/v2/resize:fit:2400/0*kmS-5BQ8ShAhZ_F4.jpg"
data-modal-example-questions="What is Apache SkyWalking?,How to deploy SkyWalking?,How to inject agents non-intrusively?,How to setup trace sampling?"
data-button-position-top=""
data-button-position-right="20px"
data-button-position-bottom="200px"
data-button-position-left=""
></script>




  </body>
</html>
