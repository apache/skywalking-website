<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="twitter:site" content="skywalking.apache.org">
<meta name="twitter:image:src" content="https://skywalking.apache.org/images/skywalking_400x400.png">
<meta property="og:image" content="https://skywalking.apache.org/images/skywalking_400x400.png">
<meta name="generator" content="Hugo 0.80.0" />
<META NAME="ROBOTS" CONTENT="INDEX, FOLLOW">



<link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png">
<link rel="manifest" href="/favicons/site.webmanifest">
<link rel="mask-icon" href="/favicons/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">

<title>[Design] The Verifier of NGE2E | Apache SkyWalking</title><meta property="og:title" content="[Design] The Verifier of NGE2E" />
<meta property="og:description" content="The design of Next Generation End-to-End Testing Framework  Verifier" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/blog/2021-02-01-e2e-verifier-design/" />
<meta property="article:published_time" content="2021-02-01T00:00:00+00:00" />

<meta itemprop="name" content="[Design] The Verifier of NGE2E">
<meta itemprop="description" content="The design of Next Generation End-to-End Testing Framework  Verifier">
<meta itemprop="datePublished" content="2021-02-01T00:00:00+00:00" />

<meta itemprop="wordCount" content="755">



<meta itemprop="keywords" content="Testing," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="[Design] The Verifier of NGE2E"/>
<meta name="twitter:description" content="The design of Next Generation End-to-End Testing Framework  Verifier"/>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-178891182-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>




<link rel="preload" href="/scss/main.min.23ad955cba500a0b91ec3371ea1bf316cde102a3cde438be9f9c6a216b8f57c8.css" as="style">
<link href="/scss/main.min.23ad955cba500a0b91ec3371ea1bf316cde102a3cde438be9f9c6a216b8f57c8.css" rel="stylesheet" integrity="">


<script
        src="https://cdn.bootcdn.net/ajax/libs/jquery/3.3.1/jquery.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>





    <title>[Design] The Verifier of NGE2E | Apache SkyWalking</title>
  </head>
  <body class="td-page td-blog">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
    <div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div>
    <a class="navbar-brand" href="/">
        <span class="navbar-logo"><img src="/images/logo.png"></span> 
    </a>
    <div class="td-navbar-nav-scroll ml-md-auto" id="navigation">
        <ul class="navbar-nav mt-lg-0">
              
            
            <li class="nav-item mr-3 mb-2 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="/docs" ><span>Projects and Documentations</span></a>
			</li>
              
            
            <li class="nav-item mr-3 mb-2 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="/events" ><span>Events</span></a>
			</li>
              
            
            <li class="nav-item mr-3 mb-2 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="/blog" ><span>Blogs</span></a>
			</li>
              
            
            <li class="nav-item mr-3 mb-2 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="/downloads" ><span>Downloads</span></a>
			</li>
              
            
            <li class="nav-item mr-3 mb-2 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="/team" ><span>Team</span></a>
			</li>
              
            
            <li class="nav-item mr-3 mb-2 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="/zh" ><span>中文博客</span></a>
			</li>
              
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Links
              </a>
                <div class="dropdown-menu">
                    
                    <a class="dropdown-item" href="http://www.apache.org/">Apache Software Foundation</a> 
                    <a class="dropdown-item" href="https://github.com/apache/skywalking/issues">GitHub Issue Tracker</a> 
                    <a class="dropdown-item" href="https://lists.apache.org/list.html?dev@skywalking.apache.org">Dev Mailing List</a> 
                    <a class="dropdown-item" href="http://www.apache.org/licenses/">License</a> 
                    <a class="dropdown-item" href="http://www.apache.org/events/current-event">Apache Events</a> 
                    <a class="dropdown-item" href="http://www.apache.org/security/">Security</a> 
                    <a class="dropdown-item" href="http://www.apache.org/foundation/sponsorship.html">Sponsor and Donate</a> 
                    <a class="dropdown-item" href="http://www.apache.org/foundation/thanks.html">Thanks</a> 
                </div>
            </li>
             
            
			
        </ul>
    </div>
    <div class="navbar-nav d-none d-lg-block search-input-box">
<input type="search" class="form-control td-search-input" placeholder="&#xf002 Search this site…" aria-label="Search this site…" autocomplete="off">
</div>
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row container container-center">

          <main class="col-12 col-md-12 col-xl-10 pl-md-4 pr-md-4" role="main">
            
<div class="td-content">
	<h1>[Design] The Verifier of NGE2E</h1>
	<div class="lead">The design of Next Generation End-to-End Testing Framework  Verifier</div>
	<div class="td-byline mb-4">
		By <b><a href="https://github.com/kezhenxu94">Zhenxu Ke</a>, Tetrate.io; <a href="http://github.com/fgksgf">Huaxi Jiang</a>, Committer; <a href="http://github.com/HumbertZhang">Ke Zhang</a>, Committer</b> |
		<time datetime="2021-02-01" class="text-muted">Monday, February 01, 2021</time>


		
		<p class="mt-1 tags-box">
			<i class="fas fa-tags" aria-hidden="true"></i>Tags |
			
			<span> <a href="/tags/testing">Testing</a></span>
			
		</p>
		


	</div>
	<h2 id="background">Background</h2>
<p>The verifier is an important part of the next generation End-to-End Testing framework (NGE2E), which is responsible for verifying whether the actual output satisfies the expected template.</p>
<h2 id="design-thinking">Design Thinking</h2>
<p>We will implement the verifier with <a href="https://golang.org/pkg/text/template/">Go template</a>, plus some enhancements. Firstly, users need to write a Go template file with provided functions and actions to describe how the expected data looks like. Then the verifer renders the template with the actual data object. Finally, the verifier compares the rendered output with the actual data. If the rendered output is not the same with the actual output, it means the actual data is inconsist with the expected data. Otherwise, it means the actual data match the expected data. On failure, the verifier will also print out what are different between expected and actual data.</p>
<h2 id="branches--actions">Branches / Actions</h2>
<p>The verifier inherits all the actions from the standard Go template, such as <code>if</code>, <code>with</code>, <code>range</code>, etc. In addition, we also provide some custom actions to satisfy our own needs.</p>
<h3 id="list-elements-match">List Elements Match</h3>
<p><code>contains</code> checks if the actual list contains elements that match the given template.</p>
<p>Examples:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">metrics</span>:
{{- <span style="color:#ae81ff">contains .metrics }}</span>
  - <span style="color:#f92672">name</span>: {{ <span style="color:#ae81ff">notEmpty .name }}</span>
    <span style="color:#f92672">id</span>: {{ <span style="color:#ae81ff">notEmpty .id }}</span>
    <span style="color:#f92672">value</span>: {{ <span style="color:#ae81ff">gt .value 0 }}</span>
{{- <span style="color:#ae81ff">end }}</span>
</code></pre></div><p>It means that the list <code>metrics</code> must contain an element whose <code>name</code> and <code>id</code> are not empty, and <code>value</code> is greater than <code>0</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">metrics</span>:
{{- <span style="color:#ae81ff">contains .metrics }}</span>
  - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">p95</span>
    <span style="color:#f92672">value</span>: {{ <span style="color:#ae81ff">gt .value 0 }}</span>
  - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">p99</span>
    <span style="color:#f92672">value</span>: {{ <span style="color:#ae81ff">gt .value 0 }}</span>
{{- <span style="color:#ae81ff">end }}</span>
</code></pre></div><p>This means that the list <code>metrics</code> must contain an element named <code>p95</code> with a <code>value</code> greater than 0, and an element named <code>p95</code> with a <code>value</code> greater than 0. Besides the two element, the list <code>metrics</code> may or may not have other random elements.</p>
<h2 id="functions">Functions</h2>
<p>Users can use these provided functions in the template to describe the expected data.</p>
<h3 id="not-empty">Not Empty</h3>
<p><code>notEmpty</code> checks if the string <code>s</code> is empty.</p>
<p>Example:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">id</span>: {{ <span style="color:#ae81ff">notEmpty .id }}</span>
</code></pre></div><h3 id="regexp-match">Regexp match</h3>
<p><code>regexp</code> checks if string <code>s</code> matches the regular expression pattern.</p>
<p>Examples:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">label</span>: {{ <span style="color:#ae81ff">regexp .label &#34;ratings.*&#34; }}</span>
</code></pre></div><h3 id="base64">Base64</h3>
<p><code>b64enc s</code> returns the Base64 encoded string of s.</p>
<p>Examples:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">id</span>: {{ <span style="color:#ae81ff">b64enc &#34;User&#34; }}.static-suffix</span> <span style="color:#75715e"># this evalutes the base64 encoded string of &#34;User&#34;, concatenated with a static suffix &#34;.static-suffix&#34;</span>
</code></pre></div><p>Result:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">id</span>: <span style="color:#ae81ff">VXNlcg==.static-suffix</span>
</code></pre></div><h2 id="full-example">Full Example</h2>
<p>Here is an example of expected data:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#75715e"># expected.data.yaml</span>
<span style="color:#f92672">nodes</span>:
  - <span style="color:#f92672">id</span>: {{ <span style="color:#ae81ff">b64enc &#34;User&#34; }}.0</span>
    <span style="color:#f92672">name</span>: <span style="color:#ae81ff">User</span>
    <span style="color:#f92672">type</span>: <span style="color:#ae81ff">USER</span>
    <span style="color:#f92672">isReal</span>: <span style="color:#66d9ef">false</span>
  - <span style="color:#f92672">id</span>: {{ <span style="color:#ae81ff">b64enc &#34;Your_ApplicationName&#34; }}.1</span>
    <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Your_ApplicationName</span>
    <span style="color:#f92672">type</span>: <span style="color:#ae81ff">Tomcat</span>
    <span style="color:#f92672">isReal</span>: <span style="color:#66d9ef">true</span>
  - <span style="color:#f92672">id</span>: {{ <span style="color:#ae81ff">$h2ID := (index .nodes 2).id }}{{ notEmpty $h2ID }}</span> <span style="color:#75715e"># We assert that nodes[2].id is not empty and save it to variable `h2ID` for later use</span>
    <span style="color:#f92672">name</span>: <span style="color:#ae81ff">localhost:-1</span>
    <span style="color:#f92672">type</span>: <span style="color:#ae81ff">H2</span>
    <span style="color:#f92672">isReal</span>: <span style="color:#66d9ef">false</span>
<span style="color:#f92672">calls</span>:
  - <span style="color:#f92672">id</span>: {{ <span style="color:#ae81ff">notEmpty (index .calls 0).id }}</span>
    <span style="color:#f92672">source</span>: {{ <span style="color:#ae81ff">b64enc &#34;Your_ApplicationName&#34; }}.1</span>
    <span style="color:#f92672">target</span>: {{ <span style="color:#ae81ff">$h2ID }}</span> <span style="color:#75715e"># We use the previously assigned variable `h2Id` to asert that the `target` is equal to the `id` of the nodes[2]</span>
    <span style="color:#f92672">detectPoints</span>:
      - <span style="color:#ae81ff">CLIENT</span>
  - <span style="color:#f92672">id</span>: {{ <span style="color:#ae81ff">b64enc &#34;User&#34; }}.0-{{ b64enc &#34;Your_ApplicationName&#34; }}.1</span>
    <span style="color:#f92672">source</span>: {{ <span style="color:#ae81ff">b64enc &#34;User&#34; }}.0</span>
    <span style="color:#f92672">target</span>: {{ <span style="color:#ae81ff">b64enc &#34;Your_ApplicationName&#34; }}.1</span>
    <span style="color:#f92672">detectPoints</span>:
      - <span style="color:#ae81ff">SERVER</span>
</code></pre></div><p>will validate this data:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#75715e"># actual.data.yaml</span>
<span style="color:#f92672">nodes</span>:
  - <span style="color:#f92672">id</span>: <span style="color:#ae81ff">VXNlcg==.0</span>
    <span style="color:#f92672">name</span>: <span style="color:#ae81ff">User</span>
    <span style="color:#f92672">type</span>: <span style="color:#ae81ff">USER</span>
    <span style="color:#f92672">isReal</span>: <span style="color:#66d9ef">false</span>
  - <span style="color:#f92672">id</span>: <span style="color:#ae81ff">WW91cl9BcHBsaWNhdGlvbk5hbWU=.1</span>
    <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Your_ApplicationName</span>
    <span style="color:#f92672">type</span>: <span style="color:#ae81ff">Tomcat</span>
    <span style="color:#f92672">isReal</span>: <span style="color:#66d9ef">true</span>
  - <span style="color:#f92672">id</span>: <span style="color:#ae81ff">bG9jYWxob3N0Oi0x.0</span>
    <span style="color:#f92672">name</span>: <span style="color:#ae81ff">localhost:-1</span>
    <span style="color:#f92672">type</span>: <span style="color:#ae81ff">H2</span>
    <span style="color:#f92672">isReal</span>: <span style="color:#66d9ef">false</span>
<span style="color:#f92672">calls</span>:
  - <span style="color:#f92672">id</span>: <span style="color:#ae81ff">WW91cl9BcHBsaWNhdGlvbk5hbWU=.1-bG9jYWxob3N0Oi0x.0</span>
    <span style="color:#f92672">source</span>: <span style="color:#ae81ff">WW91cl9BcHBsaWNhdGlvbk5hbWU=.1</span>
    <span style="color:#f92672">detectPoints</span>:
      - <span style="color:#ae81ff">CLIENT</span>
    <span style="color:#f92672">target</span>: <span style="color:#ae81ff">bG9jYWxob3N0Oi0x.0</span>
  - <span style="color:#f92672">id</span>: <span style="color:#ae81ff">VXNlcg==.0-WW91cl9BcHBsaWNhdGlvbk5hbWU=.1</span>
    <span style="color:#f92672">source</span>: <span style="color:#ae81ff">VXNlcg==.0</span>
    <span style="color:#f92672">detectPoints</span>:
      - <span style="color:#ae81ff">SERVER</span>
    <span style="color:#f92672">target</span>: <span style="color:#ae81ff">WW91cl9BcHBsaWNhdGlvbk5hbWU=.1</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#75715e"># expected.data.yaml</span>
<span style="color:#f92672">metrics</span>:
{{- <span style="color:#ae81ff">contains .metrics }}</span>
  - <span style="color:#f92672">name</span>: {{ <span style="color:#ae81ff">notEmpty .name }}</span>
    <span style="color:#f92672">id</span>: {{ <span style="color:#ae81ff">notEmpty .id }}</span>
    <span style="color:#f92672">value</span>: {{ <span style="color:#ae81ff">gt .value 0 }}</span>
{{- <span style="color:#ae81ff">end }}</span>
</code></pre></div><p>will validate this data:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#75715e"># actual.data.yaml</span>
<span style="color:#f92672">metrics</span>:
  - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">business-zone::projectA</span>
    <span style="color:#f92672">id</span>: <span style="color:#ae81ff">YnVzaW5lc3Mtem9uZTo6cHJvamVjdEE=.1</span>
    <span style="color:#f92672">value</span>: <span style="color:#ae81ff">1</span>
  - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">system::load balancer1</span>
    <span style="color:#f92672">id</span>: <span style="color:#ae81ff">c3lzdGVtOjpsb2FkIGJhbGFuY2VyMQ==.1</span>
    <span style="color:#f92672">value</span>: <span style="color:#ae81ff">0</span>
  - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">system::load balancer2</span>
    <span style="color:#f92672">id</span>: <span style="color:#ae81ff">c3lzdGVtOjpsb2FkIGJhbGFuY2VyMg==.1</span>
    <span style="color:#f92672">value</span>: <span style="color:#ae81ff">0</span>
</code></pre></div><p>and will report an error when validating this data, because there is no element with a value greater than 0:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#75715e"># actual.data.yaml</span>
<span style="color:#f92672">metrics</span>:
  - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">business-zone::projectA</span>
    <span style="color:#f92672">id</span>: <span style="color:#ae81ff">YnVzaW5lc3Mtem9uZTo6cHJvamVjdEE=.1</span>
    <span style="color:#f92672">value</span>: <span style="color:#ae81ff">0</span>
  - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">system::load balancer1</span>
    <span style="color:#f92672">id</span>: <span style="color:#ae81ff">c3lzdGVtOjpsb2FkIGJhbGFuY2VyMQ==.1</span>
    <span style="color:#f92672">value</span>: <span style="color:#ae81ff">0</span>
  - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">system::load balancer2</span>
    <span style="color:#f92672">id</span>: <span style="color:#ae81ff">c3lzdGVtOjpsb2FkIGJhbGFuY2VyMg==.1</span>
    <span style="color:#f92672">value</span>: <span style="color:#ae81ff">0</span>
</code></pre></div><p>The <code>contains</code> does an unordered list verification, in order to do list verifications including orders, you can simply use the basic ruls like this:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#75715e"># expected.data.yaml</span>
<span style="color:#f92672">metrics</span>:
  - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">p99</span>
    <span style="color:#f92672">value</span>: {{ <span style="color:#ae81ff">gt (index .metrics 0).value 0 }}</span>
  - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">p95</span>
    <span style="color:#f92672">value</span>: {{ <span style="color:#ae81ff">gt (index .metrics 1).value 0 }}</span>
</code></pre></div><p>which expects the actual <code>metrics</code> list to be exactly ordered, with first element named <code>p99</code> and <code>value</code> greater 0, second element named <code>p95</code> and <code>value</code> greater 0.</p>

	

	<ul class="list-unstyled d-flex justify-content-between align-items-center mb-0 pt-5">
  <li>
    <a href="/blog/2021-01-23-tencent-cloud-violates-aplv2/" class="btn btn-primary "><span class="mr-1">←</span> Previous</a>
  </li>
    <a href="/blog/skywalking8-4-release/" class="btn btn-primary ">Next <span class="ml-1">→</span></a>
  </li>
</ul>

</div>


          </main>
          <div class="d-none d-xl-block col-xl-2 td-toc d-print-none">

            <div class="tags-wrapper">
    <div class="font-weight-bold post-meta ">
        <i class="fas fa-tags pr-1" aria-hidden="true"></i>
        Tags
    </div>
    <ul class="tags-box">
        
        <li>
            <a href="/tags/agent/" class="tag-link">Agent</a>
            <span class="count">3</span>
        </li>
        
        <li>
            <a href="/tags/browser/" class="tag-link">Browser</a>
            <span class="count">1</span>
        </li>
        
        <li>
            <a href="/tags/conference/" class="tag-link">Conference</a>
            <span class="count">5</span>
        </li>
        
        <li>
            <a href="/tags/design/" class="tag-link">Design</a>
            <span class="count">1</span>
        </li>
        
        <li>
            <a href="/tags/dotnetcore/" class="tag-link">DotNetCore</a>
            <span class="count">1</span>
        </li>
        
        <li>
            <a href="/tags/infrastructure-monitoring/" class="tag-link">Infrastructure Monitoring</a>
            <span class="count">1</span>
        </li>
        
        <li>
            <a href="/tags/java/" class="tag-link">Java</a>
            <span class="count">2</span>
        </li>
        
        <li>
            <a href="/tags/kafka/" class="tag-link">Kafka</a>
            <span class="count">1</span>
        </li>
        
        <li>
            <a href="/tags/logs/" class="tag-link">Logs</a>
            <span class="count">1</span>
        </li>
        
        <li>
            <a href="/tags/performance/" class="tag-link">Performance</a>
            <span class="count">1</span>
        </li>
        
        <li>
            <a href="/tags/profiling/" class="tag-link">Profiling</a>
            <span class="count">1</span>
        </li>
        
        <li>
            <a href="/tags/release-blog/" class="tag-link">Release Blog</a>
            <span class="count">4</span>
        </li>
        
        <li>
            <a href="/tags/satellite/" class="tag-link">Satellite</a>
            <span class="count">1</span>
        </li>
        
        <li>
            <a href="/tags/service-mesh/" class="tag-link">Service Mesh</a>
            <span class="count">3</span>
        </li>
        
        <li>
            <a href="/tags/spring/" class="tag-link">Spring</a>
            <span class="count">1</span>
        </li>
        
        <li>
            <a href="/tags/testing/" class="tag-link">Testing</a>
            <span class="count">3</span>
        </li>
        
        <li>
            <a href="/tags/tracing/" class="tag-link">Tracing</a>
            <span class="count">3</span>
        </li>
        
        <li>
            <a href="/tags/user-manual/" class="tag-link">User Manual</a>
            <span class="count">1</span>
        </li>
        
        <li>
            <a href="/tags/video/" class="tag-link">Video</a>
            <span class="count">5</span>
        </li>
        
    </ul>
</div>



            




<div class="td-page-meta ml-2 pb-1 pt-2 mb-0">











</div>






<nav id="TableOfContents">
  <ul>
    <li><a href="#background">Background</a></li>
    <li><a href="#design-thinking">Design Thinking</a></li>
    <li><a href="#branches--actions">Branches / Actions</a>
      <ul>
        <li><a href="#list-elements-match">List Elements Match</a></li>
      </ul>
    </li>
    <li><a href="#functions">Functions</a>
      <ul>
        <li><a href="#not-empty">Not Empty</a></li>
        <li><a href="#regexp-match">Regexp match</a></li>
        <li><a href="#base64">Base64</a></li>
      </ul>
    </li>
    <li><a href="#full-example">Full Example</a></li>
  </ul>
</nav>




<script>
  $(function () {
    var $toc = $("#TableOfContents");
    if (!$toc || !$toc.length) {
      return;
    }
    var top = $toc.offset().top;

    window.onscroll = debounce(setTop)

    function setTop() {
      var scrollValue = $(window).scrollTop();
      if (scrollValue >= top - 70) {
        $toc.addClass('fix')
      } else {
        $toc.removeClass('fix')
      }
    }

    function debounce(fn, wait = 200) {
      var timeout = null;
      return function () {
        clearTimeout(timeout);
        timeout = setTimeout(() => {
          fn.apply(this, arguments);
        }, wait);
      };
    }
  })

</script>

          </div>
        </div>
      </div>
      
<footer class="bg-dark py-5 sky-row">
  <div class="container-fluid text-center">
    <div class="">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Twitter" aria-label="Twitter">
    <a class="text-white" target="_blank" href="https://twitter.com/asfskywalking">
      <i class="fab fa-twitter"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Slack" aria-label="Slack">
    <a class="text-white" target="_blank" href="http://s.apache.org/slack-invite">
      <i class="fab fa-slack"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Mailing list" aria-label="Mailing list">
    <a class="text-white" target="_blank" href="https://lists.apache.org/list.html?dev@skywalking.apache.org">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-white" target="_blank" href="https://github.com/apache/skywalking">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
</ul>

        
        
    </div>
    <div class="">

        <small class="text-white">&copy; 2017 - 2021 The Apache Software Foundation All Rights Reserved</small>
        
	
    </div>
    <div class="">
      <small class="text-white   mt-4">Apache SkyWalking, SkyWalking, Apache, the Apache feather logo, and the Apache SkyWalking project logo are either registered trademarks or trademarks of the Apache Software Foundation.</small>
    </div>
  </div>
</footer>


    </div>
    
<div id="popup">
    <div class="mask">
        <img src=""/>
    </div>
</div>

    <div class="sidebar-mask"></div>
<div class="sidebar">
    <nav class="nav-links">
        <div class="nav-item"><a href="/docs/" class="nav-link">Projects and Documentation</a></div>
        <div class="nav-item"><a href="/events/" class="nav-link">Events</a></div>
        <div class="nav-item"><a href="/blog/" class="nav-link router-link-exact-active router-link-active">Blog</a>
        </div>
        <div class="nav-item"><a href="/downloads/" class="nav-link">Downloads</a></div>
        <div class="nav-item"><a href="/team/" class="nav-link">Team</a></div>
        <div class="nav-item"><a href="/zh/" class="nav-link">中文博客</a></div>
        <div class="nav-item">
            <div class="dropdown-wrapper open"><a class="dropdown-title"><span class="title">Links</span> <span
                    class="arrow down"></span></a>
                <ul class="nav-dropdown" style="">
                    <li class="dropdown-item">
                        <a href="http://www.apache.org/" target="_blank"
                           rel="noopener noreferrer" class="nav-link external">
                            Apache Software Foundation
                        </a>
                    </li>
                    <li class="dropdown-item">
                        <a href="https://github.com/apache/skywalking/issues"
                           target="_blank" rel="noopener noreferrer"
                           class="nav-link external">
                            GitHub Issue Tracker
                        </a>
                    </li>
                    <li class="dropdown-item">
                        <a href="https://lists.apache.org/list.html?dev@skywalking.apache.org" target="_blank"
                           rel="noopener noreferrer" class="nav-link external">
                            Dev Mailing List
                        </a>
                    </li>
                    <li class="dropdown-item">
                        <a href="http://www.apache.org/licenses/" target="_blank"
                           rel="noopener noreferrer" class="nav-link external">
                            License
                        </a>
                    </li>
                    <li class="dropdown-item">
                        <a href="http://www.apache.org/events/current-event"
                           target="_blank" rel="noopener noreferrer"
                           class="nav-link external">
                            Apache Events
                        </a>
                    </li>
                    <li class="dropdown-item">
                        <a href="http://www.apache.org/security/" target="_blank"
                           rel="noopener noreferrer" class="nav-link external">
                            Security
                        </a>
                    </li>
                    <li class="dropdown-item">
                        <a href="http://www.apache.org/foundation/sponsorship.html"
                           target="_blank" rel="noopener noreferrer"
                           class="nav-link external">
                            Sponsorship and Donate
                        </a>
                    </li>
                    <li class="dropdown-item">
                        <a href="http://www.apache.org/foundation/thanks.html"
                           target="_blank" rel="noopener noreferrer"
                           class="nav-link external">
                            Thanks
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</div>

    
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/js/bootstrap.bundle.min.js"></script>








<script src="/js/main.min.d1db5f048cae0266dd8434e5c9f97e7ea03718c3a0a74730f35bcc33fa2f4993.js" integrity="sha256-0dtfBIyuAmbdhDTlyfl&#43;fqA3GMOgp0cw81vMM/ovSZM=" crossorigin="anonymous"></script>





  </body>
</html>
