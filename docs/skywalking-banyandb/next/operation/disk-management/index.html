<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="twitter:site" content="skywalking.apache.org">
<meta name="twitter:image:src" content="https://skywalking.apache.org/images/skywalking_400x400.png">
<meta property="og:image" content="https://skywalking.apache.org/images/skywalking_400x400.png">

<meta name="generator" content="Hugo 0.80.0" />

<META NAME="ROBOTS" CONTENT="INDEX, FOLLOW">
<link rel="stylesheet" href="//at.alicdn.com/t/c/font_3007530_pvozs1rz2wn.css">



<link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png">
<link rel="manifest" href="/favicons/site.webmanifest">
<link rel="mask-icon" href="/favicons/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">

<title>Disk Management | Apache SkyWalking</title><meta property="og:title" content="Disk Management" />
<meta property="og:description" content="Disk Management BanyanDB provides comprehensive disk management capabilities to prevent disk space exhaustion and ensure optimal storage utilization. This includes both automatic forced retention cleanup and disk usage monitoring.
Overview BanyanDB includes a disk monitor that can automatically trigger forced retention cleanup when disk usage exceeds configured thresholds. This feature helps prevent disk space exhaustion by automatically removing old data segments and snapshots.
Configuration Data &amp; Standalone Servers The following flags are used to configure forced retention cleanup for data and standalone servers:" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/docs/skywalking-banyandb/next/operation/disk-management/" />

<meta itemprop="name" content="Disk Management">
<meta itemprop="description" content="Disk Management BanyanDB provides comprehensive disk management capabilities to prevent disk space exhaustion and ensure optimal storage utilization. This includes both automatic forced retention cleanup and disk usage monitoring.
Overview BanyanDB includes a disk monitor that can automatically trigger forced retention cleanup when disk usage exceeds configured thresholds. This feature helps prevent disk space exhaustion by automatically removing old data segments and snapshots.
Configuration Data &amp; Standalone Servers The following flags are used to configure forced retention cleanup for data and standalone servers:">

<meta itemprop="wordCount" content="1894">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Disk Management"/>
<meta name="twitter:description" content="Disk Management BanyanDB provides comprehensive disk management capabilities to prevent disk space exhaustion and ensure optimal storage utilization. This includes both automatic forced retention cleanup and disk usage monitoring.
Overview BanyanDB includes a disk monitor that can automatically trigger forced retention cleanup when disk usage exceeds configured thresholds. This feature helps prevent disk space exhaustion by automatically removing old data segments and snapshots.
Configuration Data &amp; Standalone Servers The following flags are used to configure forced retention cleanup for data and standalone servers:"/>



<link rel="preload" href="/scss/main.min.0c770159917a7e9107bd3454069daa2bf26932350638329b3c9419597d4e6e80.css" as="style">
<link href="/scss/main.min.0c770159917a7e9107bd3454069daa2bf26932350638329b3c9419597d4e6e80.css" rel="stylesheet" integrity="">



<link rel="stylesheet" href="/css/docSearch.css" />
<link rel="stylesheet" href="/css/highlight-github.css" />


<script src="/js/jquery-3.6.0.min.js"></script>





    <title>Disk Management | Apache SkyWalking</title>
  </head>
  <body class="td-page  project-doc">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand  flex-column flex-md-row td-navbar">
    <div class="sidebar-button">
      <i class="iconfont icon-menu"></i>
    </div>
    <a class="navbar-brand" href="/">
        <span class="navbar-logo"><img width="130" src="/images/logo.svg" alt="SkyWalking"></span> 
    </a>
    <div class="td-navbar-nav-scroll navbar-nav-wrapper" id="navigation">
        <ul class="navbar-nav mt-lg-0">
             
            
            
            <li class="nav-item mr-3 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="/docs" ><span>Projects and Docs</span></a>
			</li>
            
            
            
            
            <li class="nav-item mr-3 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="/events" ><span>Events</span></a>
			</li>
            
            
            
            
            <li class="nav-item mr-3 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="/blog" ><span>Blogs</span></a>
			</li>
            
            
            
            
            <li class="nav-item mr-3 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="/downloads" ><span>Downloads</span></a>
			</li>
            
            
            
            
            <li class="nav-item mr-3 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="/team" ><span>Team</span></a>
			</li>
            
            
            
            
            <li class="nav-item mr-3 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="/users" ><span>Users</span></a>
			</li>
            
            
            
            
            
            <li class="nav-item mr-3 mb-lg-0">
                <span class="link dropdown blog">
                    <a class="link-name nav-link dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">中文资料</a>
                    <div class="dropdown-menu">
                        <a class="dropdown-item" href="/zh/">博客</a>
                        <a class="dropdown-item" href="https://space.bilibili.com/390683219" target="_blank" rel="noopener noreferrer">
                            B站
                        </a>
                        <a class="dropdown-item" href="https://juejin.cn/user/13673577331607" target="_blank" rel="noopener noreferrer">
                            掘金
                        </a>
                    </div>
                </span>
            </li>

            
			
        </ul>
    </div>
    <div class="navbar-nav d-none d-lg-block search-input-box">
         
            
        
            
        
            
        
            
        
            
        
            
        
            
            <span class="link dropdown">
                <a class="link-name dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Links
                </a>
                <div class="dropdown-menu">
                    
                    <a class="dropdown-item" href="http://www.apache.org/">Apache Software Foundation</a> 
                    <a class="dropdown-item" href="https://github.com/apache/skywalking/issues">GitHub Issue Tracker</a> 
                    <a class="dropdown-item" href="https://github.com/apache/skywalking/discussions">Discussion</a> 
                    <a class="dropdown-item" href="https://lists.apache.org/list.html?dev@skywalking.apache.org">Dev Mailing List</a> 
                    <a class="dropdown-item" href="https://cwiki.apache.org/confluence/display/SKYWALKING/Home">WIKI</a> 
                    <a class="dropdown-item" href="http://www.apache.org/licenses/">License</a> 
                    <a class="dropdown-item" href="http://www.apache.org/events/current-event">Apache Events</a> 
                    <a class="dropdown-item" href="http://www.apache.org/security/">Security</a> 
                    <a class="dropdown-item" href="http://www.apache.org/foundation/sponsorship.html">Sponsor and Donate</a> 
                    <a class="dropdown-item" href="http://www.apache.org/foundation/thanks.html">Thanks</a> 
                    <a class="dropdown-item" href="https://apache.org/foundation/policies/privacy.html">Privacy</a> 
                </div>
            </span>
            
        
        
<div id="docsearch"></div>


    </div>
</nav>

    </header>
    <div class="container-fluid td-outer">

      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <div class="col-12 col-md-3 col-xl-2 d-print-none scroll-bar td-sidebar">









































                  <div class="description-wrapper">
                    <h5>
                    <img width="26" height="26" src="/images/project/banyan-db.svg">
                    BanyanDB
                    </h5>
                    <p>An observability database aims to ingest, analyze and store Metrics, Tracing and Logging data.</p>
                  </div>
                  
                  <div class="version-wrapper">Version: 
                  <select class="version-select">
                  
                    
                    
                    <option selected value="next">
                    
                      next
                    
                    </option>
                  
                    
                    
                    <option ZgotmplZ value="latest">
                    
                      latest
                    
                    </option>
                  
                    
                    
                    <option ZgotmplZ value="v0.8.0">
                    
                      v0.8.0
                    
                    </option>
                  
                  </select>
                  </div>
                  
                  <ul class="sidebar-menu">
    
    <li>
        
            <a href="/docs/skywalking-banyandb/next/readme">Welcome</a>
        
    </li>
    
    <li>
        
            
            <a href="#">User Guide<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        

            
            <a href="#">Installation<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/skywalking-banyandb/next/installation/binaries">Get Binaries</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-banyandb/next/installation/standalone">Standalone Mode</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-banyandb/next/installation/cluster">Cluster Mode</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-banyandb/next/installation/docker">Installation On Docker</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-banyandb/next/installation/kubernetes">Installation On Kubernetes</a>
        
    </li>

    

</ul>

        
    </li>

    

    <li>
        

            
            <a href="#">Basic Concepts and Terminology<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/skywalking-banyandb/next/concept/data-model">Data Model</a>
        
    </li>

    

</ul>

        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-banyandb/next/guides/quick-start/quick-start">Quick Start Tutorial</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-banyandb/next/installation/versions">Versions and Compatibility</a>
        
    </li>

    

</ul>

        
    </li>
    
    <li>
        
            
            <a href="#">Interacting<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        

            
            <a href="#">CLI<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/skywalking-banyandb/next/interacting/bydbctl/bydbctl">bydbctl</a>
        
    </li>

    

    <li>
        

            
            <a href="#">CRUD Schema<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/skywalking-banyandb/next/interacting/bydbctl/schema/group">Group</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-banyandb/next/interacting/bydbctl/schema/measure">Measure</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-banyandb/next/interacting/bydbctl/schema/stream">Stream</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-banyandb/next/interacting/bydbctl/schema/index-rule">IndexRule</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-banyandb/next/interacting/bydbctl/schema/index-rule-binding">IndexRuleBinding</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-banyandb/next/interacting/bydbctl/schema/top-n-aggregation">Top N Aggregation</a>
        
    </li>

    

</ul>

        
    </li>

    

    <li>
        

            
            <a href="#">Querying Data<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/skywalking-banyandb/next/interacting/bydbctl/query/measure">Measure</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-banyandb/next/interacting/bydbctl/query/stream">Stream</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-banyandb/next/interacting/bydbctl/query/filter-operation">Filter Operation</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-banyandb/next/interacting/bydbctl/query/top-n-aggregation">Top N Aggregation</a>
        
    </li>

    

</ul>

        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-banyandb/next/interacting/bydbctl/property">CRUD Property</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-banyandb/next/interacting/bydbctl/analyze">Analyzing Data</a>
        
    </li>

    

</ul>

        
    </li>

    

    <li>
        

            
            <a href="#">Web UI<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/skywalking-banyandb/next/interacting/web-ui/dashboard">Dashboard</a>
        
    </li>

    

    <li>
        

            
            <a href="#">CRUD Schema<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/skywalking-banyandb/next/interacting/web-ui/schema/group">Group</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-banyandb/next/interacting/web-ui/schema/measure">Measure</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-banyandb/next/interacting/web-ui/schema/stream">Stream</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-banyandb/next/interacting/web-ui/schema/index-rule">IndexRule</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-banyandb/next/interacting/web-ui/schema/index-rule-binding">IndexRuleBinding</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-banyandb/next/interacting/web-ui/schema/top-n-aggregation">Top N Aggregation</a>
        
    </li>

    

</ul>

        
    </li>

    

    <li>
        

            
            <a href="#">Querying Data<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/skywalking-banyandb/next/interacting/web-ui/query/measure">Measure</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-banyandb/next/interacting/web-ui/query/stream">Stream</a>
        
    </li>

    

</ul>

        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-banyandb/next/interacting/web-ui/property">CRUD Property</a>
        
    </li>

    

</ul>

        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-banyandb/next/interacting/java-client">Java Client</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-banyandb/next/interacting/data-lifecycle">Data Lifecycle</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-banyandb/next/interacting/bydbql">BydbQL</a>
        
    </li>

    

</ul>

        
    </li>
    
    <li>
        
            
            <a href="#">Operation and Maintenance<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/skywalking-banyandb/next/operation/configuration">Configure BanyanDB</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-banyandb/next/operation/disk-management">Disk Management</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-banyandb/next/operation/system">System Configuration</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-banyandb/next/operation/upgrade">Upgrade</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-banyandb/next/operation/observability">Observability</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-banyandb/next/operation/cluster">Cluster Management</a>
        
    </li>

    

    <li>
        

            
            <a href="#">Troubleshooting<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/skywalking-banyandb/next/operation/troubleshooting/error-checklist">Error Checklist</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-banyandb/next/operation/troubleshooting/install">Troubleshooting Installation</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-banyandb/next/operation/troubleshooting/crash">Troubleshooting Crash</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-banyandb/next/operation/troubleshooting/no-data">Troubleshooting No Data</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-banyandb/next/operation/troubleshooting/overhead">Troubleshooting Overhead</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-banyandb/next/operation/troubleshooting/query">Troubleshooting Query</a>
        
    </li>

    

</ul>

        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-banyandb/next/operation/security">Security</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-banyandb/next/operation/backup">Backup</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-banyandb/next/operation/restore">Restore</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-banyandb/next/operation/lifecycle">Lifecycle Management</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-banyandb/next/concept/property-repair">Property Background Repair</a>
        
    </li>

    

</ul>

        
    </li>
    
    <li>
        
            
            <a href="#">File Format<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/skywalking-banyandb/next/concept/tsdb">v1.3.0</a>
        
    </li>

    

</ul>

        
    </li>
    
    <li>
        
            
            <a href="#">Concepts<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/skywalking-banyandb/next/concept/clustering">Clustering</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-banyandb/next/concept/tsdb">TSDB</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-banyandb/next/concept/rotation">Data Rotation</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-banyandb/next/concept/property-repair">Property Background Repair</a>
        
    </li>

    

</ul>

        
    </li>
    
    <li>
        
            
            <a href="#">Contribute<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/skywalking-banyandb/next/contribute/debugging">Debugging</a>
        
    </li>

    

</ul>

        
    </li>
    
</ul>
<script src="/js/sidebar-menu.js"></script>
<script>
  (function (){
    $.sidebarMenu($('.sidebar-menu'))
    var path = window.location.pathname;
    var hash = window.location.hash;
    var $a = $('.sidebar-menu a')
    $a.each(function (e){
      if($(this).attr('href')+'/' === path || $(this).attr('href').replace('#','/#') === path+hash){
        $(this).parents('li').addClass('active').show()
      }
    })
    $a.on('click',function (){
      var url = $(this).attr('href')
      if(url!=='#'){
        window.location.href = url
      }
    })
  })()
</script>

                  <div class="commit-id">Commit Id: 4925f01</div>
                






</div>
            <main class="col-12 col-md-9 col-xl-8 pl-md-5 pr-md-4" role="main">
              <i class="iconfont icon-menu-doc doc-menu-button"></i>
              
<div class="td-content">
	<h1 id="disk-management">Disk Management</h1>
<p>BanyanDB provides comprehensive disk management capabilities to prevent disk space exhaustion and ensure optimal storage utilization. This includes both automatic forced retention cleanup and disk usage monitoring.</p>
<h2 id="overview">Overview</h2>
<p>BanyanDB includes a disk monitor that can automatically trigger forced retention cleanup when disk usage exceeds configured thresholds. This feature helps prevent disk space exhaustion by automatically removing old data segments and snapshots.</p>
<h2 id="configuration">Configuration</h2>
<h3 id="data--standalone-servers">Data &amp; Standalone Servers</h3>
<p>The following flags are used to configure forced retention cleanup for data and standalone servers:</p>
<h4 id="measure-service">Measure Service</h4>
<ul>
<li><code>--measure-retention-high-watermark float</code>: Disk usage percentage that triggers forced retention cleanup (0-100, default: 95.0).</li>
<li><code>--measure-retention-low-watermark float</code>: Disk usage percentage where forced retention cleanup stops (0-100, default: 85.0).</li>
<li><code>--measure-retention-check-interval duration</code>: Interval for checking disk usage (default: 5m).</li>
<li><code>--measure-retention-cooldown duration</code>: Cooldown period between forced segment deletions (default: 30s).</li>
<li><code>--measure-retention-force-cleanup-enabled bool</code>: Enable forced retention cleanup when disk usage exceeds high watermark (default: false).</li>
</ul>
<h4 id="stream-service">Stream Service</h4>
<ul>
<li><code>--stream-retention-high-watermark float</code>: Disk usage percentage that triggers forced retention cleanup (0-100, default: 95.0).</li>
<li><code>--stream-retention-low-watermark float</code>: Disk usage percentage where forced retention cleanup stops (0-100, default: 85.0).</li>
<li><code>--stream-retention-check-interval duration</code>: Interval for checking disk usage (default: 5m).</li>
<li><code>--stream-retention-cooldown duration</code>: Cooldown period between forced segment deletions (default: 30s).</li>
<li><code>--stream-retention-force-cleanup-enabled bool</code>: Enable forced retention cleanup when disk usage exceeds high watermark (default: false).</li>
</ul>
<h4 id="trace-service">Trace Service</h4>
<ul>
<li><code>--trace-retention-high-watermark float</code>: Disk usage percentage that triggers forced retention cleanup (0-100, default: 95.0).</li>
<li><code>--trace-retention-low-watermark float</code>: Disk usage percentage where forced retention cleanup stops (0-100, default: 85.0).</li>
<li><code>--trace-retention-check-interval duration</code>: Interval for checking disk usage (default: 5m).</li>
<li><code>--trace-retention-cooldown duration</code>: Cooldown period between forced segment deletions (default: 30s).</li>
<li><code>--trace-retention-force-cleanup-enabled bool</code>: Enable forced retention cleanup when disk usage exceeds high watermark (default: false).</li>
</ul>
<h3 id="liaison-servers">Liaison Servers</h3>
<p>Liaison servers use the disk usage flags to manage their write queue and prevent disk space exhaustion:</p>
<ul>
<li><code>--measure-max-disk-usage-percent int</code>: The maximum disk usage percentage allowed for measure data (0-100, default: 95).</li>
<li><code>--stream-max-disk-usage-percent int</code>: The maximum disk usage percentage allowed for stream data (0-100, default: 95).</li>
<li><code>--trace-max-disk-usage-percent int</code>: The maximum disk usage percentage allowed for trace data (0-100, default: 95).</li>
</ul>
<p><strong>Write Queue Mechanism</strong>: Liaison servers maintain a write queue that buffers incoming data before syncing it to data servers. When the queue fills up and disk usage exceeds the configured threshold, the liaison server throttles incoming writes to allow the sync process to catch up and free up disk space.</p>
<h3 id="property-service">Property Service</h3>
<ul>
<li><code>--property-max-disk-usage-percent int</code>: The maximum disk usage percentage allowed (0-100, default: 95).</li>
</ul>
<p><strong>Property Service Behavior</strong>: The property service uses a similar disk management approach to liaison servers, where disk usage monitoring is handled at the write operation level rather than through forced cleanup.</p>
<h2 id="how-it-works">How It Works</h2>
<h3 id="data--standalone-servers-disk-management-process">Data &amp; Standalone Servers: Disk Management Process</h3>
<h4 id="when-force-cleanup-is-enabled">When Force Cleanup is Enabled</h4>
<ol>
<li><strong>Monitoring</strong>: The disk monitor periodically checks disk usage on the service&rsquo;s data path</li>
<li><strong>Trigger</strong>: When disk usage exceeds the high watermark, forced cleanup begins</li>
<li><strong>Cleanup</strong>: The system removes old data segments and snapshots in controlled steps</li>
<li><strong>Cooldown</strong>: A configurable cooldown period prevents thrashing between deletions</li>
<li><strong>Stop</strong>: Cleanup continues until disk usage falls below the low watermark</li>
</ol>
<h4 id="when-force-cleanup-is-disabled-default">When Force Cleanup is Disabled (Default)</h4>
<ol>
<li><strong>Monitoring</strong>: The disk monitor periodically checks disk usage for metrics and monitoring only</li>
<li><strong>No Cleanup</strong>: No automatic segment or snapshot deletion occurs regardless of disk usage</li>
<li><strong>Write Throttling</strong>: Write operations are throttled/rejected when disk usage exceeds the high watermark</li>
<li><strong>Manual Management</strong>: Disk space management must be handled manually or through external processes</li>
</ol>
<h4 id="results-when-high-watermark-is-reached">Results When High Watermark is Reached</h4>
<p>When disk usage exceeds the high watermark threshold, the following actions occur:</p>
<p><strong>Immediate Actions:</strong></p>
<ul>
<li><strong>Forced cleanup activation</strong>: The system sets <code>forced_retention_active</code> metric to 1</li>
<li><strong>Logging</strong>: An INFO-level log message is generated indicating disk usage above high watermark</li>
<li><strong>Metrics update</strong>: <code>forced_retention_runs_total</code> counter is incremented</li>
<li><strong>Write throttling</strong>: New write requests may be throttled or rejected with <code>STATUS_DISK_FULL</code> error</li>
</ul>
<p><strong>Cleanup Process:</strong></p>
<ol>
<li><strong>Snapshot cleanup</strong>: First, old snapshots (older than 24 hours) are removed</li>
<li><strong>Disk usage recheck</strong>: After snapshot cleanup, disk usage is checked again</li>
<li><strong>Segment deletion</strong>: If still above low watermark, the oldest data segment is deleted</li>
<li><strong>Iterative process</strong>: The process repeats with cooldown periods between deletions</li>
<li><strong>Completion</strong>: Cleanup stops when disk usage falls below the low watermark</li>
</ol>
<p><strong>Data Preservation:</strong></p>
<ul>
<li>Snapshots newer than 24 hours are always preserved</li>
<li>Only one segment is deleted per iteration to maintain system stability</li>
<li>The system follows an oldest-first deletion strategy across all groups</li>
</ul>
<h3 id="liaison-servers-write-queue-management">Liaison Servers: Write Queue Management</h3>
<p>Liaison servers handle disk management differently due to their role as data coordinators:</p>
<ol>
<li><strong>Write Queue</strong>: Incoming data is buffered in a write queue before being synced to data servers</li>
<li><strong>Queue Monitoring</strong>: The system monitors both disk usage and queue capacity</li>
<li><strong>Write Throttling</strong>: When disk usage exceeds the threshold, incoming writes are throttled</li>
<li><strong>Sync Process</strong>: The throttling allows the sync process to catch up and transfer data to data servers</li>
<li><strong>Queue Drainage</strong>: As data is synced and removed from the queue, disk space is freed up</li>
<li><strong>Write Resumption</strong>: Once disk usage drops below the threshold, normal write operations resume</li>
</ol>
<h4 id="results-when-max-disk-usage-percent-is-reached">Results When Max Disk Usage Percent is Reached</h4>
<p>When disk usage exceeds the configured max disk usage percentage threshold, the following actions occur:</p>
<p><strong>Immediate Actions:</strong></p>
<ul>
<li><strong>Health check failure</strong>: The service&rsquo;s <code>CheckHealth()</code> method returns <code>STATUS_DISK_FULL</code> error</li>
<li><strong>Write rejection</strong>: All incoming write requests are rejected with <code>STATUS_DISK_FULL</code> status</li>
<li><strong>Logging</strong>: A WARN-level log message is generated indicating disk usage is too high</li>
<li><strong>Service status</strong>: The service becomes read-only until disk usage decreases</li>
</ul>
<p><strong>Error Response Details:</strong></p>
<ul>
<li><strong>Status Code</strong>: <code>STATUS_DISK_FULL</code> (status code 6)</li>
<li><strong>Error Message</strong>: &ldquo;disk usage is too high, stop writing&rdquo;</li>
<li><strong>Client Impact</strong>: Write operations fail immediately with the disk full error</li>
<li><strong>Recovery</strong>: Writes resume automatically when disk usage drops below the threshold</li>
</ul>
<p><strong>Queue Behavior:</strong></p>
<ul>
<li><strong>Write Queue</strong>: Data already in the queue continues to be processed and synced</li>
<li><strong>New Writes</strong>: New write requests are rejected at the health check level</li>
<li><strong>Sync Process</strong>: Continues to drain the queue and sync data to data servers</li>
</ul>
<h3 id="property-service-write-operation-management">Property Service: Write Operation Management</h3>
<p>The property service handles disk management through write operation health checks rather than forced cleanup:</p>
<ol>
<li><strong>Health Check</strong>: Property update operations check disk usage before processing</li>
<li><strong>Write Rejection</strong>: When disk usage exceeds the threshold, property updates are rejected</li>
<li><strong>Read Operations</strong>: Query and delete operations continue to work normally</li>
<li><strong>No Cleanup</strong>: The property service does not perform automatic data cleanup</li>
</ol>
<h4 id="results-when-max-disk-usage-percent-is-reached-property-service">Results When Max Disk Usage Percent is Reached (Property Service)</h4>
<p>When disk usage exceeds the configured max disk usage percentage threshold, the following actions occur:</p>
<p><strong>Immediate Actions:</strong></p>
<ul>
<li><strong>Health check failure</strong>: Property update operations' <code>CheckHealth()</code> method returns <code>STATUS_DISK_FULL</code> error</li>
<li><strong>Update rejection</strong>: All property update requests are rejected with <code>STATUS_DISK_FULL</code> status</li>
<li><strong>Logging</strong>: A WARN-level log message is generated indicating disk usage is too high</li>
<li><strong>Service status</strong>: Property update operations become read-only until disk usage decreases</li>
</ul>
<p><strong>Error Response Details:</strong></p>
<ul>
<li><strong>Status Code</strong>: <code>STATUS_DISK_FULL</code> (status code 6)</li>
<li><strong>Error Message</strong>: &ldquo;disk usage is too high, stop writing&rdquo;</li>
<li><strong>Client Impact</strong>: Property update operations fail immediately with the disk full error</li>
<li><strong>Recovery</strong>: Property updates resume automatically when disk usage drops below the threshold</li>
</ul>
<p><strong>Operation Behavior:</strong></p>
<ul>
<li><strong>Property Updates</strong>: Rejected at the health check level when disk usage is too high</li>
<li><strong>Property Queries</strong>: Continue to work normally (no disk usage check)</li>
<li><strong>Property Deletes</strong>: Continue to work normally (no disk usage check)</li>
<li><strong>Snapshots</strong>: Continue to work normally (no disk usage check)</li>
<li><strong>Repair Operations</strong>: Continue to work normally (no disk usage check)</li>
</ul>
<h3 id="data-preservation">Data Preservation</h3>
<ul>
<li>Snapshots newer than 24 hours are always preserved during cleanup</li>
<li>The system follows an oldest-first deletion strategy across all groups</li>
<li>Only one segment is deleted per iteration to maintain system stability</li>
<li>Liaison servers preserve data integrity by ensuring all queued data is synced before cleanup</li>
</ul>
<h2 id="important-considerations">Important Considerations</h2>
<h3 id="data--standalone-servers-1">Data &amp; Standalone Servers</h3>
<ul>
<li>The high watermark must be greater than the low watermark for each service</li>
<li>When disk usage exceeds the high watermark, the service will start forced cleanup and may throttle writes</li>
<li>The disk monitor measures usage on the service&rsquo;s data path only</li>
<li>Snapshots newer than 24 hours are always preserved during cleanup</li>
</ul>
<h3 id="liaison-servers-1">Liaison Servers</h3>
<ul>
<li>Write throttling occurs when disk usage exceeds the configured threshold</li>
<li>The throttling mechanism allows the sync process to catch up with incoming data</li>
<li>Liaison servers do not perform automatic data cleanup - they rely on data servers for that</li>
<li>The write queue acts as a buffer to handle temporary spikes in data ingestion</li>
<li>Proper tuning of the disk usage threshold is crucial for optimal performance</li>
</ul>
<h2 id="monitoring-and-metrics">Monitoring and Metrics</h2>
<p>The disk monitor exposes the following metrics for each service (measure, stream, trace) under the <code>storage.retention.{service}</code> namespace:</p>
<ul>
<li><code>forced_retention_active{service}</code> (gauge): Whether forced retention cleanup is currently active (1 = active, 0 = inactive)</li>
<li><code>forced_retention_runs_total{service}</code> (counter): Total number of forced retention cleanup runs</li>
<li><code>forced_retention_segments_deleted_total{service}</code> (counter): Total number of segments deleted during forced retention cleanup</li>
<li><code>forced_retention_last_run_seconds{service}</code> (gauge): Timestamp of the last forced retention cleanup run</li>
<li><code>forced_retention_cooldown_seconds{service}</code> (gauge): Cooldown period between forced segment deletions</li>
<li><code>disk_usage_percent{service}</code> (gauge): Current disk usage percentage for the service</li>
<li><code>snapshots_deleted_total{service}</code> (counter): Total number of snapshots deleted during cleanup</li>
</ul>
<h2 id="configuration-examples">Configuration Examples</h2>
<h3 id="standalonedata-server-configuration">Standalone/Data Server Configuration</h3>
<h4 id="with-force-cleanup-enabled">With Force Cleanup Enabled</h4>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">banyand standalone <span style="color:#d14">\
</span><span style="color:#d14"></span>  --measure-retention-high-watermark<span style="color:#000;font-weight:bold">=</span>90.0 <span style="color:#d14">\
</span><span style="color:#d14"></span>  --measure-retention-low-watermark<span style="color:#000;font-weight:bold">=</span>80.0 <span style="color:#d14">\
</span><span style="color:#d14"></span>  --measure-retention-check-interval<span style="color:#000;font-weight:bold">=</span>2m <span style="color:#d14">\
</span><span style="color:#d14"></span>  --measure-retention-force-cleanup-enabled<span style="color:#000;font-weight:bold">=</span><span style="color:#0086b3">true</span> <span style="color:#d14">\
</span><span style="color:#d14"></span>  --stream-retention-high-watermark<span style="color:#000;font-weight:bold">=</span>85.0 <span style="color:#d14">\
</span><span style="color:#d14"></span>  --stream-retention-low-watermark<span style="color:#000;font-weight:bold">=</span>75.0 <span style="color:#d14">\
</span><span style="color:#d14"></span>  --stream-retention-force-cleanup-enabled<span style="color:#000;font-weight:bold">=</span><span style="color:#0086b3">true</span> <span style="color:#d14">\
</span><span style="color:#d14"></span>  --trace-retention-high-watermark<span style="color:#000;font-weight:bold">=</span>95.0 <span style="color:#d14">\
</span><span style="color:#d14"></span>  --trace-retention-low-watermark<span style="color:#000;font-weight:bold">=</span>85.0 <span style="color:#d14">\
</span><span style="color:#d14"></span>  --trace-retention-force-cleanup-enabled<span style="color:#000;font-weight:bold">=</span><span style="color:#0086b3">true</span>
</code></pre></div><h4 id="with-force-cleanup-disabled-default---write-throttling-only">With Force Cleanup Disabled (Default - Write Throttling Only)</h4>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">banyand standalone <span style="color:#d14">\
</span><span style="color:#d14"></span>  --measure-retention-high-watermark<span style="color:#000;font-weight:bold">=</span>90.0 <span style="color:#d14">\
</span><span style="color:#d14"></span>  --stream-retention-high-watermark<span style="color:#000;font-weight:bold">=</span>85.0 <span style="color:#d14">\
</span><span style="color:#d14"></span>  --trace-retention-high-watermark<span style="color:#000;font-weight:bold">=</span>95.0
  <span style="color:#998;font-style:italic"># Force cleanup flags omitted = disabled by default</span>
  <span style="color:#998;font-style:italic"># Only write throttling occurs when watermarks are exceeded</span>
</code></pre></div><h3 id="liaison-server-configuration">Liaison Server Configuration</h3>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">banyand liaison <span style="color:#d14">\
</span><span style="color:#d14"></span>  --measure-max-disk-usage-percent<span style="color:#000;font-weight:bold">=</span><span style="color:#099">90</span> <span style="color:#d14">\
</span><span style="color:#d14"></span>  --stream-max-disk-usage-percent<span style="color:#000;font-weight:bold">=</span><span style="color:#099">85</span> <span style="color:#d14">\
</span><span style="color:#d14"></span>  --trace-max-disk-usage-percent<span style="color:#000;font-weight:bold">=</span><span style="color:#099">95</span>
</code></pre></div><h3 id="property-service-configuration">Property Service Configuration</h3>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">banyand data <span style="color:#d14">\
</span><span style="color:#d14"></span>  --property-max-disk-usage-percent<span style="color:#000;font-weight:bold">=</span><span style="color:#099">90</span>
</code></pre></div><h3 id="environment-variables">Environment Variables</h3>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh"><span style="color:#998;font-style:italic"># For standalone/data servers with force cleanup enabled</span>
<span style="color:#0086b3">export</span> <span style="color:#008080">BYDB_MEASURE_RETENTION_HIGH_WATERMARK</span><span style="color:#000;font-weight:bold">=</span>90.0
<span style="color:#0086b3">export</span> <span style="color:#008080">BYDB_MEASURE_RETENTION_LOW_WATERMARK</span><span style="color:#000;font-weight:bold">=</span>80.0
<span style="color:#0086b3">export</span> <span style="color:#008080">BYDB_MEASURE_RETENTION_FORCE_CLEANUP_ENABLED</span><span style="color:#000;font-weight:bold">=</span><span style="color:#0086b3">true</span>
<span style="color:#0086b3">export</span> <span style="color:#008080">BYDB_STREAM_RETENTION_HIGH_WATERMARK</span><span style="color:#000;font-weight:bold">=</span>85.0
<span style="color:#0086b3">export</span> <span style="color:#008080">BYDB_STREAM_RETENTION_LOW_WATERMARK</span><span style="color:#000;font-weight:bold">=</span>75.0
<span style="color:#0086b3">export</span> <span style="color:#008080">BYDB_STREAM_RETENTION_FORCE_CLEANUP_ENABLED</span><span style="color:#000;font-weight:bold">=</span><span style="color:#0086b3">true</span>
<span style="color:#0086b3">export</span> <span style="color:#008080">BYDB_TRACE_RETENTION_HIGH_WATERMARK</span><span style="color:#000;font-weight:bold">=</span>95.0
<span style="color:#0086b3">export</span> <span style="color:#008080">BYDB_TRACE_RETENTION_LOW_WATERMARK</span><span style="color:#000;font-weight:bold">=</span>85.0
<span style="color:#0086b3">export</span> <span style="color:#008080">BYDB_TRACE_RETENTION_FORCE_CLEANUP_ENABLED</span><span style="color:#000;font-weight:bold">=</span><span style="color:#0086b3">true</span>

<span style="color:#998;font-style:italic"># For standalone/data servers with force cleanup disabled (default)</span>
<span style="color:#0086b3">export</span> <span style="color:#008080">BYDB_MEASURE_RETENTION_HIGH_WATERMARK</span><span style="color:#000;font-weight:bold">=</span>90.0
<span style="color:#0086b3">export</span> <span style="color:#008080">BYDB_STREAM_RETENTION_HIGH_WATERMARK</span><span style="color:#000;font-weight:bold">=</span>85.0
<span style="color:#0086b3">export</span> <span style="color:#008080">BYDB_TRACE_RETENTION_HIGH_WATERMARK</span><span style="color:#000;font-weight:bold">=</span>95.0
<span style="color:#998;font-style:italic"># Force cleanup environment variables omitted = disabled by default</span>

<span style="color:#998;font-style:italic"># For liaison servers</span>
<span style="color:#0086b3">export</span> <span style="color:#008080">BYDB_MEASURE_MAX_DISK_USAGE_PERCENT</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">90</span>
<span style="color:#0086b3">export</span> <span style="color:#008080">BYDB_STREAM_MAX_DISK_USAGE_PERCENT</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">85</span>
<span style="color:#0086b3">export</span> <span style="color:#008080">BYDB_TRACE_MAX_DISK_USAGE_PERCENT</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">95</span>

<span style="color:#998;font-style:italic"># For property service</span>
<span style="color:#0086b3">export</span> <span style="color:#008080">BYDB_PROPERTY_MAX_DISK_USAGE_PERCENT</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">90</span>
</code></pre></div><h2 id="troubleshooting">Troubleshooting</h2>
<h3 id="high-disk-usage">High Disk Usage</h3>
<p>If you&rsquo;re experiencing high disk usage:</p>
<ol>
<li>Check the current disk usage metrics: <code>disk_usage_percent{service}</code></li>
<li>Verify that forced retention is active: <code>forced_retention_active{service}</code></li>
<li>Monitor cleanup progress: <code>forced_retention_segments_deleted_total{service}</code></li>
<li>Adjust watermarks if needed to trigger cleanup earlier</li>
</ol>
<h3 id="write-throttling">Write Throttling</h3>
<p>If writes are being throttled:</p>
<ol>
<li><strong>For data/standalone servers</strong>: Check if forced retention is running and wait for cleanup to complete</li>
<li><strong>For liaison servers</strong>:
<ul>
<li>Check if the write queue is full and sync process is behind</li>
<li>Monitor the sync process performance to data servers</li>
<li>Consider reducing the <code>*-max-disk-usage-percent</code> value to trigger throttling earlier</li>
<li>Ensure data servers have sufficient capacity to receive synced data</li>
</ul>
</li>
<li>Monitor the <code>forced_retention_active</code> metric to see if cleanup is in progress</li>
</ol>
<h3 id="liaison-server-specific-issues">Liaison Server Specific Issues</h3>
<p>If liaison servers are experiencing persistent write throttling:</p>
<ol>
<li><strong>Sync Process Bottleneck</strong>: Check if data servers are overloaded or have high disk usage</li>
<li><strong>Network Issues</strong>: Verify network connectivity between liaison and data servers</li>
<li><strong>Queue Size</strong>: Consider increasing write queue capacity if temporary spikes are common</li>
<li><strong>Threshold Tuning</strong>: Lower the disk usage threshold to provide more buffer space</li>
</ol>
<h3 id="property-service-specific-issues">Property Service Specific Issues</h3>
<p>If property service is experiencing persistent write rejection:</p>
<ol>
<li><strong>Disk Space</strong>: Check available disk space on the property service data path</li>
<li><strong>Threshold Tuning</strong>: Lower the <code>property-max-disk-usage-percent</code> value to provide more buffer space</li>
<li><strong>Data Cleanup</strong>: Consider manually cleaning up old property data if automatic cleanup is not available</li>
<li><strong>Read Operations</strong>: Note that property queries and deletes continue to work even when updates are rejected</li>
</ol>
<h3 id="configuration-validation">Configuration Validation</h3>
<p>Ensure your configuration is valid:</p>
<ul>
<li>High watermark &gt; Low watermark (for data/standalone servers)</li>
<li>All percentage values are between 0 and 100</li>
<li>Check interval and cooldown are positive durations</li>
<li>Liaison server thresholds should account for expected queue size and sync latency</li>
<li>Property service threshold should account for expected property data growth and available disk space</li>
</ul>

</div>
<div>
  
  
  
  <div id="edit-github">
    <svg
      fill="currentColor"
      height="20"
      width="20"
      viewBox="0 0 40 40"
      aria-hidden="true"
      style="margin-right: 0.1em;vertical-align: sub; color: #3176d9">
      <g>
        <path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z" />
      </g>
    </svg>
    <a class="github-link" title="Edit this page" href="" target="_blank">
      <span id="edit-github-text">Edit this page</span>
    </a>
  </div>
  
</div>
<script>
  let reg = /\/docs\/[a-zA-Z\-]+\/([\w|\.]+)\//;
  let res = reg.exec(location.href);
  let version = res && res[1];
  let editGithub = document.getElementById("edit-github");
  if (editGithub) {
    editGithub.style.display = version === "next" ? "block" : "none";
  }
  
  if (version === "next") {
    reg = /\/docs\/(.+?)\//;
    let repoRes = reg.exec(location.href);
    let repo = repoRes && repoRes[1];
    if (repo === "main") {
      repo = "skywalking"
    }
    reg = /\/next\/(.+)/;
    let docs = reg.exec(location.href);
    let docsUrl = docs && docs[1];
    if (docsUrl) {
      docsUrl = docsUrl.replace(/readme/i, 'README');
    }
    let prefixUrl = "https://github.com/apache/" + repo + "/blob/master/docs/";
    let editGithubLink = document.querySelector("#edit-github a");
    if (editGithubLink) {
      editGithubLink.href = prefixUrl + docsUrl.replace(/\/$/, ".md");
    }
  }
</script>

            </main>
          <div id="toc" class="d-none d-xl-block col-xl-2 td-toc d-print-none">
            




<div class="td-page-meta ml-2 pb-1 pt-2 mb-0">











</div>






<nav id="TableOfContents">
  <ul>
    <li><a href="#disk-management">Disk Management</a>
      <ul>
        <li><a href="#overview">Overview</a></li>
        <li><a href="#configuration">Configuration</a>
          <ul>
            <li><a href="#data--standalone-servers">Data &amp; Standalone Servers</a></li>
            <li><a href="#liaison-servers">Liaison Servers</a></li>
            <li><a href="#property-service">Property Service</a></li>
          </ul>
        </li>
        <li><a href="#how-it-works">How It Works</a>
          <ul>
            <li><a href="#data--standalone-servers-disk-management-process">Data &amp; Standalone Servers: Disk Management Process</a></li>
            <li><a href="#liaison-servers-write-queue-management">Liaison Servers: Write Queue Management</a></li>
            <li><a href="#property-service-write-operation-management">Property Service: Write Operation Management</a></li>
            <li><a href="#data-preservation">Data Preservation</a></li>
          </ul>
        </li>
        <li><a href="#important-considerations">Important Considerations</a>
          <ul>
            <li><a href="#data--standalone-servers-1">Data &amp; Standalone Servers</a></li>
            <li><a href="#liaison-servers-1">Liaison Servers</a></li>
          </ul>
        </li>
        <li><a href="#monitoring-and-metrics">Monitoring and Metrics</a></li>
        <li><a href="#configuration-examples">Configuration Examples</a>
          <ul>
            <li><a href="#standalonedata-server-configuration">Standalone/Data Server Configuration</a></li>
            <li><a href="#liaison-server-configuration">Liaison Server Configuration</a></li>
            <li><a href="#property-service-configuration">Property Service Configuration</a></li>
            <li><a href="#environment-variables">Environment Variables</a></li>
          </ul>
        </li>
        <li><a href="#troubleshooting">Troubleshooting</a>
          <ul>
            <li><a href="#high-disk-usage">High Disk Usage</a></li>
            <li><a href="#write-throttling">Write Throttling</a></li>
            <li><a href="#liaison-server-specific-issues">Liaison Server Specific Issues</a></li>
            <li><a href="#property-service-specific-issues">Property Service Specific Issues</a></li>
            <li><a href="#configuration-validation">Configuration Validation</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>




<script>
  $(function () {
    var $toc = $("#TableOfContents");
    if (!$toc || !$toc.length) {
      return;
    }
    var top = $toc.offset().top;
    $(window).on("scroll", debounce(setTop, 100))
    $(window).on("scroll", debounce(addActive, 30))

    function addActive() {
      var scrollValue = $(window).scrollTop();
      var topEle = null;
      $.each($('main h1, main h2, main h3'), function (index, item) {
        if ($(item).offset().top - 70 > scrollValue) {
          return
        }
        if (!topEle) {
          topEle = item
        } else if ($(item).offset().top >= $(topEle).offset().top) {
          topEle = item
        }
        if (topEle) {
          var id = $(item).attr('id');
          $toc.find('a').removeClass("active").end().find('a[href="' + '#' + id + '"]').addClass("active")
        }
      })
    }

    function setTop() {
      var scrollValue = $(window).scrollTop();
      if (scrollValue >= top - 70) {
        $toc.addClass('fixed')
      } else {
        $toc.removeClass('fixed')
      }
    }

    function debounce(fn, wait) {
      var timeout = null;
      return function () {
        clearTimeout(timeout);
        timeout = setTimeout(() => {
          fn.apply(this, arguments);
        }, wait);
      };
    }
  })

</script>

          </div>

        </div>
      </div>

      
<footer class="py-5 sky-row">
  <div class="container-fluid text-center">
    <div class="">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Twitter" aria-label="Twitter">
    <a class="text-color" target="_blank" href="https://twitter.com/asfskywalking">
      <i class="iconfont icon-twitter"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Slack" aria-label="Slack">
    <a class="text-color" target="_blank" href="http://s.apache.org/slack-invite">
      <i class="iconfont icon-slack"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Mailing list" aria-label="Mailing list">
    <a class="text-color" target="_blank" href="https://lists.apache.org/list.html?dev@skywalking.apache.org">
      <i class="iconfont icon-email"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-color" target="_blank" href="https://github.com/apache/skywalking">
      <i class="iconfont icon-github"></i>
    </a>
  </li>
  
</ul>

        
        
    </div>
    <div class="">

        <small class="text-color">&copy; 2017 - 2025 The Apache Software Foundation All Rights Reserved</small>
        
	
    </div>
    <div class="">
      <small class="text-color mt-4">Apache SkyWalking, SkyWalking, Apache, the Apache feather logo, and the Apache SkyWalking project logo are either registered trademarks or trademarks of the Apache Software Foundation.</small>
    </div>
  </div>
</footer>


    </div>
    























































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































    
<div id="popup">
    <div class="mask">
        <img src=""/>
    </div>
</div>

    <div class="sidebar-mask"></div>
<div class="sidebar">
    <nav class="nav-links">
        <div class="nav-item"><a href="/docs/" class="nav-link">Projects and Documentation</a></div>
        <div class="nav-item"><a href="/events/" class="nav-link">Events</a></div>
        <div class="nav-item"><a href="/blog/" class="nav-link router-link-exact-active router-link-active">Blog</a>
        </div>
        <div class="nav-item"><a href="/downloads/" class="nav-link">Downloads</a></div>
        <div class="nav-item"><a href="/team/" class="nav-link">Team</a></div>
        <div class="nav-item"><a href="/users/" class="nav-link">Users</a></div>
        <div class="nav-item">
            <div class="dropdown-wrapper open">
                <a class="dropdown-title"><span>中文资料</span>
                    <span class="arrow down"></span>
                </a>
                <ul class="nav-dropdown">
                    <li class="dropdown-item">
                        <a href="/zh/" class="nav-link external">博客</a>
                    </li>
                    <li class="dropdown-item">
                        <a href="https://space.bilibili.com/390683219" target="_blank"
                           rel="noopener noreferrer" class="nav-link external">B站</a>
                    </li>
                    <li class="dropdown-item">
                        <a href="https://juejin.cn/user/13673577331607" target="_blank"
                           rel="noopener noreferrer" class="nav-link external">掘金</a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="nav-item">
            <div class="dropdown-wrapper open">
                <a class="dropdown-title">
                    <span>Links</span>
                    <span class="arrow down"></span>
                </a>
                <ul class="nav-dropdown">
                    <li class="dropdown-item">
                        <a href="http://www.apache.org/" target="_blank"
                           rel="noopener noreferrer" class="nav-link external">
                            Apache Software Foundation
                        </a>
                    </li>
                    <li class="dropdown-item">
                        <a href="https://github.com/apache/skywalking/issues"
                           target="_blank" rel="noopener noreferrer"
                           class="nav-link external">
                            GitHub Issue Tracker
                        </a>
                    </li>
                    <li class="dropdown-item">
                        <a href="https://lists.apache.org/list.html?dev@skywalking.apache.org" target="_blank"
                           rel="noopener noreferrer" class="nav-link external">
                            Dev Mailing List
                        </a>
                    </li>
                    <li class="dropdown-item">
                        <a href="http://www.apache.org/licenses/" target="_blank"
                           rel="noopener noreferrer" class="nav-link external">
                            License
                        </a>
                    </li>
                    <li class="dropdown-item">
                        <a href="http://www.apache.org/events/current-event"
                           target="_blank" rel="noopener noreferrer"
                           class="nav-link external">
                            Apache Events
                        </a>
                    </li>
                    <li class="dropdown-item">
                        <a href="http://www.apache.org/security/" target="_blank"
                           rel="noopener noreferrer" class="nav-link external">
                            Security
                        </a>
                    </li>
                    <li class="dropdown-item">
                        <a href="http://www.apache.org/foundation/sponsorship.html"
                           target="_blank" rel="noopener noreferrer"
                           class="nav-link external">
                            Sponsorship and Donate
                        </a>
                    </li>
                    <li class="dropdown-item">
                        <a href="http://www.apache.org/foundation/thanks.html"
                           target="_blank" rel="noopener noreferrer"
                           class="nav-link external">
                            Thanks
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</div>

    <script src="/js/bootstrap.bundle.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>









<script src="/js/main.min.d00d7a99f9e61382b1db35fac38e0e7bdd97f8d3c663a4c4b8d02c3f1d78d894.js" integrity="sha256-0A16mfnmE4Kx2zX6w44Oe92X&#43;NPGY6TEuNAsPx142JQ=" crossorigin="anonymous"></script>


<script src="/js/highlight.min.js"></script>
<script src="/js/mermaid.min.js"></script>
<script>
    window.onload = () => mermaid.init(undefined, ".language-mermaid");
</script>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('pre code.language-json5').forEach((block) => {
      if (block.classList.contains('language-json5')) {
        try {
          hljs.registerLanguage('json5', function(hljs) {
            return hljs.getLanguage('json');
          });
          hljs.highlightElement(block);
        } catch (error) {
          console.error("Error parsing JSON5:", error);
        }
      }
    });
  });
</script>


<script defer
src="https://widget.kapa.ai/kapa-widget.bundle.js"
data-website-id="8a08392b-9c4d-4816-8bc4-f93e0ecdd2a7"
data-project-name="SkyWalking"
data-project-color="#2B74B8"
data-button-text="Ask AI"
data-search-mode-enabled="true"
data-modal-open-on-command-k="true"
data-modal-disclaimer="The AI supports multiple languages, but it may not be accessible in China, a proxy is required."
data-project-logo="https://miro.medium.com/v2/resize:fit:2400/0*kmS-5BQ8ShAhZ_F4.jpg"
data-modal-example-questions="What is Apache SkyWalking?,How to deploy SkyWalking?,How to inject agents non-intrusively?,How to setup trace sampling?"
data-button-position-top=""
data-button-position-right="20px"
data-button-position-bottom="200px"
data-button-position-left=""
data-consent-required="true"  
data-user-analytics-cookie-enabled="true"  
data-consent-screen-title="Help us improve our AI assistant"  
data-consent-screen-disclaimer="By clicking 'Allow tracking', you consent to anonymous user tracking which helps us improve our service. We don't collect any personally identifiable information."  
data-consent-screen-accept-button-text="Allow tracking"  
data-consent-screen-reject-button-text="No, thanks"
></script>




  </body>
  <script>
    $(function (){
      $('.doc-menu-button').on('click',function (){
        $('.td-sidebar').toggleClass('active')
      })
      $('.version-select').on('change', function (){
        var selectVersion = $(this).val().toLowerCase();
        var prefix = '';
        var url = location.href.replace(/(\/docs\/[a-zA-Z\-]+\/)([\w|\.]+)(\/.*)/, function (match, p1, p2, p3){
          prefix = p1 + selectVersion;
          return p1 + selectVersion + p3
        })
        go2SelectVersion(url, prefix)

      })
      function go2SelectVersion(url, prefix){
        $.ajax({
          url: url,
          type: "get",
          success:function(){
            location.href = url;
          },
          statusCode: {
            404:function(){
              location.href = prefix + '/readme/';
            }
          }
        });
      }
    })
  </script>
</html>
