<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="twitter:site" content="skywalking.apache.org">
<meta name="twitter:image:src" content="https://skywalking.apache.org/images/skywalking_400x400.png">
<meta property="og:image" content="https://skywalking.apache.org/images/skywalking_400x400.png">

<meta http-equiv="Content-Security-Policy" content="frame-src 'self' https://www.google.com https://app.netlify.com;">

<meta name="generator" content="Hugo 0.80.0" />


<script async src="https://www.googletagmanager.com/gtag/js?id=G-GR8N6PGRJ3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);};
  gtag('js', new Date());gtag('config', 'G-GR8N6PGRJ3');
</script>
<META NAME="ROBOTS" CONTENT="INDEX, FOLLOW">
<link rel="stylesheet" href="//at.alicdn.com/t/c/font_3007530_pvozs1rz2wn.css">



<link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png">
<link rel="manifest" href="/favicons/site.webmanifest">
<link rel="mask-icon" href="/favicons/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">

<title>Profiling Module | Apache SkyWalking</title><meta property="og:title" content="Profiling Module" />
<meta property="og:description" content="Profiling Module The profiling module is used to profiling the processes from the Process Discovery Module, and send the snapshot to the backend server.
Configuration    Name Default Environment Key Description     profiling.active true ROVER_PROFILING_ACTIVE Is active the process profiling.   profiling.check_interval 10s ROVER_PROFILING_CHECK_INTERVAL Check the profiling task interval.   profiling.flush_interval 5s ROVER_PROFILING_FLUSH_INTERVAL Combine existing profiling data and report to the backend interval.   profiling." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/docs/skywalking-rover/v0.5.0/en/setup/configuration/profiling/" />

<meta itemprop="name" content="Profiling Module">
<meta itemprop="description" content="Profiling Module The profiling module is used to profiling the processes from the Process Discovery Module, and send the snapshot to the backend server.
Configuration    Name Default Environment Key Description     profiling.active true ROVER_PROFILING_ACTIVE Is active the process profiling.   profiling.check_interval 10s ROVER_PROFILING_CHECK_INTERVAL Check the profiling task interval.   profiling.flush_interval 5s ROVER_PROFILING_FLUSH_INTERVAL Combine existing profiling data and report to the backend interval.   profiling.">

<meta itemprop="wordCount" content="1034">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Profiling Module"/>
<meta name="twitter:description" content="Profiling Module The profiling module is used to profiling the processes from the Process Discovery Module, and send the snapshot to the backend server.
Configuration    Name Default Environment Key Description     profiling.active true ROVER_PROFILING_ACTIVE Is active the process profiling.   profiling.check_interval 10s ROVER_PROFILING_CHECK_INTERVAL Check the profiling task interval.   profiling.flush_interval 5s ROVER_PROFILING_FLUSH_INTERVAL Combine existing profiling data and report to the backend interval.   profiling."/>



<link rel="preload" href="/scss/main.min.592235942cb3c9f3dd697382a4e7a1fad8e1c182dad2841bdce6b43b4a346ae8.css" as="style">
<link href="/scss/main.min.592235942cb3c9f3dd697382a4e7a1fad8e1c182dad2841bdce6b43b4a346ae8.css" rel="stylesheet" integrity="">



<link rel="stylesheet" href="/css/docSearch.css" />


<script src="/js/jquery-3.6.0.min.js"></script>





    <title>Profiling Module | Apache SkyWalking</title>
  </head>
  <body class="td-page  project-doc">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand  flex-column flex-md-row td-navbar">
    <div class="sidebar-button">
      <i class="iconfont icon-menu"></i>
    </div>
    <a class="navbar-brand" href="/">
        <span class="navbar-logo"><img width="130" src="/images/logo.svg" alt="SkyWalking"></span> 
    </a>
    <div class="td-navbar-nav-scroll navbar-nav-wrapper" id="navigation">
        <ul class="navbar-nav mt-lg-0">
             
            
            
            <li class="nav-item mr-3 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="/docs" ><span>Projects and Docs</span></a>
			</li>
            
            
            
            
            <li class="nav-item mr-3 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="/events" ><span>Events</span></a>
			</li>
            
            
            
            
            <li class="nav-item mr-3 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="/blog" ><span>Blogs</span></a>
			</li>
            
            
            
            
            <li class="nav-item mr-3 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="/downloads" ><span>Downloads</span></a>
			</li>
            
            
            
            
            <li class="nav-item mr-3 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="/team" ><span>Team</span></a>
			</li>
            
            
            
            
            <li class="nav-item mr-3 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="/users" ><span>Users</span></a>
			</li>
            
            
            
            
            
            <li class="nav-item mr-3 mb-lg-0">
                <span class="link dropdown blog">
                    <a class="link-name nav-link dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">中文资料</a>
                    <div class="dropdown-menu">
                        <a class="dropdown-item" href="/zh/">博客</a>
                        <a class="dropdown-item" href="https://space.bilibili.com/390683219" target="_blank" rel="noopener noreferrer">
                            B站
                        </a>
                        <a class="dropdown-item" href="https://juejin.cn/user/13673577331607" target="_blank" rel="noopener noreferrer">
                            掘金
                        </a>
                    </div>
                </span>
            </li>

            
			
        </ul>
    </div>
    <div class="navbar-nav d-none d-lg-block search-input-box">
         
            
        
            
        
            
        
            
        
            
        
            
        
            
            <span class="link dropdown">
                <a class="link-name dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Links
                </a>
                <div class="dropdown-menu">
                    
                    <a class="dropdown-item" href="http://www.apache.org/">Apache Software Foundation</a> 
                    <a class="dropdown-item" href="https://github.com/apache/skywalking/issues">GitHub Issue Tracker</a> 
                    <a class="dropdown-item" href="https://github.com/apache/skywalking/discussions">Discussion</a> 
                    <a class="dropdown-item" href="https://lists.apache.org/list.html?dev@skywalking.apache.org">Dev Mailing List</a> 
                    <a class="dropdown-item" href="https://cwiki.apache.org/confluence/display/SKYWALKING/Home">WIKI</a> 
                    <a class="dropdown-item" href="http://www.apache.org/licenses/">License</a> 
                    <a class="dropdown-item" href="http://www.apache.org/events/current-event">Apache Events</a> 
                    <a class="dropdown-item" href="http://www.apache.org/security/">Security</a> 
                    <a class="dropdown-item" href="http://www.apache.org/foundation/sponsorship.html">Sponsor and Donate</a> 
                    <a class="dropdown-item" href="http://www.apache.org/foundation/thanks.html">Thanks</a> 
                    <a class="dropdown-item" href="https://apache.org/foundation/policies/privacy.html">Privacy</a> 
                </div>
            </span>
            
        
        
<div id="docsearch"></div>


    </div>
</nav>

    </header>
    <div class="container-fluid td-outer">

      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <div class="col-12 col-md-3 col-xl-2 d-print-none scroll-bar td-sidebar">

































                  <div class="description-wrapper">
                    <h5>
                    <img width="26" height="26" src="/images/project/skywalking.svg">
                    SkyWalking Rover
                    </h5>
                    <p>Metrics collector and profiler powered by eBPF to diagnose CPU and network performance.</p>
                  </div>
                  
                  <div class="version-wrapper">Version: 
                  <select class="version-select">
                  
                    
                    
                    <option ZgotmplZ value="next">
                    
                      next
                    
                    </option>
                  
                    
                    
                    <option ZgotmplZ value="latest">
                    
                      latest
                    
                    </option>
                  
                    
                    
                    <option selected value="v0.5.0">
                    
                      v0.5.0
                    
                    </option>
                  
                  </select>
                  </div>
                  
                  <ul class="sidebar-menu">
    
    <li>
        
            <a href="/docs/skywalking-rover/v0.5.0/readme">Welcome</a>
        
    </li>
    
    <li>
        
            
            <a href="#">Concepts and Designs<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        

            
            <a href="#">What is SkyWalking Rover?<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/skywalking-rover/v0.5.0/en/concepts-and-designs/overview">Overview and Core Concepts</a>
        
    </li>

    

</ul>

        
    </li>

    

    <li>
        

            
            <a href="#">Design<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/skywalking-rover/v0.5.0/en/concepts-and-designs/module_design">Module Design</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-rover/v0.5.0/en/concepts-and-designs/project_structue">Project Structure</a>
        
    </li>

    

</ul>

        
    </li>

    

</ul>

        
    </li>
    
    <li>
        
            
            <a href="#">Setup<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/skywalking-rover/v0.5.0/en/setup/overview">Overview</a>
        
    </li>

    

    <li>
        

            
            <a href="#">Configuration<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/skywalking-rover/v0.5.0/en/setup/configuration/logger">Logger Module</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-rover/v0.5.0/en/setup/configuration/core">Core Module</a>
        
    </li>

    

    <li>
        

            
            <a href="#">Process Discovery Module<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/skywalking-rover/v0.5.0/en/setup/configuration/process_discovery/overview">Overview</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-rover/v0.5.0/en/setup/configuration/process_discovery/scanner">Linux Process Scanner</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-rover/v0.5.0/en/setup/configuration/process_discovery/kubernetes">Kubernetes Process Detector</a>
        
    </li>

    

</ul>

        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-rover/v0.5.0/en/setup/configuration/profiling">Profiling Module</a>
        
    </li>

    

</ul>

        
    </li>

    

    <li>
        

            
            <a href="#">Examples<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        

            
            <a href="#">Deploy<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/skywalking-rover/v0.5.0/en/setup/examples/deploy/linux/readme">Deploy on Linux</a>
        
    </li>

    

</ul>

        
    </li>

    

    <li>
        

            
            <a href="#">Use Cases<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/skywalking-rover/v0.5.0/en/setup/examples/cases/profiling-process/readme">Profiling a Golang/C/C&#43;&#43;/Rust service on Linux</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-rover/v0.5.0/en/setup/examples/cases/agent-sensor/readme">Detect Process by Agent Sensor</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-rover/v0.5.0/en/setup/examples/cases/kubernetes-process/readme">Detect Process in Kubernetes Environemnt</a>
        
    </li>

    

</ul>

        
    </li>

    

</ul>

        
    </li>

    

</ul>

        
    </li>
    
    <li>
        
            
            <a href="#">Guides<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        

            
            <a href="#">Contribution<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/skywalking-rover/v0.5.0/en/guides/contribution/how-to-write-module">How to Write a Module</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-rover/v0.5.0/en/guides/contribution/how-to-release">How to Release</a>
        
    </li>

    

</ul>

        
    </li>

    

    <li>
        

            
            <a href="#">Compile<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/skywalking-rover/v0.5.0/en/guides/compile/how-to-compile">How to compile SkyWalking Rover</a>
        
    </li>

    

</ul>

        
    </li>

    

</ul>

        
    </li>
    
</ul>
<script src="/js/sidebar-menu.js"></script>
<script>
  (function (){
    $.sidebarMenu($('.sidebar-menu'))
    var path = window.location.pathname;
    var hash = window.location.hash;
    var $a = $('.sidebar-menu a')
    $a.each(function (e){
      if($(this).attr('href')+'/' === path || $(this).attr('href').replace('#','/#') === path+hash){
        $(this).parents('li').addClass('active').show()
      }
    })
    $a.on('click',function (){
      var url = $(this).attr('href')
      if(url!=='#'){
        window.location.href = url
      }
    })
  })()
</script>

                  <div class="commit-id">Commit Id: 9da4478</div>
                










</div>
            <main class="col-12 col-md-9 col-xl-8 pl-md-5 pr-md-4" role="main">
              <i class="iconfont icon-menu-doc doc-menu-button"></i>
              
<div class="td-content">











	<h1 id="profiling-module">Profiling Module</h1>
<p>The profiling module is used to profiling the processes from the <a href="../../process_discovery/overview">Process Discovery Module</a>,
and send the snapshot to the backend server.</p>
<h2 id="configuration">Configuration</h2>
<table>
<thead>
<tr>
<th>Name</th>
<th>Default</th>
<th>Environment Key</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>profiling.active</td>
<td>true</td>
<td>ROVER_PROFILING_ACTIVE</td>
<td>Is active the process profiling.</td>
</tr>
<tr>
<td>profiling.check_interval</td>
<td>10s</td>
<td>ROVER_PROFILING_CHECK_INTERVAL</td>
<td>Check the profiling task interval.</td>
</tr>
<tr>
<td>profiling.flush_interval</td>
<td>5s</td>
<td>ROVER_PROFILING_FLUSH_INTERVAL</td>
<td>Combine existing profiling data and report to the backend interval.</td>
</tr>
<tr>
<td>profiling.task.on_cpu.dump_period</td>
<td>9ms</td>
<td>ROVER_PROFILING_TASK_ON_CPU_DUMP_PERIOD</td>
<td>The profiling stack dump period.</td>
</tr>
<tr>
<td>profiling.task.network.report_interval</td>
<td>2s</td>
<td>ROVER_PROFILING_TASK_NETWORK_TOPOLOGY_REPORT_INTERVAL</td>
<td>The interval of send metrics to the backend.</td>
</tr>
<tr>
<td>profiling.task.network.meter_prefix</td>
<td>rover_net_p</td>
<td>ROVER_PROFILING_TASK_NETWORK_TOPOLOGY_METER_PREFIX</td>
<td>The prefix of network profiling metrics name.</td>
</tr>
<tr>
<td>profiling.task.network.protocol_analyze.per_cpu_buffer</td>
<td>400KB</td>
<td>ROVER_PROFILING_TASK_NETWORK_PROTOCOL_ANALYZE_PER_CPU_BUFFER</td>
<td>The size of socket data buffer on each CPU.</td>
</tr>
<tr>
<td>profiling.task.network.protocol_analyze.parallels</td>
<td>2</td>
<td>ROVER_PROFILING_TASK_NETWORK_PROTOCOL_ANALYZE_PARALLELS</td>
<td>The count of parallel protocol analyzer.</td>
</tr>
<tr>
<td>profiling.task.network.protocol_analyze.queue_size</td>
<td>5000</td>
<td>ROVER_PROFILING_TASK_NETWORK_PROTOCOL_ANALYZE_QUEUE_SIZE</td>
<td>The size of per paralleled analyzer queue.</td>
</tr>
<tr>
<td>profiling.task.network.protocol_analyze.sampling.http.default_request_encoding</td>
<td>UTF-8</td>
<td>ROVER_PROFILING_TASK_NETWORK_PROTOCOL_ANALYZE_SAMPLING_HTTP_DEFAULT_REQUEST_ENCODING</td>
<td>The default body encoding when sampling the request.</td>
</tr>
<tr>
<td>profiling.task.network.protocol_analyze.sampling.http.default_response_encoding</td>
<td>UTF-8</td>
<td>ROVER_PROFILING_TASK_NETWORK_PROTOCOL_ANALYZE_SAMPLING_HTTP_DEFAULT_RESPONSE_ENCODING</td>
<td>The default body encoding when sampling the response.</td>
</tr>
<tr>
<td>profiling.continuous.meter_prefix</td>
<td>rover_con_p</td>
<td>ROVER_PROFILING_CONTINUOUS_METER_PREFIX</td>
<td>The continuous related meters prefix name.</td>
</tr>
<tr>
<td>profiling.continuous.fetch_interval</td>
<td>1s</td>
<td>ROVER_PROFILING_CONTINUOUS_FETCH_INTERVAL</td>
<td>The interval of fetch metrics from the system, such as Process CPU, System Load, etc.</td>
</tr>
<tr>
<td>profiling.continuous.check_interval</td>
<td>5s</td>
<td>ROVER_PROFILING_CONTINUOUS_CHECK_INTERVAL</td>
<td>The interval of check metrics is reach the thresholds.</td>
</tr>
<tr>
<td>profiling.continuous.trigger.execute_duration</td>
<td>10m</td>
<td>ROVER_PROFILING_CONTINUOUS_TRIGGER_EXECUTE_DURATION</td>
<td>The duration of the profiling task.</td>
</tr>
<tr>
<td>profiling.continuous.trigger.silence_duration</td>
<td>20m</td>
<td>ROVER_PROFILING_CONTINUOUS_TRIGGER_SILENCE_DURATION</td>
<td>The minimal duration between the execution of the same profiling task.</td>
</tr>
</tbody>
</table>
<h2 id="profiling-type">Profiling Type</h2>
<p>All the profiling tasks are using the <a href="https://man7.org/linux/man-pages/man2/perf_event_open.2.html">Linux Official Function</a> and <code>kprobe</code> or <code>uprobe</code> to open perf event,
and attach the eBPF Program to dump stacks.</p>
<h3 id="on-cpu">On CPU</h3>
<p>On CPU Profiling task is using <code>PERF_COUNT_SW_CPU_CLOCK</code> to profiling the process with the CPU clock.</p>
<h3 id="off-cpu">Off CPU</h3>
<p>Off CPU Profiling task is attach the <code>finish_task_switch</code> in <code>krobe</code> to profiling the process.</p>
<h3 id="network">Network</h3>
<p>Network Profiling task is intercept IO-related syscall and <code>urprobe</code> in process to identify the network traffic and generate the metrics.
Also, the following protocol are supported for analyzing using OpenSSL library, BoringSSL library, GoTLS, NodeTLS or plaintext:</p>
<ol>
<li>HTTP/1.x</li>
<li>HTTP/2</li>
<li>MySQL</li>
<li>CQL(The Cassandra Query Language)</li>
<li>MongoDB</li>
<li>Kafka</li>
<li>DNS</li>
</ol>
<h4 id="collecting-data">Collecting data</h4>
<p>Network profiling uses metrics, logs send to the backend service.</p>
<h5 id="data-type">Data Type</h5>
<p>The network profiling has customized the following two types of metrics to represent the network data:</p>
<ol>
<li><strong>Counter</strong>: Records the total number of data in a certain period of time. Each counter containers the following data:
<ol>
<li><strong>Count</strong>: The count of the execution.</li>
<li><strong>Bytes</strong>: The package size of the execution.</li>
<li><strong>Exe Time</strong>: The consumed time(nanosecond) of the execution.</li>
</ol>
</li>
<li><strong>Histogram</strong>: Records the distribution of the data in the bucket.</li>
<li><strong>TopN</strong>: Record the highest latency data in a certain period of time.</li>
</ol>
<h5 id="labels">Labels</h5>
<p>Each metric contains the following labels to identify the process relationship:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>client_process_id or server_process_id</td>
<td>string</td>
<td>The ID of the current process, which is determined by the role of the current process in the connection as server or client.</td>
</tr>
<tr>
<td>client_local or server_local</td>
<td>boolean</td>
<td>The remote process is a local process.</td>
</tr>
<tr>
<td>client_address or server_address</td>
<td>string</td>
<td>The remote process address. ex: <code>IP:port</code>.</td>
</tr>
<tr>
<td>side</td>
<td>enum</td>
<td>The current process is either &ldquo;client&rdquo; or &ldquo;server&rdquo; in this connection.</td>
</tr>
<tr>
<td>protocol</td>
<td>string</td>
<td>Identification the protocol based on the package data content.</td>
</tr>
<tr>
<td>is_ssl</td>
<td>bool</td>
<td>Is the current connection using SSL.</td>
</tr>
</tbody>
</table>
<h5 id="layer-4-data">Layer-4 Data</h5>
<p>Based on the above two data types, the following metrics are provided.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Unit</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>write</td>
<td>Counter</td>
<td>nanosecond</td>
<td>The socket write counter</td>
</tr>
<tr>
<td>read</td>
<td>Counter</td>
<td>nanosecond</td>
<td>The socket read counter</td>
</tr>
<tr>
<td>write RTT</td>
<td>Counter</td>
<td>microsecond</td>
<td>The socket write RTT counter</td>
</tr>
<tr>
<td>connect</td>
<td>Counter</td>
<td>nanosecond</td>
<td>The socket connect/accept with other server/client counter</td>
</tr>
<tr>
<td>close</td>
<td>Counter</td>
<td>nanosecond</td>
<td>The socket close counter</td>
</tr>
<tr>
<td>retransmit</td>
<td>Counter</td>
<td>nanosecond</td>
<td>The socket retransmit package counter</td>
</tr>
<tr>
<td>drop</td>
<td>Counter</td>
<td>nanosecond</td>
<td>The socket drop package counter</td>
</tr>
<tr>
<td>write RTT</td>
<td>Histogram</td>
<td>microsecond</td>
<td>The socket write RTT execute time histogram</td>
</tr>
<tr>
<td>write execute time</td>
<td>Histogram</td>
<td>nanosecond</td>
<td>The socket write data execute time histogram</td>
</tr>
<tr>
<td>read execute time</td>
<td>Histogram</td>
<td>nanosecond</td>
<td>The socket read data execute time histogram</td>
</tr>
<tr>
<td>connect execute time</td>
<td>Histogram</td>
<td>nanosecond</td>
<td>The socket connect/accept with other server/client execute time histogram</td>
</tr>
<tr>
<td>close execute time</td>
<td>Histogram</td>
<td>nanosecond</td>
<td>The socket close execute time histogram</td>
</tr>
</tbody>
</table>
<h5 id="http1x-data">HTTP/1.x Data</h5>
<h5 id="metrics">Metrics</h5>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Unit</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>http1_request_cpm</td>
<td>Counter</td>
<td>count</td>
<td>The HTTP request counter</td>
</tr>
<tr>
<td>http1_response_status_cpm</td>
<td>Counter</td>
<td>count</td>
<td>The count of per HTTP response code</td>
</tr>
<tr>
<td>http1_request_package_size</td>
<td>Histogram</td>
<td>Byte size</td>
<td>The request package size</td>
</tr>
<tr>
<td>http1_response_package_size</td>
<td>Histogram</td>
<td>Byte size</td>
<td>The response package size</td>
</tr>
<tr>
<td>http1_client_duration</td>
<td>Histogram</td>
<td>millisecond</td>
<td>The duration of single HTTP response on the client side</td>
</tr>
<tr>
<td>http1_server_duration</td>
<td>Histogram</td>
<td>millisecond</td>
<td>The duration of single HTTP response on the server side</td>
</tr>
</tbody>
</table>
<h5 id="logs">Logs</h5>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Unit</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>slow_traces</td>
<td>TopN</td>
<td>millisecond</td>
<td>The Top N slow trace(id)s</td>
</tr>
<tr>
<td>status_4xx</td>
<td>TopN</td>
<td>millisecond</td>
<td>The Top N trace(id)s with response status in 400-499</td>
</tr>
<tr>
<td>status_5xx</td>
<td>TopN</td>
<td>millisecond</td>
<td>The Top N trace(id)s with response status in 500-599</td>
</tr>
</tbody>
</table>
<h5 id="span-attached-event">Span Attached Event</h5>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>HTTP Request Sampling</td>
<td>Complete information about the HTTP request, it&rsquo;s only reported when it matches slow/4xx/5xx traces.</td>
</tr>
<tr>
<td>HTTP Response Sampling</td>
<td>Complete information about the HTTP response, it&rsquo;s only reported when it matches slow/4xx/5xx traces.</td>
</tr>
<tr>
<td>Syscall xxx</td>
<td>The methods to use when the process invoke with the network-related syscall method. It&rsquo;s only reported when it matches slow/4xx/5xx traces.</td>
</tr>
</tbody>
</table>
<h2 id="continuous-profiling">Continuous Profiling</h2>
<p>The continuous profiling feature monitors low-power target process information, including process CPU usage and network requests, based on configuration passed from the backend.
When a threshold is met, it automatically initiates a profiling task(on/off CPU, Network) to provide more detailed analysis.</p>
<h3 id="monitor-type">Monitor Type</h3>
<h4 id="system-load">System Load</h4>
<p>Monitor the average system load for the last minute, which is equivalent to using the first value of the <code>load average</code> in the <code>uptime</code> command.</p>
<h4 id="process-cpu">Process CPU</h4>
<p>The target process utilizes a certain percentage of the CPU on the current host.</p>
<h4 id="process-thread-count">Process Thread Count</h4>
<p>The real-time number of threads in the target process.</p>
<h4 id="network-1">Network</h4>
<p>Network monitoring uses eBPF technology to collect real-time performance data of the current process responding to requests. Requests sent upstream are not monitored by the system.</p>
<p>Currently, network monitoring supports parsing of the HTTP/1.x protocol and supports the following types of monitoring:</p>
<ol>
<li><code>Error Rate</code>: The percentage of network request errors, such as HTTP status codes within the range of <code>[500-600)</code>, is considered as erroneous.</li>
<li><code>Avg Response Time</code>: Average response time(ms) for specified URI.</li>
</ol>
<h3 id="metrics-1">Metrics</h3>
<p>Rover would periodically send collected monitoring data to the backend using the <code>Native Meter Protocol</code>.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Unit</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>process_cpu</td>
<td>(0-100)%</td>
<td>The CPU usage percent</td>
</tr>
<tr>
<td>process_thread_count</td>
<td>count</td>
<td>The thread count of process</td>
</tr>
<tr>
<td>system_load</td>
<td>count</td>
<td>The average system load for the last minute, each process have same value</td>
</tr>
<tr>
<td>http_error_rate</td>
<td>(0-100)%</td>
<td>The network request error rate percentage</td>
</tr>
<tr>
<td>http_avg_response_time</td>
<td>ms</td>
<td>The network average response duration</td>
</tr>
</tbody>
</table>




</div>


            </main>
          <div id="toc" class="d-none d-xl-block col-xl-2 td-toc d-print-none">
            




<div class="td-page-meta ml-2 pb-1 pt-2 mb-0">











</div>






<nav id="TableOfContents">
  <ul>
    <li><a href="#profiling-module">Profiling Module</a>
      <ul>
        <li><a href="#configuration">Configuration</a></li>
        <li><a href="#profiling-type">Profiling Type</a>
          <ul>
            <li><a href="#on-cpu">On CPU</a></li>
            <li><a href="#off-cpu">Off CPU</a></li>
            <li><a href="#network">Network</a></li>
          </ul>
        </li>
        <li><a href="#continuous-profiling">Continuous Profiling</a>
          <ul>
            <li><a href="#monitor-type">Monitor Type</a></li>
            <li><a href="#metrics-1">Metrics</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>




<script>
  $(function () {
    var $toc = $("#TableOfContents");
    if (!$toc || !$toc.length) {
      return;
    }
    var top = $toc.offset().top;
    $(window).on("scroll", debounce(setTop, 100))
    $(window).on("scroll", debounce(addActive, 30))

    function addActive() {
      var scrollValue = $(window).scrollTop();
      var topEle = null;
      $.each($('main h1, main h2, main h3'), function (index, item) {
        if ($(item).offset().top - 70 > scrollValue) {
          return
        }
        if (!topEle) {
          topEle = item
        } else if ($(item).offset().top >= $(topEle).offset().top) {
          topEle = item
        }
        if (topEle) {
          var id = $(item).attr('id');
          $toc.find('a').removeClass("active").end().find('a[href="' + '#' + id + '"]').addClass("active")
        }
      })
    }

    function setTop() {
      var scrollValue = $(window).scrollTop();
      if (scrollValue >= top - 70) {
        $toc.addClass('fixed')
      } else {
        $toc.removeClass('fixed')
      }
    }

    function debounce(fn, wait) {
      var timeout = null;
      return function () {
        clearTimeout(timeout);
        timeout = setTimeout(() => {
          fn.apply(this, arguments);
        }, wait);
      };
    }
  })

</script>

          </div>

        </div>
      </div>

      
<footer class="py-5 sky-row">
  <div class="container-fluid text-center">
    <div class="">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Twitter" aria-label="Twitter">
    <a class="text-color" target="_blank" href="https://twitter.com/asfskywalking">
      <i class="iconfont icon-twitter"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Slack" aria-label="Slack">
    <a class="text-color" target="_blank" href="http://s.apache.org/slack-invite">
      <i class="iconfont icon-slack"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Mailing list" aria-label="Mailing list">
    <a class="text-color" target="_blank" href="https://lists.apache.org/list.html?dev@skywalking.apache.org">
      <i class="iconfont icon-email"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-color" target="_blank" href="https://github.com/apache/skywalking">
      <i class="iconfont icon-github"></i>
    </a>
  </li>
  
</ul>

        
        
    </div>
    <div class="">

        <small class="text-color">&copy; 2017 - 2024 The Apache Software Foundation All Rights Reserved</small>
        
	
    </div>
    <div class="">
      <small class="text-color mt-4">Apache SkyWalking, SkyWalking, Apache, the Apache feather logo, and the Apache SkyWalking project logo are either registered trademarks or trademarks of the Apache Software Foundation.</small>
    </div>
  </div>
</footer>


    </div>
    





























































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































    
<div id="popup">
    <div class="mask">
        <img src=""/>
    </div>
</div>

    <div class="sidebar-mask"></div>
<div class="sidebar">
    <nav class="nav-links">
        <div class="nav-item"><a href="/docs/" class="nav-link">Projects and Documentation</a></div>
        <div class="nav-item"><a href="/events/" class="nav-link">Events</a></div>
        <div class="nav-item"><a href="/blog/" class="nav-link router-link-exact-active router-link-active">Blog</a>
        </div>
        <div class="nav-item"><a href="/downloads/" class="nav-link">Downloads</a></div>
        <div class="nav-item"><a href="/team/" class="nav-link">Team</a></div>
        <div class="nav-item"><a href="/users/" class="nav-link">Users</a></div>
        <div class="nav-item">
            <div class="dropdown-wrapper open">
                <a class="dropdown-title"><span>中文资料</span>
                    <span class="arrow down"></span>
                </a>
                <ul class="nav-dropdown">
                    <li class="dropdown-item">
                        <a href="/zh/" class="nav-link external">博客</a>
                    </li>
                    <li class="dropdown-item">
                        <a href="https://space.bilibili.com/390683219" target="_blank"
                           rel="noopener noreferrer" class="nav-link external">B站</a>
                    </li>
                    <li class="dropdown-item">
                        <a href="https://juejin.cn/user/13673577331607" target="_blank"
                           rel="noopener noreferrer" class="nav-link external">掘金</a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="nav-item">
            <div class="dropdown-wrapper open">
                <a class="dropdown-title">
                    <span>Links</span>
                    <span class="arrow down"></span>
                </a>
                <ul class="nav-dropdown">
                    <li class="dropdown-item">
                        <a href="http://www.apache.org/" target="_blank"
                           rel="noopener noreferrer" class="nav-link external">
                            Apache Software Foundation
                        </a>
                    </li>
                    <li class="dropdown-item">
                        <a href="https://github.com/apache/skywalking/issues"
                           target="_blank" rel="noopener noreferrer"
                           class="nav-link external">
                            GitHub Issue Tracker
                        </a>
                    </li>
                    <li class="dropdown-item">
                        <a href="https://lists.apache.org/list.html?dev@skywalking.apache.org" target="_blank"
                           rel="noopener noreferrer" class="nav-link external">
                            Dev Mailing List
                        </a>
                    </li>
                    <li class="dropdown-item">
                        <a href="http://www.apache.org/licenses/" target="_blank"
                           rel="noopener noreferrer" class="nav-link external">
                            License
                        </a>
                    </li>
                    <li class="dropdown-item">
                        <a href="http://www.apache.org/events/current-event"
                           target="_blank" rel="noopener noreferrer"
                           class="nav-link external">
                            Apache Events
                        </a>
                    </li>
                    <li class="dropdown-item">
                        <a href="http://www.apache.org/security/" target="_blank"
                           rel="noopener noreferrer" class="nav-link external">
                            Security
                        </a>
                    </li>
                    <li class="dropdown-item">
                        <a href="http://www.apache.org/foundation/sponsorship.html"
                           target="_blank" rel="noopener noreferrer"
                           class="nav-link external">
                            Sponsorship and Donate
                        </a>
                    </li>
                    <li class="dropdown-item">
                        <a href="http://www.apache.org/foundation/thanks.html"
                           target="_blank" rel="noopener noreferrer"
                           class="nav-link external">
                            Thanks
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</div>

    <script src="/js/bootstrap.bundle.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>









<script src="/js/main.min.dc00f5ca911ee5aa105ea6de6b3b7e8d8169ba5a3bf156b1fcfe23dfe3e62b0a.js" integrity="sha256-3AD1ypEe5aoQXqbeazt&#43;jYFpulo78Vax/P4j3&#43;PmKwo=" crossorigin="anonymous"></script>


<script src="/js/mermaid.min.js"></script>
<script>
    window.onload = () => mermaid.init(undefined, ".language-mermaid");
</script>


<script defer
src="https://widget.kapa.ai/kapa-widget.bundle.js"
data-website-id="8a08392b-9c4d-4816-8bc4-f93e0ecdd2a7"
data-project-name="SkyWalking"
data-project-color="#2B74B8"
data-button-text="Ask AI"
data-search-mode-enabled="true"
data-modal-open-on-command-k="true"
data-modal-disclaimer="The AI supports multiple languages, but it may not be accessible in China, a proxy is required."
data-project-logo="https://miro.medium.com/v2/resize:fit:2400/0*kmS-5BQ8ShAhZ_F4.jpg"
data-modal-example-questions="What is Apache SkyWalking?,How to deploy SkyWalking?,How to inject agents non-intrusively?,How to setup trace sampling?"
data-button-position-top=""
data-button-position-right="20px"
data-button-position-bottom="200px"
data-button-position-left=""
></script>




  </body>
  <script>
    $(function (){
      $('.doc-menu-button').on('click',function (){
        $('.td-sidebar').toggleClass('active')
      })
      $('.version-select').on('change', function (){
        var selectVersion = $(this).val().toLowerCase();
        var prefix = '';
        var url = location.href.replace(/(\/docs\/[a-zA-Z\-]+\/)([\w|\.]+)(\/.*)/, function (match, p1, p2, p3){
          prefix = p1 + selectVersion;
          return p1 + selectVersion + p3
        })
        go2SelectVersion(url, prefix)

      })
      function go2SelectVersion(url, prefix){
        $.ajax({
          url: url,
          type: "get",
          success:function(){
            location.href = url;
          },
          statusCode: {
            404:function(){
              location.href = prefix + '/readme/';
            }
          }
        });
      }
    })
  </script>
</html>
