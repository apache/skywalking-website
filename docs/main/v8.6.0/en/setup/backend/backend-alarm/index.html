<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="twitter:site" content="skywalking.apache.org">
<meta name="twitter:image:src" content="https://skywalking.apache.org/images/skywalking_400x400.png">
<meta property="og:image" content="https://skywalking.apache.org/images/skywalking_400x400.png">
<meta name="generator" content="Hugo 0.80.0" />
<META NAME="ROBOTS" CONTENT="INDEX, FOLLOW">



<link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png">
<link rel="manifest" href="/favicons/site.webmanifest">
<link rel="mask-icon" href="/favicons/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">

<title>Alarm | Apache SkyWalking</title><meta property="og:title" content="Alarm" />
<meta property="og:description" content="Alarm Alarm core is driven by a collection of rules, which are defined in config/alarm-settings.yml. There are three parts in alarm rule definition.
 Alarm rules. They define how metrics alarm should be triggered and what conditions should be considered. Webhooks. The list of web service endpoints, which should be called after the alarm is triggered. gRPCHook. The host and port of the remote gRPC method, which should be called after the alarm is triggered." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/docs/main/v8.6.0/en/setup/backend/backend-alarm/" />
<meta property="article:published_time" content="2021-06-10T08:43:54+00:00" />
<meta property="article:modified_time" content="2021-06-10T08:43:54+00:00" />
<meta itemprop="name" content="Alarm">
<meta itemprop="description" content="Alarm Alarm core is driven by a collection of rules, which are defined in config/alarm-settings.yml. There are three parts in alarm rule definition.
 Alarm rules. They define how metrics alarm should be triggered and what conditions should be considered. Webhooks. The list of web service endpoints, which should be called after the alarm is triggered. gRPCHook. The host and port of the remote gRPC method, which should be called after the alarm is triggered.">
<meta itemprop="datePublished" content="2021-06-10T08:43:54+00:00" />
<meta itemprop="dateModified" content="2021-06-10T08:43:54+00:00" />
<meta itemprop="wordCount" content="2034">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Alarm"/>
<meta name="twitter:description" content="Alarm Alarm core is driven by a collection of rules, which are defined in config/alarm-settings.yml. There are three parts in alarm rule definition.
 Alarm rules. They define how metrics alarm should be triggered and what conditions should be considered. Webhooks. The list of web service endpoints, which should be called after the alarm is triggered. gRPCHook. The host and port of the remote gRPC method, which should be called after the alarm is triggered."/>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-178891182-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<link rel="preload" href="/webfonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="/webfonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin="anonymous">



<link rel="preload" href="/scss/main.min.66a960a64ec7676a6fd5cefba49c8aa2b142485874a87acb87369c5698face6b.css" as="style">
<link href="/scss/main.min.66a960a64ec7676a6fd5cefba49c8aa2b142485874a87acb87369c5698face6b.css" rel="stylesheet" integrity="">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />

<script src="/js/jquery-3.6.0.min.js"></script>





    <title>Alarm | Apache SkyWalking</title>
  </head>
  <body class="td-page  project-doc">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
    <div class="sidebar-button"><svg width="40" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div>
    <a class="navbar-brand" href="/">
        <span class="navbar-logo"><img width="126" height="30" src="/images/logo.png" alt="SkyWalking"></span> 
    </a>
    <div class="td-navbar-nav-scroll ml-md-auto" id="navigation">
        <ul class="navbar-nav mt-lg-0">
              
            
            <li class="nav-item mr-3 mb-2 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="/docs" ><span>Projects and Documentations</span></a>
			</li>
              
            
            <li class="nav-item mr-3 mb-2 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="/events" ><span>Events</span></a>
			</li>
              
            
            <li class="nav-item mr-3 mb-2 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="/blog" ><span>Blogs</span></a>
			</li>
              
            
            <li class="nav-item mr-3 mb-2 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="/downloads" ><span>Downloads</span></a>
			</li>
              
            
            <li class="nav-item mr-3 mb-2 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="/team" ><span>Team</span></a>
			</li>
              
            
            <li class="nav-item mr-3 mb-2 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="/zh" ><span>中文博客</span></a>
			</li>
              
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Links
              </a>
                <div class="dropdown-menu">
                    
                    <a class="dropdown-item" href="http://www.apache.org/">Apache Software Foundation</a> 
                    <a class="dropdown-item" href="https://github.com/apache/skywalking/issues">GitHub Issue Tracker</a> 
                    <a class="dropdown-item" href="https://lists.apache.org/list.html?dev@skywalking.apache.org">Dev Mailing List</a> 
                    <a class="dropdown-item" href="https://cwiki.apache.org/confluence/display/SKYWALKING/Home">WIKI</a> 
                    <a class="dropdown-item" href="http://www.apache.org/licenses/">License</a> 
                    <a class="dropdown-item" href="http://www.apache.org/events/current-event">Apache Events</a> 
                    <a class="dropdown-item" href="http://www.apache.org/security/">Security</a> 
                    <a class="dropdown-item" href="http://www.apache.org/foundation/sponsorship.html">Sponsor and Donate</a> 
                    <a class="dropdown-item" href="http://www.apache.org/foundation/thanks.html">Thanks</a> 
                </div>
            </li>
             
            
			
        </ul>
    </div>
    <div class="navbar-nav d-none d-lg-block search-input-box">
<input id="algolia-search-input" type="search" class="form-control td-search-input" placeholder="&#xf002 Search this site…" aria-label="Search this site…" autocomplete="off">
</div>
</nav>

    </header>
    <div class="container-fluid td-outer">

      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <div class="col-12 col-md-3 col-xl-2 d-print-none td-sidebar">


                    
                    <h5>Documentation: 
                    <select class="version-select">
                    
                    
                    <option ZgotmplZ value="latest">latest</option>
                    
                    
                    <option selected value="v8.6.0">v8.6.0</option>
                    
                    
                    <option ZgotmplZ value="v8.5.0">v8.5.0</option>
                    
                    
                    <option ZgotmplZ value="v8.4.0">v8.4.0</option>
                    
                    
                    <option ZgotmplZ value="v8.3.0">v8.3.0</option>
                    
                    
                    <option ZgotmplZ value="v8.2.0">v8.2.0</option>
                    
                    </select>
                    </h5>
                    
                    
<ul class="sidebar-menu">
    

    <li>
        
            <a href="/docs/main/v8.6.0/readme">Welcome</a>
        
    </li>

    

    <li>
        

            
            <a href="#">Concepts and Designs<i class="fa fa-angle-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu" >
    

    <li>
        

            
            <a href="#">What is SkyWalking?<i class="fa fa-angle-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu" >
    

    <li>
        
            <a href="/docs/main/v8.6.0/en/concepts-and-designs/overview">Overview and Core concepts</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/concepts-and-designs/project-goals">Project Goals</a>
        
    </li>

    

</ul>

        
    </li>

    

    <li>
        

            
            <a href="#">Probe<i class="fa fa-angle-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu" >
    

    <li>
        
            <a href="/docs/main/v8.6.0/en/concepts-and-designs/probe-introduction">Introduction</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/concepts-and-designs/service-agent">Service auto instrument agent</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/concepts-and-designs/manual-sdk">Manual instrument SDK</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/concepts-and-designs/service-mesh-probe">Service Mesh probe</a>
        
    </li>

    

</ul>

        
    </li>

    

    <li>
        

            
            <a href="#">Backend<i class="fa fa-angle-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu" >
    

    <li>
        
            <a href="/docs/main/v8.6.0/en/concepts-and-designs/backend-overview">Overview</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/concepts-and-designs/oal">Observability Analysis Language</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/concepts-and-designs/mal">Meter Analysis Language</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/concepts-and-designs/lal">Log Analysis Language</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/protocols/readme#query-protocol">Query in OAP</a>
        
    </li>

    

</ul>

        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/concepts-and-designs/ui-overview">UI</a>
        
    </li>

    

    <li>
        
            <a href="https://github.com/apache/skywalking-cli">CLI</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/concepts-and-designs/event/">Event</a>
        
    </li>

    

</ul>

        
    </li>

    

    <li>
        

            
            <a href="#">Setup<i class="fa fa-angle-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu" >
    

    <li>
        

            
            <a href="#">Java agent<i class="fa fa-angle-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu" >
    

    <li>
        
            <a href="/docs/main/v8.6.0/en/setup/service-agent/java-agent/readme">Setup</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/setup/service-agent/java-agent/containerization#docker">Setup in Docker</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/setup/service-agent/java-agent/containerization#kubernetes">Setup in Kubernetes</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/setup/service-agent/java-agent/supported-list">Supported middleware, framework and library</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/setup/service-agent/java-agent/readme#table-of-agent-configuration-properties">Agent Configuration Properties</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/setup/service-agent/java-agent/readme#dynamic-configurations">Dynamic Configurations</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/setup/service-agent/java-agent/readme#optional-plugins">Optional Plugins</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/setup/service-agent/java-agent/readme#bootstrap-class-plugins">Bootstrap/JVM class plugin</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/setup/service-agent/java-agent/readme/#the-logic-endpoint">Logic Endpoint</a>
        
    </li>

    

    <li>
        

            
            <a href="#">Advanced Features<i class="fa fa-angle-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu" >
    

    <li>
        
            <a href="/docs/main/v8.6.0/en/setup/service-agent/java-agent/readme/#advanced-features">Guidance</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/setup/service-agent/java-agent/setting-override">Setting Override</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/setup/service-agent/java-agent/tls">Transport Layer Security (TLS)</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/setup/service-agent/java-agent/namespace">Namespace Isolation</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/setup/service-agent/java-agent/token-auth">Token Authentication</a>
        
    </li>

    

    <li>
        

            
            <a href="#">Manual APIs<i class="fa fa-angle-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu" >
    

    <li>
        
            <a href="/docs/main/v8.6.0/en/setup/service-agent/java-agent/application-toolkit-trace">Tracing APIs</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/setup/service-agent/java-agent/opentracing">OpenTracing Tracer</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/setup/service-agent/java-agent/application-toolkit-meter">Meter APIs</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/setup/service-agent/java-agent/application-toolkit-trace-cross-thread">Across Thread Solution</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/setup/service-agent/java-agent/application-toolkit-micrometer">MicroMeter Registry</a>
        
    </li>

    

</ul>

        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/setup/service-agent/java-agent/how-to-tolerate-exceptions">Tolerate Custom Exceptions</a>
        
    </li>

    

    <li>
        

            
            <a href="#">Log &amp; Trace Correlation<i class="fa fa-angle-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu" >
    

    <li>
        
            <a href="/docs/main/v8.6.0/en/setup/service-agent/java-agent/application-toolkit-log4j-1.x">Log4j</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/setup/service-agent/java-agent/application-toolkit-log4j-2.x">Log4j2</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/setup/service-agent/java-agent/application-toolkit-logback-1.x/">Logback</a>
        
    </li>

    

</ul>

        
    </li>

    

</ul>

        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/setup/service-agent/java-agent/readme#advanced-reporters">Advanced reporters</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/guides/java-plugin-development-guide/">Plugin development guide</a>
        
    </li>

    

    <li>
        
            <a href="https://skyapmtest.github.io/Agent-Benchmarks/">Java Agent Performance Test</a>
        
    </li>

    

</ul>

        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/setup/service-agent/server-agents">All available server agents</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/setup/service-agent/browser-agent">Browser agent</a>
        
    </li>

    

    <li>
        

            
            <a href="#">Service Mesh<i class="fa fa-angle-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu" >
    

    <li>
        
            <a href="/docs/main/v8.6.0/en/setup/istio/readme">Observe Istio Control Plane</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/setup/envoy/als_setting">Observe Service Mesh</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/setup/envoy/metrics_service_setting">Send Envoy metrics to SkyWalking with / without Istio</a>
        
    </li>

    

</ul>

        
    </li>

    

    <li>
        

            
            <a href="#">Backend<i class="fa fa-angle-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu" >
    

    <li>
        
            <a href="/docs/main/v8.6.0/en/setup/backend/backend-setup">Setup</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/setup/backend/configuration-vocabulary">Configuration Vocabulary</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/setup/backend/backend-setting-override">Overriding settings</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/setup/backend/backend-ip-port">IP and port setting</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/setup/backend/backend-init-mode">Backend init mode startup</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/setup/backend/backend-cluster">Cluster management</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/setup/backend/backend-k8s">Deploy in kubernetes</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/setup/backend/backend-storage">Choose storage</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/setup/backend/backend-receivers">Set receivers</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/setup/backend/backend-fetcher">Open fetchers</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/setup/backend/trace-sampling">Trace sampling</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/setup/backend/slow-db-statement">Slow DB statement threshold</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/guides/backend-oal-scripts">OAL scripts</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/setup/backend/backend-alarm">Alarm</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/setup/backend/advanced-deployment">Advanced deployment options</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/setup/backend/metrics-exporter">Metrics exporter</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/setup/backend/ttl">Time To Live (TTL)</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/setup/backend/dynamic-config">Dynamic Configuration</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/setup/backend/uninstrumented-gateways">Uninstrumented Gateways</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/setup/backend/apdex-threshold">Apdex Threshold</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/setup/backend/service-auto-grouping">Service Grouping</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/setup/backend/endpoint-grouping-rules">Group Parameterized Endpoints</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/setup/backend/backend-receivers#opentelemetry-receiver">OpenTelemetry Metrics Analysis</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/setup/backend/backend-meter">Meter Analysis</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/setup/backend/spring-sleuth-setup">Spring Sleuth Metrics Analysis</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/setup/backend/log-analyzer">Log Collecting And Analysis</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/setup/backend/backend-infrastructure-monitoring">Infrastructure Monitoring</a>
        
    </li>

    

</ul>

        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/setup/backend/ui-setup">UI Setup</a>
        
    </li>

    

    <li>
        
            <a href="https://github.com/apache/skywalking-cli">CLI Setup</a>
        
    </li>

    

</ul>

        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/ui/readme">UI Introduction</a>
        
    </li>

    

    <li>
        

            
            <a href="#">Contributing Guides<i class="fa fa-angle-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu" >
    

    <li>
        
            <a href="/docs/main/v8.6.0/en/guides/readme">Contribute</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/guides/asf/committer">Become a committer</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/guides/how-to-build">Compiling Guide</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/guides/java-plugin-development-guide">Agent plugin development guide</a>
        
    </li>

    

</ul>

        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/protocols/readme">Protocols</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v8.6.0/en/faq/readme">FAQs</a>
        
    </li>

    

    <li>
        
            <a href="https://github.com/apache/skywalking/tree/master/changes">Changelog</a>
        
    </li>

    

</ul>
<script src="/js/sidebar-menu.js"></script>
<script>
  (function (){
    $.sidebarMenu($('.sidebar-menu'))
    var path = window.location.pathname;
    var hash = window.location.hash;
    var $a = $('.sidebar-menu a')
    $a.each(function (e){
      if($(this).attr('href')+'/' === path || $(this).attr('href').replace('#','/#') === path+hash){
        $(this).parents('li').addClass('active').show()
      }
    })
    $a.on('click',function (){
      var url = $(this).attr('href')
      if(url!=='#'){
        window.location.href = url
      }
    })
  })()
</script>
                    <div class="commit-id">Commit Id: 3854eed</div>
                  







</div>
            <main class="col-12 col-md-9 col-xl-8 pl-md-5 pr-md-4" role="main">
                <i class="fa fa-bars doc-menu-button"></i>
                
<div class="td-content">











	<h1 id="alarm">Alarm</h1>
<p>Alarm core is driven by a collection of rules, which are defined in <code>config/alarm-settings.yml</code>.
There are three parts in alarm rule definition.</p>
<ol>
<li><a href="#rules">Alarm rules</a>. They define how metrics alarm should be triggered and what conditions should be considered.</li>
<li><a href="#webhook">Webhooks</a>. The list of web service endpoints, which should be called after the alarm is triggered.</li>
<li><a href="#grpchook">gRPCHook</a>. The host and port of the remote gRPC method, which should be called after the alarm is triggered.</li>
</ol>
<h2 id="entity-name">Entity name</h2>
<p>Defines the relation between scope and entity name.</p>
<ul>
<li><strong>Service</strong>: Service name</li>
<li><strong>Instance</strong>: {Instance name} of {Service name}</li>
<li><strong>Endpoint</strong>: {Endpoint name} in {Service name}</li>
<li><strong>Database</strong>: Database service name</li>
<li><strong>Service Relation</strong>: {Source service name} to {Dest service name}</li>
<li><strong>Instance Relation</strong>: {Source instance name} of {Source service name} to {Dest instance name} of {Dest service name}</li>
<li><strong>Endpoint Relation</strong>: {Source endpoint name} in {Source Service name} to {Dest endpoint name} in {Dest service name}</li>
</ul>
<h2 id="rules">Rules</h2>
<p><strong>There are two types of rules: individual rules and composite rules. A composite rule is a combination of individual rules.</strong></p>
<h3 id="individual-rules">Individual rules</h3>
<p>An alarm rule is made up of the following elements:</p>
<ul>
<li><strong>Rule name</strong>. A unique name shown in the alarm message. It must end with <code>_rule</code>.</li>
<li><strong>Metrics name</strong>. This is also the metrics name in the OAL script. Only long, double, int types are supported. See the
<a href="#list-of-all-potential-metrics-name">list of all potential metrics name</a>. Events can be also configured as the source
of alarm, please refer to <a href="../../../concepts-and-designs/event">the event doc</a> for more details.</li>
<li><strong>Include names</strong>. Entity names which are included in this rule. Please follow the <a href="#entity-name">entity name definitions</a>.</li>
<li><strong>Exclude names</strong>. Entity names which are excluded from this rule. Please follow the <a href="#entity-name">entity name definitions</a>.</li>
<li><strong>Include names regex</strong>. A regex that includes entity names. If both include-name list and include-name regex are set, both rules will take effect.</li>
<li><strong>Exclude names regex</strong>. A regex that excludes entity names. If both exclude-name list and exclude-name regex are set, both rules will take effect.</li>
<li><strong>Include labels</strong>. Metric labels which are included in this rule.</li>
<li><strong>Exclude labels</strong>. Metric labels which are excluded from this rule.</li>
<li><strong>Include labels regex</strong>. A regex that includes labels. If both include-label list and include-label regex are set, both rules will take effect.</li>
<li><strong>Exclude labels regex</strong>. A regex that exclude labels. If both the exclude-label list and exclude-label regex are set, both rules will take effect.</li>
<li><strong>Tags</strong>. Tags are key/value pairs that are attached to alarms. Tags are used to specify distinguishing attributes of alarms that are meaningful and relevant to users. If you would like to make these tags searchable on the SkyWalking UI, you may set the tag keys in <code>core/default/searchableAlarmTags</code>, or through system environment variable <code>SW_SEARCHABLE_ALARM_TAG_KEYS</code>. The key <code>level</code> is supported by default.</li>
</ul>
<p><em>Label settings are required by the meter-system. They are used to store metrics from the label-system platform, such as Prometheus, Micrometer, etc.
The four label settings mentioned above must implement <code>LabeledValueHolder</code>.</em></p>
<ul>
<li><strong>Threshold</strong>. The target value.
For multiple-value metrics, such as <strong>percentile</strong>, the threshold is an array. It is described as:  <code>value1, value2, value3, value4, value5</code>.
Each value may serve as the threshold for each value of the metrics. Set the value to <code>-</code> if you do not wish to trigger the alarm by one or more of the values.<br>
For example in <strong>percentile</strong>, <code>value1</code> is the threshold of P50, and <code>-, -, value3, value4, value5</code> means that there is no threshold for P50 and P75 in the percentile alarm rule.</li>
<li><strong>OP</strong>. The operator. It supports <code>&gt;</code>, <code>&gt;=</code>, <code>&lt;</code>, <code>&lt;=</code>, <code>=</code>. We welcome contributions of all OPs.</li>
<li><strong>Period</strong>. The frequency for checking the alarm rule. This is a time window that corresponds to the backend deployment env time.</li>
<li><strong>Count</strong>. Within a period window, if the number of times which <strong>value</strong> goes over the threshold (based on OP) reaches <code>count</code>, then an alarm will be sent.</li>
<li><strong>Only as condition</strong>. Indicates if the rule can send notifications, or if it simply serves as an condition of the composite rule.</li>
<li><strong>Silence period</strong>. After the alarm is triggered in Time-N, there will be silence during the <strong>TN -&gt; TN + period</strong>.
By default, it works in the same manner as <strong>period</strong>. The same alarm (having the same ID in the same metrics name) may only be triggered once within a period.</li>
</ul>
<h3 id="composite-rules">Composite rules</h3>
<p><strong>NOTE</strong>: Composite rules are only applicable to alarm rules targeting the same entity level, such as service-level alarm rules (<code>service_percent_rule &amp;&amp; service_resp_time_percentile_rule</code>). Do not compose alarm rules of different entity levels, such as an alarm rule of the service metrics with another rule of the endpoint metrics.</p>
<p>A composite rule is made up of the following elements:</p>
<ul>
<li><strong>Rule name</strong>. A unique name shown in the alarm message. Must end with <code>_rule</code>.</li>
<li><strong>Expression</strong>. Specifies how to compose rules, and supports <code>&amp;&amp;</code>, <code>||</code>, and <code>()</code>.</li>
<li><strong>Message</strong>. The notification message to be sent out when the rule is triggered.</li>
<li><strong>Tags</strong>. Tags are key/value pairs that are attached to alarms. Tags are used to specify distinguishing attributes of alarms that are meaningful and relevant to users.</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">rules</span>:
  <span style="color:#75715e"># Rule unique name, must be ended with `_rule`.</span>
  <span style="color:#f92672">endpoint_percent_rule</span>:
    <span style="color:#75715e"># Metrics value need to be long, double or int</span>
    <span style="color:#f92672">metrics-name</span>: <span style="color:#ae81ff">endpoint_percent</span>
    <span style="color:#f92672">threshold</span>: <span style="color:#ae81ff">75</span>
    <span style="color:#f92672">op</span>: <span style="color:#ae81ff">&lt;</span>
    <span style="color:#75715e"># The length of time to evaluate the metrics</span>
    <span style="color:#f92672">period</span>: <span style="color:#ae81ff">10</span>
    <span style="color:#75715e"># How many times after the metrics match the condition, will trigger alarm</span>
    <span style="color:#f92672">count</span>: <span style="color:#ae81ff">3</span>
    <span style="color:#75715e"># How many times of checks, the alarm keeps silence after alarm triggered, default as same as period.</span>
    <span style="color:#f92672">silence-period</span>: <span style="color:#ae81ff">10</span>
    <span style="color:#75715e"># Specify if the rule can send notification or just as an condition of composite rule</span>
    <span style="color:#f92672">only-as-condition</span>: <span style="color:#66d9ef">false</span>
    <span style="color:#f92672">tags</span>:
      <span style="color:#f92672">level</span>: <span style="color:#ae81ff">WARNING</span>
  <span style="color:#f92672">service_percent_rule</span>:
    <span style="color:#f92672">metrics-name</span>: <span style="color:#ae81ff">service_percent</span>
    <span style="color:#75715e"># [Optional] Default, match all services in this metrics</span>
    <span style="color:#f92672">include-names</span>:
      - <span style="color:#ae81ff">service_a</span>
      - <span style="color:#ae81ff">service_b</span>
    <span style="color:#f92672">exclude-names</span>:
      - <span style="color:#ae81ff">service_c</span>
    <span style="color:#75715e"># Single value metrics threshold.</span>
    <span style="color:#f92672">threshold</span>: <span style="color:#ae81ff">85</span>
    <span style="color:#f92672">op</span>: <span style="color:#ae81ff">&lt;</span>
    <span style="color:#f92672">period</span>: <span style="color:#ae81ff">10</span>
    <span style="color:#f92672">count</span>: <span style="color:#ae81ff">4</span>
    <span style="color:#f92672">only-as-condition</span>: <span style="color:#66d9ef">false</span>
  <span style="color:#f92672">service_resp_time_percentile_rule</span>:
    <span style="color:#75715e"># Metrics value need to be long, double or int</span>
    <span style="color:#f92672">metrics-name</span>: <span style="color:#ae81ff">service_percentile</span>
    <span style="color:#f92672">op</span>: <span style="color:#e6db74">&#34;&gt;&#34;</span>
    <span style="color:#75715e"># Multiple value metrics threshold. Thresholds for P50, P75, P90, P95, P99.</span>
    <span style="color:#f92672">threshold</span>: <span style="color:#ae81ff">1000</span>,<span style="color:#ae81ff">1000</span>,<span style="color:#ae81ff">1000</span>,<span style="color:#ae81ff">1000</span>,<span style="color:#ae81ff">1000</span>
    <span style="color:#f92672">period</span>: <span style="color:#ae81ff">10</span>
    <span style="color:#f92672">count</span>: <span style="color:#ae81ff">3</span>
    <span style="color:#f92672">silence-period</span>: <span style="color:#ae81ff">5</span>
    <span style="color:#f92672">message</span>: <span style="color:#ae81ff">Percentile response time of service {name} alarm in 3 minutes of last 10 minutes, due to more than one condition of p50 &gt; 1000, p75 &gt; 1000, p90 &gt; 1000, p95 &gt; 1000, p99 &gt; 1000</span>
    <span style="color:#f92672">only-as-condition</span>: <span style="color:#66d9ef">false</span>
  <span style="color:#f92672">meter_service_status_code_rule</span>:
    <span style="color:#f92672">metrics-name</span>: <span style="color:#ae81ff">meter_status_code</span>
    <span style="color:#f92672">exclude-labels</span>:
      - <span style="color:#e6db74">&#34;200&#34;</span>
    <span style="color:#f92672">op</span>: <span style="color:#e6db74">&#34;&gt;&#34;</span>
    <span style="color:#f92672">threshold</span>: <span style="color:#ae81ff">10</span>
    <span style="color:#f92672">period</span>: <span style="color:#ae81ff">10</span>
    <span style="color:#f92672">count</span>: <span style="color:#ae81ff">3</span>
    <span style="color:#f92672">silence-period</span>: <span style="color:#ae81ff">5</span>
    <span style="color:#f92672">message</span>: <span style="color:#ae81ff">The request number of entity {name} non-200 status is more than expected.</span>
    <span style="color:#f92672">only-as-condition</span>: <span style="color:#66d9ef">false</span>
<span style="color:#f92672">composite-rules</span>:
  <span style="color:#f92672">comp_rule</span>:
    <span style="color:#75715e"># Must satisfied percent rule and resp time rule </span>
    <span style="color:#f92672">expression</span>: <span style="color:#ae81ff">service_percent_rule &amp;&amp; service_resp_time_percentile_rule</span>
    <span style="color:#f92672">message</span>: <span style="color:#ae81ff">Service {name} successful rate is less than 80% and P50 of response time is over 1000ms</span>
    <span style="color:#f92672">tags</span>:
      <span style="color:#f92672">level</span>: <span style="color:#ae81ff">CRITICAL</span>
</code></pre></div><h3 id="default-alarm-rules">Default alarm rules</h3>
<p>For convenience&rsquo;s sake, we have provided a default <code>alarm-setting.yml</code> in our release. It includes the following rules:</p>
<ol>
<li>Service average response time over 1s in the last 3 minutes.</li>
<li>Service success rate lower than 80% in the last 2 minutes.</li>
<li>Percentile of service response time over 1s in the last 3 minutes</li>
<li>Service Instance average response time over 1s in the last 2 minutes, and the instance name matches the regex.</li>
<li>Endpoint average response time over 1s in the last 2 minutes.</li>
<li>Database access average response time over 1s in the last 2 minutes.</li>
<li>Endpoint relation average response time over 1s in the last 2 minutes.</li>
</ol>
<h3 id="list-of-all-potential-metrics-name">List of all potential metrics name</h3>
<p>The metrics names are defined in the official <a href="../../../guides/backend-oal-scripts">OAL scripts</a> and
<a href="../../../concepts-and-designs/mal">MAL scripts</a>, the <a href="../../../concepts-and-designs/event">Event</a> names can also serve
as the metrics names, all possible event names can be also found in <a href="../../../concepts-and-designs/event">the Event doc</a>.</p>
<p>Currently, metrics from the <strong>Service</strong>, <strong>Service Instance</strong>, <strong>Endpoint</strong>, <strong>Service Relation</strong>, <strong>Service Instance Relation</strong>, <strong>Endpoint Relation</strong> scopes could be used in Alarm, and the <strong>Database access</strong> scope is same as <strong>Service</strong>.</p>
<p>Submit an issue or a pull request if you want to support any other scopes in alarm.</p>
<h2 id="webhook">Webhook</h2>
<p>The Webhook requires the peer to be a web container. The alarm message will be sent through HTTP post by <code>application/json</code> content type. The JSON format is based on <code>List&lt;org.apache.skywalking.oap.server.core.alarm.AlarmMessage&gt;</code> with the following key information:</p>
<ul>
<li><strong>scopeId</strong>, <strong>scope</strong>. All scopes are defined in <code>org.apache.skywalking.oap.server.core.source.DefaultScopeDefine</code>.</li>
<li><strong>name</strong>. Target scope entity name. Please follow the <a href="#entity-name">entity name definitions</a>.</li>
<li><strong>id0</strong>. The ID of the scope entity that matches with the name. When using the relation scope, it is the source entity ID.</li>
<li><strong>id1</strong>. When using the relation scope, it is the destination entity ID. Otherwise, it is empty.</li>
<li><strong>ruleName</strong>. The rule name configured in <code>alarm-settings.yml</code>.</li>
<li><strong>alarmMessage</strong>. The alarm text message.</li>
<li><strong>startTime</strong>. The alarm time measured in milliseconds, which occurs between the current time and the midnight of January 1, 1970 UTC.</li>
<li><strong>tags</strong>. The tags configured in <code>alarm-settings.yml</code>.</li>
</ul>
<p>See the following example:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">[{
	<span style="color:#f92672">&#34;scopeId&#34;</span>: <span style="color:#ae81ff">1</span>, 
	<span style="color:#f92672">&#34;scope&#34;</span>: <span style="color:#e6db74">&#34;SERVICE&#34;</span>,
	<span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;serviceA&#34;</span>, 
	<span style="color:#f92672">&#34;id0&#34;</span>: <span style="color:#e6db74">&#34;12&#34;</span>,  
	<span style="color:#f92672">&#34;id1&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,  
    <span style="color:#f92672">&#34;ruleName&#34;</span>: <span style="color:#e6db74">&#34;service_resp_time_rule&#34;</span>,
	<span style="color:#f92672">&#34;alarmMessage&#34;</span>: <span style="color:#e6db74">&#34;alarmMessage xxxx&#34;</span>,
	<span style="color:#f92672">&#34;startTime&#34;</span>: <span style="color:#ae81ff">1560524171000</span>,
    <span style="color:#f92672">&#34;tags&#34;</span>: [{
        <span style="color:#f92672">&#34;key&#34;</span>: <span style="color:#e6db74">&#34;level&#34;</span>,
        <span style="color:#f92672">&#34;value&#34;</span>: <span style="color:#e6db74">&#34;WARNING&#34;</span>
     }]
}, {
	<span style="color:#f92672">&#34;scopeId&#34;</span>: <span style="color:#ae81ff">1</span>,
	<span style="color:#f92672">&#34;scope&#34;</span>: <span style="color:#e6db74">&#34;SERVICE&#34;</span>,
	<span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;serviceB&#34;</span>,
	<span style="color:#f92672">&#34;id0&#34;</span>: <span style="color:#e6db74">&#34;23&#34;</span>,
	<span style="color:#f92672">&#34;id1&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>,
    <span style="color:#f92672">&#34;ruleName&#34;</span>: <span style="color:#e6db74">&#34;service_resp_time_rule&#34;</span>,
	<span style="color:#f92672">&#34;alarmMessage&#34;</span>: <span style="color:#e6db74">&#34;alarmMessage yyy&#34;</span>,
	<span style="color:#f92672">&#34;startTime&#34;</span>: <span style="color:#ae81ff">1560524171000</span>,
    <span style="color:#f92672">&#34;tags&#34;</span>: [{
        <span style="color:#f92672">&#34;key&#34;</span>: <span style="color:#e6db74">&#34;level&#34;</span>,
        <span style="color:#f92672">&#34;value&#34;</span>: <span style="color:#e6db74">&#34;CRITICAL&#34;</span>
    }]
}]
</code></pre></div><h2 id="grpchook">gRPCHook</h2>
<p>The alarm message will be sent through remote gRPC method by <code>Protobuf</code> content type.
The message contains key information which are defined in <code>oap-server/server-alarm-plugin/src/main/proto/alarm-hook.proto</code>.</p>
<p>Part of the protocol looks like this:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-protobuf" data-lang="protobuf"><span style="color:#66d9ef">message</span> <span style="color:#a6e22e">AlarmMessage</span> {<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>    <span style="color:#66d9ef">int64</span> scopeId <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>    <span style="color:#66d9ef">string</span> scope <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>;<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>    <span style="color:#66d9ef">string</span> name <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>;<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>    <span style="color:#66d9ef">string</span> id0 <span style="color:#f92672">=</span> <span style="color:#ae81ff">4</span>;<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>    <span style="color:#66d9ef">string</span> id1 <span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span>;<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>    <span style="color:#66d9ef">string</span> ruleName <span style="color:#f92672">=</span> <span style="color:#ae81ff">6</span>;<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>    <span style="color:#66d9ef">string</span> alarmMessage <span style="color:#f92672">=</span> <span style="color:#ae81ff">7</span>;<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>    <span style="color:#66d9ef">int64</span> startTime <span style="color:#f92672">=</span> <span style="color:#ae81ff">8</span>;<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>    AlarmTags tags <span style="color:#f92672">=</span> <span style="color:#ae81ff">9</span>;<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>}<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">message</span> <span style="color:#a6e22e">AlarmTags</span> {<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>    <span style="color:#75715e">// String key, String value pair.
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">repeated</span> KeyStringValuePair data <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>}<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">message</span> <span style="color:#a6e22e">KeyStringValuePair</span> {<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>    <span style="color:#66d9ef">string</span> key <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>    <span style="color:#66d9ef">string</span> value <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>;<span style="color:#960050;background-color:#1e0010">
</span><span style="color:#960050;background-color:#1e0010"></span>}<span style="color:#960050;background-color:#1e0010">
</span></code></pre></div><h2 id="slack-chat-hook">Slack Chat Hook</h2>
<p>Follow the <a href="https://api.slack.com/messaging/webhooks">Getting Started with Incoming Webhooks guide</a> and create new Webhooks.</p>
<p>The alarm message will be sent through HTTP post by <code>application/json</code> content type if you have configured Slack Incoming Webhooks as follows:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yml" data-lang="yml"><span style="color:#f92672">slackHooks</span>:
  <span style="color:#f92672">textTemplate</span>: |-<span style="color:#e6db74">
</span><span style="color:#e6db74">    {
</span><span style="color:#e6db74">      &#34;type&#34;: &#34;section&#34;,
</span><span style="color:#e6db74">      &#34;text&#34;: {
</span><span style="color:#e6db74">        &#34;type&#34;: &#34;mrkdwn&#34;,
</span><span style="color:#e6db74">        &#34;text&#34;: &#34;:alarm_clock: *Apache Skywalking Alarm* \n **%s**.&#34;
</span><span style="color:#e6db74">      }
</span><span style="color:#e6db74">    }</span>    
  <span style="color:#f92672">webhooks</span>:
    - <span style="color:#ae81ff">https://hooks.slack.com/services/x/y/z</span>
</code></pre></div><h2 id="wechat-hook">WeChat Hook</h2>
<p>Note that only the WeChat Company Edition (WeCom) supports WebHooks. To use the WeChat WebHook, follow the <a href="https://work.weixin.qq.com/help?doc_id=13376">Wechat Webhooks guide</a>.
The alarm message will be sent through HTTP post by <code>application/json</code> content type after you have set up Wechat Webhooks as follows:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yml" data-lang="yml"><span style="color:#f92672">wechatHooks</span>:
  <span style="color:#f92672">textTemplate</span>: |-<span style="color:#e6db74">
</span><span style="color:#e6db74">    {
</span><span style="color:#e6db74">      &#34;msgtype&#34;: &#34;text&#34;,
</span><span style="color:#e6db74">      &#34;text&#34;: {
</span><span style="color:#e6db74">        &#34;content&#34;: &#34;Apache SkyWalking Alarm: \n %s.&#34;
</span><span style="color:#e6db74">      }
</span><span style="color:#e6db74">    }</span>    
  <span style="color:#f92672">webhooks</span>:
    - <span style="color:#ae81ff">https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=dummy_key</span>
</code></pre></div><h2 id="dingtalk-hook">Dingtalk Hook</h2>
<p>Follow the <a href="https://ding-doc.dingtalk.com/doc#/serverapi2/qf2nxq/uKPlK">Dingtalk Webhooks guide</a> and create new Webhooks.
For security purposes, you can config an optional secret for an individual webhook URL.
The alarm message will be sent through HTTP post by <code>application/json</code> content type if you have configured Dingtalk Webhooks as follows:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yml" data-lang="yml"><span style="color:#f92672">dingtalkHooks</span>:
  <span style="color:#f92672">textTemplate</span>: |-<span style="color:#e6db74">
</span><span style="color:#e6db74">    {
</span><span style="color:#e6db74">      &#34;msgtype&#34;: &#34;text&#34;,
</span><span style="color:#e6db74">      &#34;text&#34;: {
</span><span style="color:#e6db74">        &#34;content&#34;: &#34;Apache SkyWalking Alarm: \n %s.&#34;
</span><span style="color:#e6db74">      }
</span><span style="color:#e6db74">    }</span>    
  <span style="color:#f92672">webhooks</span>:
    - <span style="color:#f92672">url</span>: <span style="color:#ae81ff">https://oapi.dingtalk.com/robot/send?access_token=dummy_token</span>
      <span style="color:#f92672">secret</span>: <span style="color:#ae81ff">dummysecret</span>
</code></pre></div><h2 id="feishu-hook">Feishu Hook</h2>
<p>Follow the <a href="https://www.feishu.cn/hc/zh-cn/articles/360024984973">Feishu Webhooks guide</a> and create new Webhooks.
For security purposes, you can config an optional secret for an individual webhook URL.
If you would like to direct a text to a user, you can config <code>ats</code> which is the feishu&rsquo;s user_id and separated by &ldquo;,&rdquo; .
The alarm message will be sent through HTTP post by <code>application/json</code> content type if you have configured Feishu Webhooks as follows:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yml" data-lang="yml"><span style="color:#f92672">feishuHooks</span>:
  <span style="color:#f92672">textTemplate</span>: |-<span style="color:#e6db74">
</span><span style="color:#e6db74">    {
</span><span style="color:#e6db74">      &#34;msg_type&#34;: &#34;text&#34;,
</span><span style="color:#e6db74">      &#34;content&#34;: {
</span><span style="color:#e6db74">        &#34;text&#34;: &#34;Apache SkyWalking Alarm: \n %s.&#34;
</span><span style="color:#e6db74">      },
</span><span style="color:#e6db74">      &#34;ats&#34;:&#34;feishu_user_id_1,feishu_user_id_2&#34;
</span><span style="color:#e6db74">    }</span>    
  <span style="color:#f92672">webhooks</span>:
    - <span style="color:#f92672">url</span>: <span style="color:#ae81ff">https://open.feishu.cn/open-apis/bot/v2/hook/dummy_token</span>
      <span style="color:#f92672">secret</span>: <span style="color:#ae81ff">dummysecret</span>
</code></pre></div><h2 id="welink-hook">WeLink Hook</h2>
<p>Follow the <a href="https://open.welink.huaweicloud.com/apiexplorer/#/apiexplorer?type=internal&amp;method=POST&amp;path=/welinkim/v1/im-service/chat/group-chat">WeLink Webhooks guide</a> and create new Webhooks.
The alarm message will be sent through HTTP post by <code>application/json</code> content type if you have configured WeLink Webhooks as follows:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yml" data-lang="yml"><span style="color:#f92672">welinkHooks</span>:
  <span style="color:#f92672">textTemplate</span>: <span style="color:#e6db74">&#34;Apache SkyWalking Alarm: \n %s.&#34;</span>
  <span style="color:#f92672">webhooks</span>:
    <span style="color:#75715e"># you may find your own client_id and client_secret in your app, below are dummy, need to change.</span>
    - <span style="color:#f92672">client_id</span>: <span style="color:#e6db74">&#34;dummy_client_id&#34;</span>
      <span style="color:#f92672">client_secret</span>: <span style="color:#ae81ff">dummy_secret_key</span>
      <span style="color:#f92672">access_token_url</span>: <span style="color:#ae81ff">https://open.welink.huaweicloud.com/api/auth/v2/tickets</span>
      <span style="color:#f92672">message_url</span>: <span style="color:#ae81ff">https://open.welink.huaweicloud.com/api/welinkim/v1/im-service/chat/group-chat</span>
      <span style="color:#75715e"># if you send to multi group at a time, separate group_ids with commas, e.g. &#34;123xx&#34;,&#34;456xx&#34;</span>
      <span style="color:#f92672">group_ids</span>: <span style="color:#e6db74">&#34;dummy_group_id&#34;</span>
      <span style="color:#75715e"># make a name you like for the robot, it will display in group</span>
      <span style="color:#f92672">robot_name</span>: <span style="color:#ae81ff">robot</span>
</code></pre></div><h2 id="update-the-settings-dynamically">Update the settings dynamically</h2>
<p>Since 6.5.0, the alarm settings can be updated dynamically at runtime by <a href="../dynamic-config">Dynamic Configuration</a>,
which will override the settings in <code>alarm-settings.yml</code>.</p>
<p>In order to determine whether an alarm rule is triggered or not, SkyWalking needs to cache the metrics of a time window for
each alarm rule. If any attribute (<code>metrics-name</code>, <code>op</code>, <code>threshold</code>, <code>period</code>, <code>count</code>, etc.) of a rule is changed,
the sliding window will be destroyed and re-created, causing the alarm of this specific rule to restart again.</p>




</div>


            </main>
          <div id="toc" class="d-none d-xl-block col-xl-2 td-toc d-print-none">
            




<div class="td-page-meta ml-2 pb-1 pt-2 mb-0">











</div>






<nav id="TableOfContents">
  <ul>
    <li><a href="#alarm">Alarm</a>
      <ul>
        <li><a href="#entity-name">Entity name</a></li>
        <li><a href="#rules">Rules</a>
          <ul>
            <li><a href="#individual-rules">Individual rules</a></li>
            <li><a href="#composite-rules">Composite rules</a></li>
            <li><a href="#default-alarm-rules">Default alarm rules</a></li>
            <li><a href="#list-of-all-potential-metrics-name">List of all potential metrics name</a></li>
          </ul>
        </li>
        <li><a href="#webhook">Webhook</a></li>
        <li><a href="#grpchook">gRPCHook</a></li>
        <li><a href="#slack-chat-hook">Slack Chat Hook</a></li>
        <li><a href="#wechat-hook">WeChat Hook</a></li>
        <li><a href="#dingtalk-hook">Dingtalk Hook</a></li>
        <li><a href="#feishu-hook">Feishu Hook</a></li>
        <li><a href="#welink-hook">WeLink Hook</a></li>
        <li><a href="#update-the-settings-dynamically">Update the settings dynamically</a></li>
      </ul>
    </li>
  </ul>
</nav>




<script>
  $(function () {
    var $toc = $("#TableOfContents");
    if (!$toc || !$toc.length) {
      return;
    }
    var top = $toc.offset().top;
    $(window).on("scroll", debounce(setTop, 100))
    $(window).on("scroll", debounce(addActive, 30))

    function addActive() {
      var scrollValue = $(window).scrollTop();
      var topEle = null;
      $.each($('main h1, main h2, main h3'), function (index, item) {
        if ($(item).offset().top - 70 > scrollValue) {
          return
        }
        if (!topEle) {
          topEle = item
        } else if ($(item).offset().top >= $(topEle).offset().top) {
          topEle = item
        }
        if (topEle) {
          var id = $(item).attr('id');
          $toc.find('a').removeClass("active").end().find('a[href="' + '#' + id + '"]').addClass("active")
        }
      })
    }

    function setTop() {
      var scrollValue = $(window).scrollTop();
      if (scrollValue >= top - 70) {
        $toc.addClass('fixed')
      } else {
        $toc.removeClass('fixed')
      }
    }

    function debounce(fn, wait) {
      var timeout = null;
      return function () {
        clearTimeout(timeout);
        timeout = setTimeout(() => {
          fn.apply(this, arguments);
        }, wait);
      };
    }
  })

</script>

          </div>

        </div>
      </div>

      
<footer class="bg-dark py-5 sky-row">
  <div class="container-fluid text-center">
    <div class="">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Twitter" aria-label="Twitter">
    <a class="text-white" target="_blank" href="https://twitter.com/asfskywalking">
      <i class="fab fa-twitter"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Slack" aria-label="Slack">
    <a class="text-white" target="_blank" href="http://s.apache.org/slack-invite">
      <i class="fab fa-slack"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Mailing list" aria-label="Mailing list">
    <a class="text-white" target="_blank" href="https://lists.apache.org/list.html?dev@skywalking.apache.org">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-white" target="_blank" href="https://github.com/apache/skywalking">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
</ul>

        
        
    </div>
    <div class="">

        <small class="text-white">&copy; 2017 - 2021 The Apache Software Foundation All Rights Reserved</small>
        
	
    </div>
    <div class="">
      <small class="text-white   mt-4">Apache SkyWalking, SkyWalking, Apache, the Apache feather logo, and the Apache SkyWalking project logo are either registered trademarks or trademarks of the Apache Software Foundation.</small>
    </div>
  </div>
</footer>


    </div>
    

















































































































<div class="sky-event-popup">

    <div class="sky-pop-modal">
        <i class="fa fa-window-close"></i>
        <div class="pic-wrapper">
            <img
                    data-img="/images/skywalking_200x200.png"
                    class="pic"
                    alt="event"
            />
        </div>

        <div class="content-box">
            
            
            

            <div class="item"
                 data-img=""
                 data-poster=""
                 data-link="/events/release-apache-skywalking-apm-8-6-0/"
                 data-starttime=""
                 data-endtime="2021-07-01T10:00:00Z">
                <a href="/events/release-apache-skywalking-apm-8-6-0/">
                    <h3 class="title">Release Apache SkyWalking APM 8.6.0</h3>
                    <p class="content-text">
                        Release Apache SkyWalking 8.6.0.
                    </p>
                </a>

                <a href="/events/release-apache-skywalking-apm-8-6-0/" class="modal-btn">
                    
                    Read more
                    
                </a>
            </div>
            
            
            
            
            

            <div class="item"
                 data-img=""
                 data-poster="/events/skywalkingday-2021/skywalkingday.png"
                 data-link="/events/skywalkingday-2021/"
                 data-starttime=""
                 data-endtime="2021-06-20T10:00:00Z">
                <a href="/events/skywalkingday-2021/">
                    <h3 class="title">SkyWalkingDay Conference 2021, relocating at Beijing</h3>
                    <p class="content-text">
                        Apache SkyWalking hosts SkyWalkingDay Conference 2021 in June 26th, jointly with Tencent and Tetrate.
                    </p>
                </a>

                <a href="/events/skywalkingday-2021/" class="modal-btn">
                    
                    Read more
                    
                </a>
            </div>
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
        </div>
    </div>
</div>




    
<div id="popup">
    <div class="mask">
        <img src=""/>
    </div>
</div>

    <div class="sidebar-mask"></div>
<div class="sidebar">
    <nav class="nav-links">
        <div class="nav-item"><a href="/docs/" class="nav-link">Projects and Documentation</a></div>
        <div class="nav-item"><a href="/events/" class="nav-link">Events</a></div>
        <div class="nav-item"><a href="/blog/" class="nav-link router-link-exact-active router-link-active">Blog</a>
        </div>
        <div class="nav-item"><a href="/downloads/" class="nav-link">Downloads</a></div>
        <div class="nav-item"><a href="/team/" class="nav-link">Team</a></div>
        <div class="nav-item"><a href="/zh/" class="nav-link">中文博客</a></div>
        <div class="nav-item">
            <div class="dropdown-wrapper open"><a class="dropdown-title"><span class="title">Links</span> <span
                    class="arrow down"></span></a>
                <ul class="nav-dropdown" style="">
                    <li class="dropdown-item">
                        <a href="http://www.apache.org/" target="_blank"
                           rel="noopener noreferrer" class="nav-link external">
                            Apache Software Foundation
                        </a>
                    </li>
                    <li class="dropdown-item">
                        <a href="https://github.com/apache/skywalking/issues"
                           target="_blank" rel="noopener noreferrer"
                           class="nav-link external">
                            GitHub Issue Tracker
                        </a>
                    </li>
                    <li class="dropdown-item">
                        <a href="https://lists.apache.org/list.html?dev@skywalking.apache.org" target="_blank"
                           rel="noopener noreferrer" class="nav-link external">
                            Dev Mailing List
                        </a>
                    </li>
                    <li class="dropdown-item">
                        <a href="http://www.apache.org/licenses/" target="_blank"
                           rel="noopener noreferrer" class="nav-link external">
                            License
                        </a>
                    </li>
                    <li class="dropdown-item">
                        <a href="http://www.apache.org/events/current-event"
                           target="_blank" rel="noopener noreferrer"
                           class="nav-link external">
                            Apache Events
                        </a>
                    </li>
                    <li class="dropdown-item">
                        <a href="http://www.apache.org/security/" target="_blank"
                           rel="noopener noreferrer" class="nav-link external">
                            Security
                        </a>
                    </li>
                    <li class="dropdown-item">
                        <a href="http://www.apache.org/foundation/sponsorship.html"
                           target="_blank" rel="noopener noreferrer"
                           class="nav-link external">
                            Sponsorship and Donate
                        </a>
                    </li>
                    <li class="dropdown-item">
                        <a href="http://www.apache.org/foundation/thanks.html"
                           target="_blank" rel="noopener noreferrer"
                           class="nav-link external">
                            Thanks
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</div>

    
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="/js/bootstrap.bundle.min.js"></script>

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>











<script src="/js/main.min.b39e9e0a8b4cdf9f436c5f7899461300ecea2f05f620805ef970b7832857a4cb.js" integrity="sha256-s56eCotM359DbF94mUYTAOzqLwX2IIBe&#43;XC3gyhXpMs=" crossorigin="anonymous"></script>





  </body>
  <script>
    $(function (){
      $('.doc-menu-button').on('click',function (){
        $('.td-sidebar').toggleClass('active')
      })
      $('.version-select').on('change', function (){
        var selectVersion = $(this).val();
        var prefix = '';
        var url = location.href.replace(/(\/docs\/[a-zA-Z\-]+\/)([\w|\.]+)(\/.*)/, function (match, p1, p2, p3){
          prefix = p1 + selectVersion;
          return p1 + selectVersion + p3
        })
        go2SelectVersion(url, prefix)

      })
      function go2SelectVersion(url, prefix){
        $.ajax({
          url: url,
          type: "get",
          success:function(){
            location.href = url;
          },
          statusCode: {
            404:function(){
              location.href = prefix + '/readme/';
            }
          }
        });
      }
    })
  </script>
</html>
