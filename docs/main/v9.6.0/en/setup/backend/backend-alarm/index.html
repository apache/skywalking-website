<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="twitter:site" content="skywalking.apache.org">
<meta name="twitter:image:src" content="https://skywalking.apache.org/images/skywalking_400x400.png">
<meta property="og:image" content="https://skywalking.apache.org/images/skywalking_400x400.png">

<meta http-equiv="Content-Security-Policy" content="frame-src 'self' https://www.google.com https://app.netlify.com;">

<meta name="generator" content="Hugo 0.80.0" />


<script async src="https://www.googletagmanager.com/gtag/js?id=G-GR8N6PGRJ3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);};
  gtag('js', new Date());gtag('config', 'G-GR8N6PGRJ3');
</script>
<META NAME="ROBOTS" CONTENT="INDEX, FOLLOW">
<link rel="stylesheet" href="//at.alicdn.com/t/c/font_3007530_pvozs1rz2wn.css">



<link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png">
<link rel="manifest" href="/favicons/site.webmanifest">
<link rel="mask-icon" href="/favicons/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">

<title>Alerting | Apache SkyWalking</title><meta property="og:title" content="Alerting" />
<meta property="og:description" content="Alerting Alerting mechanism measures system performance according to the metrics of services/instances/endpoints from different layers. Alerting kernel is an in-memory, time-window based queue.
The alerting core is driven by a collection of rules defined in config/alarm-settings.yml. There are three parts to alerting rule definitions.
 alerting rules. They define how metrics alerting should be triggered and what conditions should be considered. hooks. The list of hooks, which should be called after an alerting is triggered." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/docs/main/v9.6.0/en/setup/backend/backend-alarm/" />

<meta itemprop="name" content="Alerting">
<meta itemprop="description" content="Alerting Alerting mechanism measures system performance according to the metrics of services/instances/endpoints from different layers. Alerting kernel is an in-memory, time-window based queue.
The alerting core is driven by a collection of rules defined in config/alarm-settings.yml. There are three parts to alerting rule definitions.
 alerting rules. They define how metrics alerting should be triggered and what conditions should be considered. hooks. The list of hooks, which should be called after an alerting is triggered.">

<meta itemprop="wordCount" content="2106">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Alerting"/>
<meta name="twitter:description" content="Alerting Alerting mechanism measures system performance according to the metrics of services/instances/endpoints from different layers. Alerting kernel is an in-memory, time-window based queue.
The alerting core is driven by a collection of rules defined in config/alarm-settings.yml. There are three parts to alerting rule definitions.
 alerting rules. They define how metrics alerting should be triggered and what conditions should be considered. hooks. The list of hooks, which should be called after an alerting is triggered."/>



<link rel="preload" href="/scss/main.min.592235942cb3c9f3dd697382a4e7a1fad8e1c182dad2841bdce6b43b4a346ae8.css" as="style">
<link href="/scss/main.min.592235942cb3c9f3dd697382a4e7a1fad8e1c182dad2841bdce6b43b4a346ae8.css" rel="stylesheet" integrity="">



<link rel="stylesheet" href="/css/docSearch.css" />


<script src="/js/jquery-3.6.0.min.js"></script>





    <title>Alerting | Apache SkyWalking</title>
  </head>
  <body class="td-page  project-doc">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand  flex-column flex-md-row td-navbar">
    <div class="sidebar-button">
      <i class="iconfont icon-menu"></i>
    </div>
    <a class="navbar-brand" href="/">
        <span class="navbar-logo"><img width="130" src="/images/logo.svg" alt="SkyWalking"></span> 
    </a>
    <div class="td-navbar-nav-scroll navbar-nav-wrapper" id="navigation">
        <ul class="navbar-nav mt-lg-0">
             
            
            
            <li class="nav-item mr-3 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="/docs" ><span>Projects and Docs</span></a>
			</li>
            
            
            
            
            <li class="nav-item mr-3 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="/events" ><span>Events</span></a>
			</li>
            
            
            
            
            <li class="nav-item mr-3 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="/blog" ><span>Blogs</span></a>
			</li>
            
            
            
            
            <li class="nav-item mr-3 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="/downloads" ><span>Downloads</span></a>
			</li>
            
            
            
            
            <li class="nav-item mr-3 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="/team" ><span>Team</span></a>
			</li>
            
            
            
            
            <li class="nav-item mr-3 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="/users" ><span>Users</span></a>
			</li>
            
            
            
            
            
            <li class="nav-item mr-3 mb-lg-0">
                <span class="link dropdown blog">
                    <a class="link-name nav-link dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">中文资料</a>
                    <div class="dropdown-menu">
                        <a class="dropdown-item" href="/zh/">博客</a>
                        <a class="dropdown-item" href="https://space.bilibili.com/390683219" target="_blank" rel="noopener noreferrer">
                            B站
                        </a>
                        <a class="dropdown-item" href="https://juejin.cn/user/13673577331607" target="_blank" rel="noopener noreferrer">
                            掘金
                        </a>
                    </div>
                </span>
            </li>

            
			
        </ul>
    </div>
    <div class="navbar-nav d-none d-lg-block search-input-box">
         
            
        
            
        
            
        
            
        
            
        
            
        
            
            <span class="link dropdown">
                <a class="link-name dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Links
                </a>
                <div class="dropdown-menu">
                    
                    <a class="dropdown-item" href="http://www.apache.org/">Apache Software Foundation</a> 
                    <a class="dropdown-item" href="https://github.com/apache/skywalking/issues">GitHub Issue Tracker</a> 
                    <a class="dropdown-item" href="https://github.com/apache/skywalking/discussions">Discussion</a> 
                    <a class="dropdown-item" href="https://lists.apache.org/list.html?dev@skywalking.apache.org">Dev Mailing List</a> 
                    <a class="dropdown-item" href="https://cwiki.apache.org/confluence/display/SKYWALKING/Home">WIKI</a> 
                    <a class="dropdown-item" href="http://www.apache.org/licenses/">License</a> 
                    <a class="dropdown-item" href="http://www.apache.org/events/current-event">Apache Events</a> 
                    <a class="dropdown-item" href="http://www.apache.org/security/">Security</a> 
                    <a class="dropdown-item" href="http://www.apache.org/foundation/sponsorship.html">Sponsor and Donate</a> 
                    <a class="dropdown-item" href="http://www.apache.org/foundation/thanks.html">Thanks</a> 
                    <a class="dropdown-item" href="https://apache.org/foundation/policies/privacy.html">Privacy</a> 
                </div>
            </span>
            
        
        
<div id="docsearch"></div>


    </div>
</nav>

    </header>
    <div class="container-fluid td-outer">

      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <div class="col-12 col-md-3 col-xl-2 d-print-none scroll-bar td-sidebar">





                  <div class="description-wrapper">
                    <h5>
                    <img width="26" height="26" src="/images/project/skywalking.svg">
                    SkyWalking
                    </h5>
                    <p>SkyWalking primary repository and docs.</p>
                  </div>
                  
                  <div class="version-wrapper">Version: 
                  <select class="version-select">
                  
                    
                    
                    <option ZgotmplZ value="next">
                    
                      next
                    
                    </option>
                  
                    
                    
                    <option ZgotmplZ value="latest">
                    
                      latest
                    
                    </option>
                  
                    
                    
                    <option ZgotmplZ value="v9.7.0">
                    
                      v9.7.0
                    
                    </option>
                  
                    
                    
                    <option selected value="v9.6.0">
                    
                      v9.6.0
                    
                    </option>
                  
                    
                    
                    <option ZgotmplZ value="v9.5.0">
                    
                      v9.5.0
                    
                    </option>
                  
                    
                    
                    <option ZgotmplZ value="v9.4.0">
                    
                      v9.4.0
                    
                    </option>
                  
                    
                    
                    <option ZgotmplZ value="v9.3.0">
                    
                      v9.3.0
                    
                    </option>
                  
                    
                    
                    <option ZgotmplZ value="v9.2.0">
                    
                      v9.2.0
                    
                    </option>
                  
                    
                    
                    <option ZgotmplZ value="v9.1.0">
                    
                      v9.1.0
                    
                    </option>
                  
                    
                    
                    <option ZgotmplZ value="v9.0.0">
                    
                      v9.0.0
                    
                    </option>
                  
                  </select>
                  </div>
                  
                  <ul class="sidebar-menu">
    
    <li>
        
            <a href="/docs/main/v9.6.0/readme">Welcome</a>
        
    </li>
    
    <li>
        
            
            <a href="#">Concepts and Designs<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        

            
            <a href="#">What is SkyWalking?<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/main/v9.6.0/en/concepts-and-designs/overview">Overview and Core concepts</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/concepts-and-designs/project-goals">Project Goals</a>
        
    </li>

    

</ul>

        
    </li>

    

    <li>
        

            
            <a href="#">Agents<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/main/v9.6.0/en/concepts-and-designs/probe-introduction">Introduction</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/concepts-and-designs/service-agent">Service Auto Instrument Agent</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/concepts-and-designs/manual-sdk">Manual Instrument SDK</a>
        
    </li>

    

</ul>

        
    </li>

    

    <li>
        

            
            <a href="#">Observability Analysis Platform<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/main/v9.6.0/en/concepts-and-designs/backend-overview">Overview</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/concepts-and-designs/oal">Analysis Streaming Traces and Mesh Traffic</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/concepts-and-designs/mal">Analysis Metrics and Meters</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/concepts-and-designs/lal">Analysis Logs</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/concepts-and-designs/profiling">Profiling</a>
        
    </li>

    

</ul>

        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/concepts-and-designs/event/">Event</a>
        
    </li>

    

</ul>

        
    </li>
    
    <li>
        
            
            <a href="#">Setup<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        

            
            <a href="#">Quick Start<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/backend-setup">Introduction</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/backend-docker">Run with Docker</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/backend-k8s">Run with Kubernetes</a>
        
    </li>

    

</ul>

        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/configuration-vocabulary">Configuration Vocabulary</a>
        
    </li>

    

    <li>
        

            
            <a href="#">Advanced Setup<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/service-auto-grouping">Service Grouping</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/backend-setting-override">Overriding Settings</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/backend-ip-port">IP And Port Setting</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/backend-init-mode">Backend Init Mode Startup</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/backend-cluster">Cluster Management</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/backend-storage">Choose Storage</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/backend-expose">Setup External Communication Channels</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/kafka-fetcher">Kafka Fetcher</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/advanced-deployment">Advanced Deployment Options</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/ttl">Data Lifecycle. Time To Live (TTL)</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/endpoint-grouping-rules">Group Parameterized Endpoints</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/dynamical-logging">Dynamical Logging</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/grpc-security">Security(SSL/TLS/mTLS)</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/backend-load-balancer">Setup Native Load Balancer</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/backend-telemetry">OAP Self Observability Telemetry</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/backend-health-check">OAP Health Check</a>
        
    </li>

    

</ul>

        
    </li>

    

    <li>
        

            
            <a href="#">Tracing<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/trace-sampling">Trace Sampling</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/slow-db-statement">Detect Slow Database Statement</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/slow-cache-command">Detect Slow Cache Command</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/mq">Message Queue Performance</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/uninstrumented-gateways">Uninstrumented Gateways</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/zipkin-trace">Zipkin Trace</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/otlp-trace">OpenTelemetry Trace</a>
        
    </li>

    

</ul>

        
    </li>

    

    <li>
        

            
            <a href="#">Metrics<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/main/v9.6.0/en/guides/backend-oal-scripts">OAL Scripts</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/opentelemetry-receiver">OpenTelemetry Metrics</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/aws-firehose-receiver">AWS CloudWatch Metrics</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/backend-zabbix">Zabbix Metrics</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/backend-meter">Meter Analysis</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/telegraf-receiver">Telegraf Metrics</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/apdex-threshold">Apdex Threshold</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/micrometer-observations">Spring MicroMeter Observations Analysis</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/backend-alarm">Alerting</a>
        
    </li>

    

</ul>

        
    </li>

    

    <li>
        

            
            <a href="#">Logging<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        

            
            <a href="#">Persistent Logging<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/filelog-native">Native Logging from Files</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/log-agent-native">Native Logging from Agents</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/log-otlp">OpenTelemetry Logging</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/log-analyzer">Log Analysis</a>
        
    </li>

    

</ul>

        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/on-demand-pod-log">On Demand Pod Logs</a>
        
    </li>

    

</ul>

        
    </li>

    

    <li>
        

            
            <a href="#">Profiling<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/backend-trace-profiling">Tracing Profiling</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/backend-ebpf-profiling">eBPF Profiling</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/backend-continuous-profiling">Continuous Profiling</a>
        
    </li>

    

</ul>

        
    </li>

    

    <li>
        

            
            <a href="#">Extension<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/exporter">Exporter</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/dynamic-config">Dynamic Configuration</a>
        
    </li>

    

    <li>
        

            
            <a href="#">AI Pipeline<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/ai-pipeline/introduction">Introduction</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/ai-pipeline/http-restful-uri-pattern">HTTP Restful URI recognition</a>
        
    </li>

    

</ul>

        
    </li>

    

</ul>

        
    </li>

    

    <li>
        

            
            <a href="#">UI Setup<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        

            
            <a href="#">Native UI<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/ui-setup">Setup</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/ui/readme">Customization</a>
        
    </li>

    

</ul>

        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/ui-grafana">Grafana UI</a>
        
    </li>

    

</ul>

        
    </li>

    

    <li>
        

            
            <a href="#">Official Dashboards<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        

            
            <a href="#">General Service<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/service-agent/server-agents">Server Agents</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/service-agent/agent-compatibility">Compatibility</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/service-agent/virtual-database">Virtual Database</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/service-agent/virtual-cache">Virtual Cache</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/service-agent/virtual-mq">Virtual MQ</a>
        
    </li>

    

</ul>

        
    </li>

    

    <li>
        

            
            <a href="#">Service Mesh<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/envoy/als_setting">Observe Service Mesh through Access Log Service (ALS)</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/zipkin/tracing">Observe Service Mesh through Zipkin traces</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/istio/readme">Observe Control Plane (Istio)</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/envoy/metrics_service_setting">Observe Data Plane (Envoy)</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/backend-k8s-network-monitoring">Profile Pod&#39;s Network</a>
        
    </li>

    

</ul>

        
    </li>

    

    <li>
        

            
            <a href="#">Kubernetes<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/backend-k8s-monitoring">Observe Kubernetes</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/backend-k8s-network-monitoring">Profile Pod&#39;s Network</a>
        
    </li>

    

</ul>

        
    </li>

    

    <li>
        

            
            <a href="#">Infrastructure Monitoring<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/backend-vm-monitoring">Linux Monitoring</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/backend-win-monitoring">Windows Monitoring</a>
        
    </li>

    

</ul>

        
    </li>

    

    <li>
        

            
            <a href="#">AWS Cloud Monitoring<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/backend-aws-eks-monitoring">EKS Monitoring</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/backend-aws-s3-monitoring">S3 Monitoring</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/backend-aws-dynamodb-monitoring">AWS DynamoDB</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/backend-aws-api-gateway-monitoring">AWS API Gateway</a>
        
    </li>

    

</ul>

        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/service-agent/browser-agent">Browser Monitoring</a>
        
    </li>

    

    <li>
        

            
            <a href="#">Gateway Monitoring<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/backend-apisix-monitoring">APISIX Monitoring</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/backend-aws-api-gateway-monitoring">AWS API Gateway</a>
        
    </li>

    

</ul>

        
    </li>

    

    <li>
        

            
            <a href="#">Database Monitoring<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/backend-mysql-monitoring">MySQL/MariaDB Server</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/backend-postgresql-monitoring">PostgreSQL Server</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/backend-aws-dynamodb-monitoring">AWS DynamoDB</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/backend-redis-monitoring">Redis</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/backend-elasticsearch-monitoring">Elasticsearch</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/backend-mongodb-monitoring">MongoDB</a>
        
    </li>

    

</ul>

        
    </li>

    

    <li>
        

            
            <a href="#">MQ Monitoring<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/backend-rabbitmq-monitoring">RabbitMQ</a>
        
    </li>

    

</ul>

        
    </li>

    

    <li>
        

            
            <a href="#">Self Observability<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/dashboards-so11y">OAP self telemetry</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/dashboards-so11y-satellite">Satellite self telemetry</a>
        
    </li>

    

</ul>

        
    </li>

    

</ul>

        
    </li>

    

    <li>
        
            <a href="https://github.com/apache/skywalking-cli">CLI Setup</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/setup/backend/backend-data-generator">Mock Data Generator Setup</a>
        
    </li>

    

</ul>

        
    </li>
    
    <li>
        
            
            <a href="#">APIs<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        

            
            <a href="#">Telemetry APIs/Protocols<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        

            
            <a href="#">Tracing<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/main/v9.6.0/en/api/trace-data-protocol-v3">Spans APIs</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/api/x-process-propagation-headers-v3">Tracing Context Propagation</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/api/x-process-correlation-headers-v1">Tracing Correlation Correlation</a>
        
    </li>

    

</ul>

        
    </li>

    

    <li>
        

            
            <a href="#">Metrics APIs<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/main/v9.6.0/en/api/meter">Meter APIs</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/api/browser-protocol">Browser performance APIs</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/api/jvm-protocol">JVM metrics APIs</a>
        
    </li>

    

</ul>

        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/api/log-data-protocol">Logging</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/api/instance-properties">Service Instance Properties APIs</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/api/event">Event</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/api/profiling-protocol">Profiling</a>
        
    </li>

    

</ul>

        
    </li>

    

    <li>
        

            
            <a href="#">Query APIs<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        

            
            <a href="#">GraphQL APIs<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/main/v9.6.0/en/api/query-protocol">GraphQL APIs</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/api/metrics-query-expression">MQE Syntax</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/api/query-protocol-deprecated">Deprecated APIs</a>
        
    </li>

    

</ul>

        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/api/promql-service">PromQL APIs</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/api/logql-service">LogQL APIs</a>
        
    </li>

    

</ul>

        
    </li>

    

</ul>

        
    </li>
    
    <li>
        
            <a href="/docs/main/v9.6.0/en/security/readme">Security Notice</a>
        
    </li>
    
    <li>
        
            
            <a href="#">Academy<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/main/v9.6.0/en/academy/scaling-with-apache-skywalking">Scaling SkyWalking server automatically in kubernetes</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/papers/stam">STAM Paper, Streaming Topology Analysis Method</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/concepts-and-designs/sdk-profiling">SDK Profiling to Fix the Blind Spot</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/concepts-and-designs/ebpf-cpu-profiling">eBPF CPU Profiling to pinpoint Service Mesh Critical Performance Impact</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/academy/diagnose-service-mesh-network-performance-with-ebpf">Diagnose Service Mesh Network Performance with eBPF</a>
        
    </li>

    

</ul>

        
    </li>
    
    <li>
        
            <a href="/docs/main/v9.6.0/en/faq/readme">FAQs</a>
        
    </li>
    
    <li>
        
            
            <a href="#">Contributing Guides<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/main/v9.6.0/en/guides/community">Contact the community</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/guides/asf/committer">Become A Committer</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/guides/how-to-release/">Release Guide</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/guides/how-to-build">Compiling Guide</a>
        
    </li>

    

    <li>
        

            
            <a href="#">Contribute<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/main/v9.6.0/en/guides/it-guide">Integration Tests</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/guides/benchmark">Benchmark Tests</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/guides/e2e">End to End Tests</a>
        
    </li>

    

    <li>
        

            
            <a href="#">Project Extensions<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/main/v9.6.0/en/guides/component-library-settings">Component Library Settings</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/guides/source-extension">Extend An OAL Source</a>
        
    </li>

    

</ul>

        
    </li>

    

    <li>
        

            
            <a href="#">Dependencies<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/main/v9.6.0/en/guides/dependencies">Project Dependencies Check</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/guides/how-to-bump-up-zipkin">Zipkin dependency</a>
        
    </li>

    

</ul>

        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/guides/i18n">I18n</a>
        
    </li>

    

</ul>

        
    </li>

    

</ul>

        
    </li>
    
    <li>
        
            
            <a href="#">Changelog<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/main/v9.6.0/en/changes/changes">Current Version</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/changes/changes-9.4.0">9.4.0</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/changes/changes-9.3.0">9.3.0</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/changes/changes-9.2.0">9.2.0</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/changes/changes-9.1.0">9.1.0</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/changes/changes-9.0.0">9.0.0</a>
        
    </li>

    

    <li>
        

            
            <a href="#">Archived Releases<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/main/v9.6.0/en/changes/changes-8.9.1">8.9.1</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/changes/changes-8.9.0">8.9.0</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/changes/changes-8.8.1">8.8.1</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/changes/changes-8.8.0">8.8.0</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/changes/changes-8.7.0">8.7.0</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/changes/changes-8.6.0">8.6.0</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/changes/changes-8.5.0">8.5.0</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/changes/changes-8.4.0">8.4.0</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/changes/changes-8.3.0">8.3.0</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/changes/changes-8.2.0">8.2.0</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/changes/changes-8.1.0">8.1.0</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/changes/changes-8.0.1">8.0.1</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/changes/changes-8.0.0">8.0.0</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/changes/changes-7.0.0">7.0.0</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/changes/changes-6.x">6.x</a>
        
    </li>

    

    <li>
        
            <a href="/docs/main/v9.6.0/en/changes/changes-5.x">5.x</a>
        
    </li>

    

</ul>

        
    </li>

    

</ul>

        
    </li>
    
</ul>
<script src="/js/sidebar-menu.js"></script>
<script>
  (function (){
    $.sidebarMenu($('.sidebar-menu'))
    var path = window.location.pathname;
    var hash = window.location.hash;
    var $a = $('.sidebar-menu a')
    $a.each(function (e){
      if($(this).attr('href')+'/' === path || $(this).attr('href').replace('#','/#') === path+hash){
        $(this).parents('li').addClass('active').show()
      }
    })
    $a.on('click',function (){
      var url = $(this).attr('href')
      if(url!=='#'){
        window.location.href = url
      }
    })
  })()
</script>

                  <div class="commit-id">Commit Id: fb61128</div>
                






































</div>
            <main class="col-12 col-md-9 col-xl-8 pl-md-5 pr-md-4" role="main">
              <i class="iconfont icon-menu-doc doc-menu-button"></i>
              
<div class="td-content">











	<h1 id="alerting">Alerting</h1>
<p>Alerting mechanism measures system performance according to the metrics of services/instances/endpoints from different layers.
Alerting kernel is an in-memory, time-window based queue.</p>
<p>The alerting core is driven by a collection of rules defined in <code>config/alarm-settings.yml.</code>
There are three parts to alerting rule definitions.</p>
<ol>
<li><a href="#rules">alerting rules</a>. They define how metrics alerting should be triggered and what conditions should be considered.</li>
<li><a href="#hooks">hooks</a>. The list of hooks, which should be called after an alerting is triggered.</li>
</ol>
<h2 id="entity-name">Entity name</h2>
<p>Defines the relation between scope and entity name.</p>
<ul>
<li><strong>Service</strong>: Service name</li>
<li><strong>Instance</strong>: {Instance name} of {Service name}</li>
<li><strong>Endpoint</strong>: {Endpoint name} in {Service name}</li>
<li><strong>Service Relation</strong>: {Source service name} to {Dest service name}</li>
<li><strong>Instance Relation</strong>: {Source instance name} of {Source service name} to {Dest instance name} of {Dest service name}</li>
<li><strong>Endpoint Relation</strong>: {Source endpoint name} in {Source Service name} to {Dest endpoint name} in {Dest service name}</li>
</ul>
<h2 id="rules">Rules</h2>
<p>An alerting rule is made up of the following elements:</p>
<ul>
<li><strong>Rule name</strong>. A unique name shown in the alarm message. It must end with <code>_rule</code>.</li>
<li><strong>Expression</strong>. A <a href="../../../api/metrics-query-expression">MQE</a> expression that defines the conditions of the rule.
The result type must be <code>SINGLE_VALUE</code> and the root operation of the expression must be a <a href="../../../api/metrics-query-expression#compare-operation">Compare Operation</a> which provides <code>1</code>(true) or <code>0</code>(false) result.
When the result is <code>1</code>(true), the alarm will be triggered.
For example, <code>avg(service_resp_time / 1000) &gt; 1</code> is a valid expression to indicate the request latency is slower than 1s. The typical illegal expressions are
<ul>
<li><code>avg(service_resp_time &gt; 1000) + 1</code> expression root doesn&rsquo;t use <code>Compare Operation</code></li>
<li><code>service_resp_time &gt; 1000</code> expression return a <code>TIME_SERIES_VALUES</code> type of values rather than a <code>SINGLE_VALUE</code> value.</li>
</ul>
</li>
</ul>
<p>The metrics names in the expression could be found in the <a href="#list-of-all-potential-metrics-name">list of all potential metrics name</a> doc.</p>
<ul>
<li><strong>Include names</strong>. Entity names that are included in this rule. Please follow the <a href="#entity-name">entity name definitions</a>.</li>
<li><strong>Exclude names</strong>. Entity names that are excluded from this rule. Please follow the <a href="#entity-name">entity name definitions</a>.</li>
<li><strong>Include names regex</strong>. A regex that includes entity names. If both include-name list and include-name regex are set, both rules will take effect.</li>
<li><strong>Exclude names regex</strong>. A regex that excludes entity names. Both rules will take effect if both include-label list and include-label regex are set.</li>
<li><strong>Tags</strong>. Tags are key/value pairs that are attached to alarms. Tags are used to specify distinguishing attributes of alarms that are meaningful and relevant to users. If you want to make these tags searchable on the SkyWalking UI, you may set the tag keys in <code>core/default/searchableAlarmTags</code> or through the system environment variable <code>SW_SEARCHABLE_ALARM_TAG_KEYS</code>. The key <code>level</code> is supported by default.</li>
<li><strong>Period</strong>. The size of metrics cache in minutes for checking the alarm conditions. This is a time window that corresponds to the backend deployment env time.</li>
<li><strong>Hooks</strong>. Binding the specific names of the hooks when the alarm is triggered.
The name format is <code>{hookType}.{hookName}</code> (slack.custom1 e.g.) and must be defined in the <code>hooks</code> section of the <code>alarm-settings.yml</code> file.
If the hook name is not specified, the global hook will be used.</li>
<li><strong>Silence period</strong>. After the alarm is triggered at Time-N (TN), there will be silence during the <strong>TN -&gt; TN + period</strong>.
By default, it works in the same manner as <strong>period</strong>. The same Alarm (having the same ID in the same metrics name) may only be triggered once within a period.</li>
</ul>
<p>Such as for a metric, there is a shifting window as following at T7.</p>
<table>
<thead>
<tr>
<th>T1</th>
<th>T2</th>
<th>T3</th>
<th>T4</th>
<th>T5</th>
<th>T6</th>
<th>T7</th>
</tr>
</thead>
<tbody>
<tr>
<td>Value1</td>
<td>Value2</td>
<td>Value3</td>
<td>Value4</td>
<td>Value5</td>
<td>Value6</td>
<td>Value7</td>
</tr>
</tbody>
</table>
<ul>
<li><code>Period</code>(Time point T1 ~ T7) are continuous data points for minutes. Notice, alerts are not supported above minute-by-minute periods as they would not be efficient.</li>
<li>Values(Value1 ~ Value7) are the values or labeled values for every time point.</li>
<li><code>Expression</code> is calculated based on the metric values(Value1 ~ Value7).
For example, expression <code>avg(service_resp_time) &gt; 1000</code>, if the value are <code>1001, 1001, 1001, 1001, 1001, 1001, 1001</code>,
the calculation is <code>((1001 + 10001 + ... + 1001) / 7) &gt; 1000</code> and the result would be <code>1</code>(true). Then the alarm would be triggered.</li>
<li>In every minute, the window would shift automatically. At T8, Value8 would be cached, and T1/Value1 would be removed from the window.</li>
</ul>
<p><strong>NOTE</strong>:</p>
<ul>
<li>If the expression include labeled metrics and result has multiple labeled value(e.g. <code>sum(service_percentile{_='0,1'} &gt; 1000) &gt;= 3</code>), the alarm will be triggered if any of the labeled value result matches 3 times of the condition(P50 &gt; 1000 or P75 &gt; 1000).</li>
<li>One alarm rule is targeting the same entity level, such as service-level expression (<code>avg(service_resp_time) &gt; 1000</code>).
Set entity names(Include/Exclude names&hellip;) according to metrics entity levels,
do not include different entity levels metrics in the same expression, such as service metrics and endpoint metrics.</li>
</ul>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#000080">rules</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#998;font-style:italic"># Rule unique name, must be ended with `_rule`.</span><span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">endpoint_percent_rule</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#998;font-style:italic"># A MQE expression and the root operation of the expression must be a Compare Operation.</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">expression</span>:<span style="color:#bbb"> </span>sum((endpoint_sla / 100) &lt; 75) &gt;= 3<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#998;font-style:italic"># The length of time to evaluate the metrics</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">period</span>:<span style="color:#bbb"> </span><span style="color:#099">10</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#998;font-style:italic"># How many times of checks, the alarm keeps silence after alarm triggered, default as same as period.</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">silence-period</span>:<span style="color:#bbb"> </span><span style="color:#099">10</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">message</span>:<span style="color:#bbb"> </span>Successful rate of endpoint {name} is lower than 75%<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">tags</span>:<span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#000080">level</span>:<span style="color:#bbb"> </span>WARNING<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">service_percent_rule</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">expression</span>:<span style="color:#bbb"> </span>sum((service_sla / 100) &lt; 85) &gt;= 4<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#998;font-style:italic"># [Optional] Default, match all services in this metrics</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">include-names</span>:<span style="color:#bbb">
</span><span style="color:#bbb">      </span>- service_a<span style="color:#bbb">
</span><span style="color:#bbb">      </span>- service_b<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">exclude-names</span>:<span style="color:#bbb">
</span><span style="color:#bbb">      </span>- service_c<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">period</span>:<span style="color:#bbb"> </span><span style="color:#099">10</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">message</span>:<span style="color:#bbb"> </span>Service {name} successful rate is less than 85%<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">service_resp_time_percentile_rule</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">expression</span>:<span style="color:#bbb"> </span>sum(service_percentile{_=&#39;0,1,2,3,4&#39;} &gt; 1000) &gt;= 3<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">period</span>:<span style="color:#bbb"> </span><span style="color:#099">10</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">silence-period</span>:<span style="color:#bbb"> </span><span style="color:#099">5</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">message</span>:<span style="color:#bbb"> </span>Percentile response time of service {name} alarm in 3 minutes of last 10 minutes, due to more than one condition of p50 &gt; 1000, p75 &gt; 1000, p90 &gt; 1000, p95 &gt; 1000, p99 &gt; 1000<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">meter_service_status_code_rule</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">expression</span>:<span style="color:#bbb"> </span>sum(aggregate_labels(meter_status_code{_=&#39;4xx,5xx&#39;},sum) &gt; 10) &gt; 3<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">period</span>:<span style="color:#bbb"> </span><span style="color:#099">10</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">count</span>:<span style="color:#bbb"> </span><span style="color:#099">3</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">silence-period</span>:<span style="color:#bbb"> </span><span style="color:#099">5</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">message</span>:<span style="color:#bbb"> </span>The request number of entity {name} 4xx and 5xx status is more than expected.<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">hooks</span>:<span style="color:#bbb">
</span><span style="color:#bbb">      </span>- <span style="color:#d14">&#34;slack.custom1&#34;</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- <span style="color:#d14">&#34;pagerduty.custom1&#34;</span><span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">comp_rule</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">expression</span>:<span style="color:#bbb"> </span>(avg(service_sla / 100) &gt; 80) * (avg(service_percentile{_=&#39;0&#39;}) &gt; 1000) == 1<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">period</span>:<span style="color:#bbb"> </span><span style="color:#099">10</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">message</span>:<span style="color:#bbb"> </span>Service {name} avg successful rate is less than 80% and P50 of avg response time is over 1000ms in last 10 minutes.<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">tags</span>:<span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#000080">level</span>:<span style="color:#bbb"> </span>CRITICAL<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">hooks</span>:<span style="color:#bbb">
</span><span style="color:#bbb">      </span>- <span style="color:#d14">&#34;slack.default&#34;</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- <span style="color:#d14">&#34;slack.custom1&#34;</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- <span style="color:#d14">&#34;pagerduty.custom1&#34;</span><span style="color:#bbb">
</span></code></pre></div><h3 id="default-alarm-rules">Default alarm rules</h3>
<p>For convenience&rsquo;s sake, we have provided a default <code>alarm-setting.yml</code> in our release. It includes the following rules:</p>
<ol>
<li>Service average response time over 1s in the last 3 minutes.</li>
<li>Service success rate lower than 80% in the last 2 minutes.</li>
<li>Percentile of service response time over 1s in the last 3 minutes</li>
<li>Service Instance average response time over 1s in the last 2 minutes, and the instance name matches the regex.</li>
<li>Endpoint average response time over 1s in the last 2 minutes.</li>
<li>Database access average response time over 1s in the last 2 minutes.</li>
<li>Endpoint relation average response time over 1s in the last 2 minutes.</li>
</ol>
<h3 id="list-of-all-potential-metrics-name">List of all potential metrics name</h3>
<p>The metrics names are defined in the official <a href="../../../guides/backend-oal-scripts">OAL scripts</a> and <a href="../../../concepts-and-designs/mal">MAL scripts</a>.</p>
<p>Currently, metrics from the <strong>Service</strong>, <strong>Service Instance</strong>, <strong>Endpoint</strong>, <strong>Service Relation</strong>, <strong>Service Instance Relation</strong>, <strong>Endpoint Relation</strong> scopes could be used in Alarm, and the <strong>Database access</strong> scope is the same as <strong>Service</strong>.</p>
<p>Submit an issue or a pull request if you want to support any other scopes in Alarm.</p>
<h2 id="hooks">Hooks</h2>
<p>Hooks are a way to send alarm messages to the outside world. SkyWalking supports multiple hooks of the same type, each hook can support different configurations.
For example, you can configure two Slack hooks, one named <code>default</code> and set <code>is-default: true</code> means this hook will apply on all <code>Alarm Rules</code> <strong>without config</strong> <code>hooks</code>.
Another named <code>custom1</code> will only apply on the <code>Alarm Rules</code> which <strong>with config</strong> <code>hooks</code> and include the name <code>slack.custom1</code>.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#000080">hooks</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">slack</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#998;font-style:italic"># default here is just a name, set the field &#39;is-default: true&#39; if this notification hook is expected to be default globally.</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">default</span>:<span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#998;font-style:italic"># If true, this hook will apply on all rules, unless a rule has its own specific hook. Could have more than one default hooks in the same hook type.</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#000080">is-default</span>:<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">true</span><span style="color:#bbb"> 
</span><span style="color:#bbb">      </span><span style="color:#000080">text-template</span>:<span style="color:#bbb"> </span>|-<span style="color:#d14">
</span><span style="color:#d14">        {
</span><span style="color:#d14">          &#34;type&#34;: &#34;section&#34;,
</span><span style="color:#d14">          &#34;text&#34;: {
</span><span style="color:#d14">            &#34;type&#34;: &#34;mrkdwn&#34;,
</span><span style="color:#d14">            &#34;text&#34;: &#34;:alarm_clock: *Apache Skywalking Alarm* \n **%s**.&#34;
</span><span style="color:#d14">          }
</span><span style="color:#d14">        }</span><span style="color:#bbb">        
</span><span style="color:#bbb">      </span><span style="color:#000080">webhooks</span>:<span style="color:#bbb">
</span><span style="color:#bbb">        </span>- https://hooks.slack.com/services/x/y/zssss<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">custom1</span>:<span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#000080">text-template</span>:<span style="color:#bbb"> </span>|-<span style="color:#d14">
</span><span style="color:#d14">        {
</span><span style="color:#d14">          &#34;type&#34;: &#34;section&#34;,
</span><span style="color:#d14">          &#34;text&#34;: {
</span><span style="color:#d14">            &#34;type&#34;: &#34;mrkdwn&#34;,
</span><span style="color:#d14">            &#34;text&#34;: &#34;:alarm_clock: *Apache Skywalking Alarm* \n **%s**.&#34;
</span><span style="color:#d14">          }
</span><span style="color:#d14">        }</span><span style="color:#bbb">        
</span><span style="color:#bbb">      </span><span style="color:#000080">webhooks</span>:<span style="color:#bbb">
</span><span style="color:#bbb">        </span>- https://hooks.slack.com/services/x/y/custom1<span style="color:#bbb">
</span></code></pre></div><p>Currently, SkyWalking supports the following hook types:</p>
<h3 id="webhook">Webhook</h3>
<p>The Webhook requires the peer to be a web container. The alarm message will be sent through HTTP post by <code>application/json</code> content type. The JSON format is based on <code>List&lt;org.apache.skywalking.oap.server.core.alarm.AlarmMessage&gt;</code> with the following key information:</p>
<ul>
<li><strong>scopeId</strong>, <strong>scope</strong>. All scopes are defined in <code>org.apache.skywalking.oap.server.core.source.DefaultScopeDefine</code>.</li>
<li><strong>name</strong>. Target scope entity name. Please follow the <a href="#entity-name">entity name definitions</a>.</li>
<li><strong>id0</strong>. The ID of the scope entity that matches with the name. When using the relation scope, it is the source entity ID.</li>
<li><strong>id1</strong>. When using the relation scope, it is the destination entity ID. Otherwise, it is empty.</li>
<li><strong>ruleName</strong>. The rule name configured in <code>alarm-settings.yml</code>.</li>
<li><strong>alarmMessage</strong>. The alarm text message.</li>
<li><strong>startTime</strong>. The alarm time measured in milliseconds, which occurs between the current time and the midnight of January 1, 1970 UTC.</li>
<li><strong>tags</strong>. The tags configured in <code>alarm-settings.yml</code>.</li>
</ul>
<p>See the following example:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">[{
  <span style="color:#000080">&#34;scopeId&#34;</span>: <span style="color:#099">1</span>, 
  <span style="color:#000080">&#34;scope&#34;</span>: <span style="color:#d14">&#34;SERVICE&#34;</span>,
  <span style="color:#000080">&#34;name&#34;</span>: <span style="color:#d14">&#34;serviceA&#34;</span>, 
  <span style="color:#000080">&#34;id0&#34;</span>: <span style="color:#d14">&#34;12&#34;</span>,  
  <span style="color:#000080">&#34;id1&#34;</span>: <span style="color:#d14">&#34;&#34;</span>,  
    <span style="color:#000080">&#34;ruleName&#34;</span>: <span style="color:#d14">&#34;service_resp_time_rule&#34;</span>,
  <span style="color:#000080">&#34;alarmMessage&#34;</span>: <span style="color:#d14">&#34;alarmMessage xxxx&#34;</span>,
  <span style="color:#000080">&#34;startTime&#34;</span>: <span style="color:#099">1560524171000</span>,
    <span style="color:#000080">&#34;tags&#34;</span>: [{
        <span style="color:#000080">&#34;key&#34;</span>: <span style="color:#d14">&#34;level&#34;</span>,
        <span style="color:#000080">&#34;value&#34;</span>: <span style="color:#d14">&#34;WARNING&#34;</span>
     }]
}, {
  <span style="color:#000080">&#34;scopeId&#34;</span>: <span style="color:#099">1</span>,
  <span style="color:#000080">&#34;scope&#34;</span>: <span style="color:#d14">&#34;SERVICE&#34;</span>,
  <span style="color:#000080">&#34;name&#34;</span>: <span style="color:#d14">&#34;serviceB&#34;</span>,
  <span style="color:#000080">&#34;id0&#34;</span>: <span style="color:#d14">&#34;23&#34;</span>,
  <span style="color:#000080">&#34;id1&#34;</span>: <span style="color:#d14">&#34;&#34;</span>,
    <span style="color:#000080">&#34;ruleName&#34;</span>: <span style="color:#d14">&#34;service_resp_time_rule&#34;</span>,
  <span style="color:#000080">&#34;alarmMessage&#34;</span>: <span style="color:#d14">&#34;alarmMessage yyy&#34;</span>,
  <span style="color:#000080">&#34;startTime&#34;</span>: <span style="color:#099">1560524171000</span>,
    <span style="color:#000080">&#34;tags&#34;</span>: [{
        <span style="color:#000080">&#34;key&#34;</span>: <span style="color:#d14">&#34;level&#34;</span>,
        <span style="color:#000080">&#34;value&#34;</span>: <span style="color:#d14">&#34;CRITICAL&#34;</span>
    }]
}]
</code></pre></div><h3 id="grpc">gRPC</h3>
<p>The alarm message will be sent through remote gRPC method by <code>Protobuf</code> content type.
The message contains key information which are defined in <code>oap-server/server-alarm-plugin/src/main/proto/alarm-hook.proto</code>.</p>
<p>Part of the protocol looks like this:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-protobuf" data-lang="protobuf"><span style="color:#000;font-weight:bold">message</span> <span style="color:#458;font-weight:bold">AlarmMessage</span> {<span style="color:#a61717;background-color:#e3d2d2">
</span><span style="color:#a61717;background-color:#e3d2d2"></span>    <span style="color:#458;font-weight:bold">int64</span> scopeId <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">1</span>;<span style="color:#a61717;background-color:#e3d2d2">
</span><span style="color:#a61717;background-color:#e3d2d2"></span>    <span style="color:#458;font-weight:bold">string</span> scope <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">2</span>;<span style="color:#a61717;background-color:#e3d2d2">
</span><span style="color:#a61717;background-color:#e3d2d2"></span>    <span style="color:#458;font-weight:bold">string</span> name <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">3</span>;<span style="color:#a61717;background-color:#e3d2d2">
</span><span style="color:#a61717;background-color:#e3d2d2"></span>    <span style="color:#458;font-weight:bold">string</span> id0 <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">4</span>;<span style="color:#a61717;background-color:#e3d2d2">
</span><span style="color:#a61717;background-color:#e3d2d2"></span>    <span style="color:#458;font-weight:bold">string</span> id1 <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">5</span>;<span style="color:#a61717;background-color:#e3d2d2">
</span><span style="color:#a61717;background-color:#e3d2d2"></span>    <span style="color:#458;font-weight:bold">string</span> ruleName <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">6</span>;<span style="color:#a61717;background-color:#e3d2d2">
</span><span style="color:#a61717;background-color:#e3d2d2"></span>    <span style="color:#458;font-weight:bold">string</span> alarmMessage <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">7</span>;<span style="color:#a61717;background-color:#e3d2d2">
</span><span style="color:#a61717;background-color:#e3d2d2"></span>    <span style="color:#458;font-weight:bold">int64</span> startTime <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">8</span>;<span style="color:#a61717;background-color:#e3d2d2">
</span><span style="color:#a61717;background-color:#e3d2d2"></span>    AlarmTags tags <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">9</span>;<span style="color:#a61717;background-color:#e3d2d2">
</span><span style="color:#a61717;background-color:#e3d2d2"></span>}<span style="color:#a61717;background-color:#e3d2d2">
</span><span style="color:#a61717;background-color:#e3d2d2">
</span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#000;font-weight:bold">message</span> <span style="color:#458;font-weight:bold">AlarmTags</span> {<span style="color:#a61717;background-color:#e3d2d2">
</span><span style="color:#a61717;background-color:#e3d2d2"></span>    <span style="color:#998;font-style:italic">// String key, String value pair.
</span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">repeated</span> KeyStringValuePair data <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">1</span>;<span style="color:#a61717;background-color:#e3d2d2">
</span><span style="color:#a61717;background-color:#e3d2d2"></span>}<span style="color:#a61717;background-color:#e3d2d2">
</span><span style="color:#a61717;background-color:#e3d2d2">
</span><span style="color:#a61717;background-color:#e3d2d2"></span><span style="color:#000;font-weight:bold">message</span> <span style="color:#458;font-weight:bold">KeyStringValuePair</span> {<span style="color:#a61717;background-color:#e3d2d2">
</span><span style="color:#a61717;background-color:#e3d2d2"></span>    <span style="color:#458;font-weight:bold">string</span> key <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">1</span>;<span style="color:#a61717;background-color:#e3d2d2">
</span><span style="color:#a61717;background-color:#e3d2d2"></span>    <span style="color:#458;font-weight:bold">string</span> value <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">2</span>;<span style="color:#a61717;background-color:#e3d2d2">
</span><span style="color:#a61717;background-color:#e3d2d2"></span>}<span style="color:#a61717;background-color:#e3d2d2">
</span></code></pre></div><h3 id="slack-chat">Slack Chat</h3>
<p>Follow the <a href="https://api.slack.com/messaging/webhooks">Getting Started with Incoming Webhooks guide</a> and create new Webhooks.</p>
<p>The alarm message will be sent through HTTP post by <code>application/json</code> content type if you have configured Slack Incoming Webhooks as follows:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yml" data-lang="yml"><span style="color:#000080">slack</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">default</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">is-default</span>:<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">true</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">text-template</span>:<span style="color:#bbb"> </span>|-<span style="color:#d14">
</span><span style="color:#d14">      {
</span><span style="color:#d14">        &#34;type&#34;: &#34;section&#34;,
</span><span style="color:#d14">        &#34;text&#34;: {
</span><span style="color:#d14">          &#34;type&#34;: &#34;mrkdwn&#34;,
</span><span style="color:#d14">          &#34;text&#34;: &#34;:alarm_clock: *Apache Skywalking Alarm* \n **%s**.&#34;
</span><span style="color:#d14">        }
</span><span style="color:#d14">      }</span><span style="color:#bbb">      
</span><span style="color:#bbb">    </span><span style="color:#000080">webhooks</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span>- https://hooks.slack.com/services/x/y/z<span style="color:#bbb">
</span></code></pre></div><h3 id="wechat">WeChat</h3>
<p>Note that only the WeChat Company Edition (WeCom) supports WebHooks. To use the WeChat WebHook, follow the <a href="https://work.weixin.qq.com/help?doc_id=13376">Wechat Webhooks guide</a>.
The alarm message will be sent through HTTP post by <code>application/json</code> content type after you have set up Wechat Webhooks as follows:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yml" data-lang="yml"><span style="color:#000080">wechat</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">default</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">is-default</span>:<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">true</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">text-template</span>:<span style="color:#bbb"> </span>|-<span style="color:#d14">
</span><span style="color:#d14">      {
</span><span style="color:#d14">        &#34;msgtype&#34;: &#34;text&#34;,
</span><span style="color:#d14">        &#34;text&#34;: {
</span><span style="color:#d14">          &#34;content&#34;: &#34;Apache SkyWalking Alarm: \n %s.&#34;
</span><span style="color:#d14">        }
</span><span style="color:#d14">      }</span><span style="color:#bbb">      
</span><span style="color:#bbb">    </span><span style="color:#000080">webhooks</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span>- https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=dummy_key<span style="color:#bbb">
</span></code></pre></div><h3 id="dingtalk">DingTalk</h3>
<p>Follow the <a href="https://ding-doc.dingtalk.com/doc#/serverapi2/qf2nxq/uKPlK">Dingtalk Webhooks guide</a> and create new Webhooks.
You can configure an optional secret for an individual webhook URL for security purposes.
The alarm message will be sent through HTTP post by <code>application/json</code> content type if you have configured DingTalk Webhooks as follows:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yml" data-lang="yml"><span style="color:#000080">dingtalk</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">default</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">is-default</span>:<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">true</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">text-template</span>:<span style="color:#bbb"> </span>|-<span style="color:#d14">
</span><span style="color:#d14">      {
</span><span style="color:#d14">        &#34;msgtype&#34;: &#34;text&#34;,
</span><span style="color:#d14">        &#34;text&#34;: {
</span><span style="color:#d14">          &#34;content&#34;: &#34;Apache SkyWalking Alarm: \n %s.&#34;
</span><span style="color:#d14">        }
</span><span style="color:#d14">      }</span><span style="color:#bbb">      
</span><span style="color:#bbb">    </span><span style="color:#000080">webhooks</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span>- <span style="color:#000080">url</span>:<span style="color:#bbb"> </span>https://oapi.dingtalk.com/robot/send?access_token=dummy_token<span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#000080">secret</span>:<span style="color:#bbb"> </span>dummysecret<span style="color:#bbb">
</span></code></pre></div><h3 id="feishu">Feishu</h3>
<p>Follow the <a href="https://www.feishu.cn/hc/zh-cn/articles/360024984973">Feishu Webhooks guide</a> and create new Webhooks.
You can configure an optional secret for an individual webhook URL for security purposes.
If you want to direct a text to a user, you can configure <code>ats</code>, which is Feishu&rsquo;s user_id and separated by &ldquo;,&rdquo; .
The alarm message will be sent through HTTP post by <code>application/json</code> content type if you have configured Feishu Webhooks as follows:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yml" data-lang="yml"><span style="color:#000080">feishu</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">default</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">is-default</span>:<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">true</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">text-template</span>:<span style="color:#bbb"> </span>|-<span style="color:#d14">
</span><span style="color:#d14">      {
</span><span style="color:#d14">        &#34;msg_type&#34;: &#34;text&#34;,
</span><span style="color:#d14">        &#34;content&#34;: {
</span><span style="color:#d14">          &#34;text&#34;: &#34;Apache SkyWalking Alarm: \n %s.&#34;
</span><span style="color:#d14">        },
</span><span style="color:#d14">        &#34;ats&#34;:&#34;feishu_user_id_1,feishu_user_id_2&#34;
</span><span style="color:#d14">      }</span><span style="color:#bbb">      
</span><span style="color:#bbb">    </span><span style="color:#000080">webhooks</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span>- <span style="color:#000080">url</span>:<span style="color:#bbb"> </span>https://open.feishu.cn/open-apis/bot/v2/hook/dummy_token<span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#000080">secret</span>:<span style="color:#bbb"> </span>dummysecret<span style="color:#bbb">
</span></code></pre></div><h3 id="welink">WeLink</h3>
<p>Follow the <a href="https://open.welink.huaweicloud.com/apiexplorer/#/apiexplorer?type=internal&amp;method=POST&amp;path=/welinkim/v1/im-service/chat/group-chat">WeLink Webhooks guide</a> and create new Webhooks.
The alarm message will be sent through HTTP post by <code>application/json</code> content type if you have configured WeLink Webhooks as follows:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yml" data-lang="yml"><span style="color:#000080">welink</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">default</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">is-default</span>:<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">true</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">text-template</span>:<span style="color:#bbb"> </span><span style="color:#d14">&#34;Apache SkyWalking Alarm: \n %s.&#34;</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">webhooks</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#998;font-style:italic"># you may find your own client_id and client_secret in your app, below are dummy, need to change.</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span>- <span style="color:#000080">client-id</span>:<span style="color:#bbb"> </span><span style="color:#d14">&#34;dummy_client_id&#34;</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#000080">client-secret</span>:<span style="color:#bbb"> </span>dummy_secret_key<span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#000080">access-token-url</span>:<span style="color:#bbb"> </span>https://open.welink.huaweicloud.com/api/auth/v2/tickets<span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#000080">message-url</span>:<span style="color:#bbb"> </span>https://open.welink.huaweicloud.com/api/welinkim/v1/im-service/chat/group-chat<span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#998;font-style:italic"># if you send to multi group at a time, separate group_ids with commas, e.g. &#34;123xx&#34;,&#34;456xx&#34;</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#000080">group-ids</span>:<span style="color:#bbb"> </span><span style="color:#d14">&#34;dummy_group_id&#34;</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#998;font-style:italic"># make a name you like for the robot, it will display in group</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#000080">robot-name</span>:<span style="color:#bbb"> </span>robot<span style="color:#bbb">
</span></code></pre></div><h3 id="pagerduty">PagerDuty</h3>
<p>The PagerDuty hook is based on <a href="https://developer.pagerduty.com/docs/ZG9jOjExMDI5NTgw-events-api-v2-overview">Events API v2</a>.</p>
<p>Follow the <a href="https://developer.pagerduty.com/docs/ZG9jOjExMDI5NTgw-events-api-v2-overview#getting-started">Getting Started</a> section to create an <strong>Events API v2</strong> integration on your PagerDuty service and copy the integration key.</p>
<p>Then configure as follows:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yml" data-lang="yml"><span style="color:#000080">pagerduty</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">default</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">is-default</span>:<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">true</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">text-template</span>:<span style="color:#bbb"> </span><span style="color:#d14">&#34;Apache SkyWalking Alarm: \n %s.&#34;</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">integration-keys</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span>- 5c6d805c9dcf4e03d09dfa81e8789ba1<span style="color:#bbb">
</span></code></pre></div><p>You can also configure multiple integration keys.</p>
<h3 id="discord">Discord</h3>
<p>Follow the <a href="https://support.discord.com/hc/en-us/articles/228383668-Intro-to-Webhooks">Discord Webhooks guide</a> and create a new webhook.</p>
<p>Then configure as follows:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yml" data-lang="yml"><span style="color:#000080">discord</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000080">default</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">is-default</span>:<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">true</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">text-template</span>:<span style="color:#bbb"> </span><span style="color:#d14">&#34;Apache SkyWalking Alarm: \n %s.&#34;</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000080">webhooks</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span>- <span style="color:#000080">url</span>:<span style="color:#bbb"> </span>https://discordapp.com/api/webhooks/1008166889777414645/8e0Am4Zb-YGbBqqbiiq0jSHPTEEaHa4j1vIC-zSSm231T8ewGxgY0_XUYpY-k1nN4HBl<span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#000080">username</span>:<span style="color:#bbb"> </span>robot<span style="color:#bbb">
</span></code></pre></div><h2 id="update-the-settings-dynamically">Update the settings dynamically</h2>
<p>Since 6.5.0, the alerting settings can be updated dynamically at runtime by <a href="../dynamic-config">Dynamic Configuration</a>,
which will override the settings in <code>alarm-settings.yml</code>.</p>
<p>In order to determine whether an alerting rule is triggered or not, SkyWalking needs to cache the metrics of a time window for
each alerting rule. If any attribute (<code>expression</code>, <code>period</code>, etc.) of a rule is changed,
the sliding window will be destroyed and re-created, causing the Alarm of this specific rule to restart again.</p>
<h3 id="keys-with-data-types-of-alerting-rule-configuration-file">Keys with data types of alerting rule configuration file</h3>
<table>
<thead>
<tr>
<th>Alerting element</th>
<th>Configuration property key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Expression</td>
<td>expression</td>
<td>string</td>
<td>MQE expression</td>
</tr>
<tr>
<td>Include names</td>
<td>include-names</td>
<td>string array</td>
<td></td>
</tr>
<tr>
<td>Exclude names</td>
<td>exclude-names</td>
<td>string array</td>
<td></td>
</tr>
<tr>
<td>Include names regex</td>
<td>include-names-regex</td>
<td>string</td>
<td>Java regex Pattern</td>
</tr>
<tr>
<td>Exclude names regex</td>
<td>exclude-names-regex</td>
<td>string</td>
<td>Java regex Pattern</td>
</tr>
<tr>
<td>Tags</td>
<td>tags</td>
<td>key-value pair</td>
<td></td>
</tr>
<tr>
<td>Period</td>
<td>Period</td>
<td>int</td>
<td></td>
</tr>
<tr>
<td>Silence period</td>
<td>silence-period</td>
<td>int</td>
<td></td>
</tr>
<tr>
<td>Message</td>
<td>message</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>Hooks</td>
<td>hooks</td>
<td>string array</td>
<td></td>
</tr>
</tbody>
</table>




</div>


            </main>
          <div id="toc" class="d-none d-xl-block col-xl-2 td-toc d-print-none">
            




<div class="td-page-meta ml-2 pb-1 pt-2 mb-0">











</div>






<nav id="TableOfContents">
  <ul>
    <li><a href="#alerting">Alerting</a>
      <ul>
        <li><a href="#entity-name">Entity name</a></li>
        <li><a href="#rules">Rules</a>
          <ul>
            <li><a href="#default-alarm-rules">Default alarm rules</a></li>
            <li><a href="#list-of-all-potential-metrics-name">List of all potential metrics name</a></li>
          </ul>
        </li>
        <li><a href="#hooks">Hooks</a>
          <ul>
            <li><a href="#webhook">Webhook</a></li>
            <li><a href="#grpc">gRPC</a></li>
            <li><a href="#slack-chat">Slack Chat</a></li>
            <li><a href="#wechat">WeChat</a></li>
            <li><a href="#dingtalk">DingTalk</a></li>
            <li><a href="#feishu">Feishu</a></li>
            <li><a href="#welink">WeLink</a></li>
            <li><a href="#pagerduty">PagerDuty</a></li>
            <li><a href="#discord">Discord</a></li>
          </ul>
        </li>
        <li><a href="#update-the-settings-dynamically">Update the settings dynamically</a>
          <ul>
            <li><a href="#keys-with-data-types-of-alerting-rule-configuration-file">Keys with data types of alerting rule configuration file</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>




<script>
  $(function () {
    var $toc = $("#TableOfContents");
    if (!$toc || !$toc.length) {
      return;
    }
    var top = $toc.offset().top;
    $(window).on("scroll", debounce(setTop, 100))
    $(window).on("scroll", debounce(addActive, 30))

    function addActive() {
      var scrollValue = $(window).scrollTop();
      var topEle = null;
      $.each($('main h1, main h2, main h3'), function (index, item) {
        if ($(item).offset().top - 70 > scrollValue) {
          return
        }
        if (!topEle) {
          topEle = item
        } else if ($(item).offset().top >= $(topEle).offset().top) {
          topEle = item
        }
        if (topEle) {
          var id = $(item).attr('id');
          $toc.find('a').removeClass("active").end().find('a[href="' + '#' + id + '"]').addClass("active")
        }
      })
    }

    function setTop() {
      var scrollValue = $(window).scrollTop();
      if (scrollValue >= top - 70) {
        $toc.addClass('fixed')
      } else {
        $toc.removeClass('fixed')
      }
    }

    function debounce(fn, wait) {
      var timeout = null;
      return function () {
        clearTimeout(timeout);
        timeout = setTimeout(() => {
          fn.apply(this, arguments);
        }, wait);
      };
    }
  })

</script>

          </div>

        </div>
      </div>

      
<footer class="py-5 sky-row">
  <div class="container-fluid text-center">
    <div class="">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Twitter" aria-label="Twitter">
    <a class="text-color" target="_blank" href="https://twitter.com/asfskywalking">
      <i class="iconfont icon-twitter"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Slack" aria-label="Slack">
    <a class="text-color" target="_blank" href="http://s.apache.org/slack-invite">
      <i class="iconfont icon-slack"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Mailing list" aria-label="Mailing list">
    <a class="text-color" target="_blank" href="https://lists.apache.org/list.html?dev@skywalking.apache.org">
      <i class="iconfont icon-email"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-color" target="_blank" href="https://github.com/apache/skywalking">
      <i class="iconfont icon-github"></i>
    </a>
  </li>
  
</ul>

        
        
    </div>
    <div class="">

        <small class="text-color">&copy; 2017 - 2024 The Apache Software Foundation All Rights Reserved</small>
        
	
    </div>
    <div class="">
      <small class="text-color mt-4">Apache SkyWalking, SkyWalking, Apache, the Apache feather logo, and the Apache SkyWalking project logo are either registered trademarks or trademarks of the Apache Software Foundation.</small>
    </div>
  </div>
</footer>


    </div>
    





























































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































    
<div id="popup">
    <div class="mask">
        <img src=""/>
    </div>
</div>

    <div class="sidebar-mask"></div>
<div class="sidebar">
    <nav class="nav-links">
        <div class="nav-item"><a href="/docs/" class="nav-link">Projects and Documentation</a></div>
        <div class="nav-item"><a href="/events/" class="nav-link">Events</a></div>
        <div class="nav-item"><a href="/blog/" class="nav-link router-link-exact-active router-link-active">Blog</a>
        </div>
        <div class="nav-item"><a href="/downloads/" class="nav-link">Downloads</a></div>
        <div class="nav-item"><a href="/team/" class="nav-link">Team</a></div>
        <div class="nav-item"><a href="/users/" class="nav-link">Users</a></div>
        <div class="nav-item">
            <div class="dropdown-wrapper open">
                <a class="dropdown-title"><span>中文资料</span>
                    <span class="arrow down"></span>
                </a>
                <ul class="nav-dropdown">
                    <li class="dropdown-item">
                        <a href="/zh/" class="nav-link external">博客</a>
                    </li>
                    <li class="dropdown-item">
                        <a href="https://space.bilibili.com/390683219" target="_blank"
                           rel="noopener noreferrer" class="nav-link external">B站</a>
                    </li>
                    <li class="dropdown-item">
                        <a href="https://juejin.cn/user/13673577331607" target="_blank"
                           rel="noopener noreferrer" class="nav-link external">掘金</a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="nav-item">
            <div class="dropdown-wrapper open">
                <a class="dropdown-title">
                    <span>Links</span>
                    <span class="arrow down"></span>
                </a>
                <ul class="nav-dropdown">
                    <li class="dropdown-item">
                        <a href="http://www.apache.org/" target="_blank"
                           rel="noopener noreferrer" class="nav-link external">
                            Apache Software Foundation
                        </a>
                    </li>
                    <li class="dropdown-item">
                        <a href="https://github.com/apache/skywalking/issues"
                           target="_blank" rel="noopener noreferrer"
                           class="nav-link external">
                            GitHub Issue Tracker
                        </a>
                    </li>
                    <li class="dropdown-item">
                        <a href="https://lists.apache.org/list.html?dev@skywalking.apache.org" target="_blank"
                           rel="noopener noreferrer" class="nav-link external">
                            Dev Mailing List
                        </a>
                    </li>
                    <li class="dropdown-item">
                        <a href="http://www.apache.org/licenses/" target="_blank"
                           rel="noopener noreferrer" class="nav-link external">
                            License
                        </a>
                    </li>
                    <li class="dropdown-item">
                        <a href="http://www.apache.org/events/current-event"
                           target="_blank" rel="noopener noreferrer"
                           class="nav-link external">
                            Apache Events
                        </a>
                    </li>
                    <li class="dropdown-item">
                        <a href="http://www.apache.org/security/" target="_blank"
                           rel="noopener noreferrer" class="nav-link external">
                            Security
                        </a>
                    </li>
                    <li class="dropdown-item">
                        <a href="http://www.apache.org/foundation/sponsorship.html"
                           target="_blank" rel="noopener noreferrer"
                           class="nav-link external">
                            Sponsorship and Donate
                        </a>
                    </li>
                    <li class="dropdown-item">
                        <a href="http://www.apache.org/foundation/thanks.html"
                           target="_blank" rel="noopener noreferrer"
                           class="nav-link external">
                            Thanks
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</div>

    <script src="/js/bootstrap.bundle.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>









<script src="/js/main.min.dc00f5ca911ee5aa105ea6de6b3b7e8d8169ba5a3bf156b1fcfe23dfe3e62b0a.js" integrity="sha256-3AD1ypEe5aoQXqbeazt&#43;jYFpulo78Vax/P4j3&#43;PmKwo=" crossorigin="anonymous"></script>


<script src="/js/mermaid.min.js"></script>
<script>
    window.onload = () => mermaid.init(undefined, ".language-mermaid");
</script>


<script defer
src="https://widget.kapa.ai/kapa-widget.bundle.js"
data-website-id="8a08392b-9c4d-4816-8bc4-f93e0ecdd2a7"
data-project-name="SkyWalking"
data-project-color="#2B74B8"
data-button-text="Ask AI"
data-search-mode-enabled="true"
data-modal-open-on-command-k="true"
data-modal-disclaimer="The AI supports multiple languages, but it may not be accessible in China, a proxy is required."
data-project-logo="https://miro.medium.com/v2/resize:fit:2400/0*kmS-5BQ8ShAhZ_F4.jpg"
data-modal-example-questions="What is Apache SkyWalking?,How to deploy SkyWalking?,How to inject agents non-intrusively?,How to setup trace sampling?"
data-button-position-top=""
data-button-position-right="20px"
data-button-position-bottom="200px"
data-button-position-left=""
></script>




  </body>
  <script>
    $(function (){
      $('.doc-menu-button').on('click',function (){
        $('.td-sidebar').toggleClass('active')
      })
      $('.version-select').on('change', function (){
        var selectVersion = $(this).val().toLowerCase();
        var prefix = '';
        var url = location.href.replace(/(\/docs\/[a-zA-Z\-]+\/)([\w|\.]+)(\/.*)/, function (match, p1, p2, p3){
          prefix = p1 + selectVersion;
          return p1 + selectVersion + p3
        })
        go2SelectVersion(url, prefix)

      })
      function go2SelectVersion(url, prefix){
        $.ajax({
          url: url,
          type: "get",
          success:function(){
            location.href = url;
          },
          statusCode: {
            404:function(){
              location.href = prefix + '/readme/';
            }
          }
        });
      }
    })
  </script>
</html>
