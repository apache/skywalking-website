<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="twitter:site" content="skywalking.apache.org">
<meta name="twitter:image:src" content="https://skywalking.apache.org/images/skywalking_400x400.png">
<meta property="og:image" content="https://skywalking.apache.org/images/skywalking_400x400.png">

<meta name="generator" content="Hugo 0.80.0" />


<script async src="https://www.googletagmanager.com/gtag/js?id=G-GR8N6PGRJ3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);};
  gtag('js', new Date());gtag('config', 'G-GR8N6PGRJ3');
</script>
<META NAME="ROBOTS" CONTENT="INDEX, FOLLOW">
<link rel="stylesheet" href="//at.alicdn.com/t/c/font_3007530_pvozs1rz2wn.css">



<link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png">
<link rel="manifest" href="/favicons/site.webmanifest">
<link rel="mask-icon" href="/favicons/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">

<title>Tracing APIs | Apache SkyWalking</title><meta property="og:title" content="Tracing APIs" />
<meta property="og:description" content="Tracing APIs Add trace Toolkit toolkit/trace provides the APIs to enhance the trace context, such as createLocalSpan, createExitSpan, createEntrySpan, log, tag, prepareForAsync and asyncFinish. Add the toolkit dependency to your project.
import &#34;github.com/apache/skywalking-go/toolkit/trace&#34; Use Native Tracing Context Carrier The context carrier is used to pass the context between the difference application.
When creating an Entry Span, you need to obtain the context carrier from the request. When creating an Exit Span, you need to write the context carrier into the target RPC request." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/docs/skywalking-go/v0.4.0/en/advanced-features/manual-apis/toolkit-trace/" />

<meta itemprop="name" content="Tracing APIs">
<meta itemprop="description" content="Tracing APIs Add trace Toolkit toolkit/trace provides the APIs to enhance the trace context, such as createLocalSpan, createExitSpan, createEntrySpan, log, tag, prepareForAsync and asyncFinish. Add the toolkit dependency to your project.
import &#34;github.com/apache/skywalking-go/toolkit/trace&#34; Use Native Tracing Context Carrier The context carrier is used to pass the context between the difference application.
When creating an Entry Span, you need to obtain the context carrier from the request. When creating an Exit Span, you need to write the context carrier into the target RPC request.">

<meta itemprop="wordCount" content="556">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Tracing APIs"/>
<meta name="twitter:description" content="Tracing APIs Add trace Toolkit toolkit/trace provides the APIs to enhance the trace context, such as createLocalSpan, createExitSpan, createEntrySpan, log, tag, prepareForAsync and asyncFinish. Add the toolkit dependency to your project.
import &#34;github.com/apache/skywalking-go/toolkit/trace&#34; Use Native Tracing Context Carrier The context carrier is used to pass the context between the difference application.
When creating an Entry Span, you need to obtain the context carrier from the request. When creating an Exit Span, you need to write the context carrier into the target RPC request."/>



<link rel="preload" href="/scss/main.min.592235942cb3c9f3dd697382a4e7a1fad8e1c182dad2841bdce6b43b4a346ae8.css" as="style">
<link href="/scss/main.min.592235942cb3c9f3dd697382a4e7a1fad8e1c182dad2841bdce6b43b4a346ae8.css" rel="stylesheet" integrity="">



<link rel="stylesheet" href="/css/docSearch.css" />


<script src="/js/jquery-3.6.0.min.js"></script>





    <title>Tracing APIs | Apache SkyWalking</title>
  </head>
  <body class="td-page  project-doc">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand  flex-column flex-md-row td-navbar">
    <div class="sidebar-button">
      <i class="iconfont icon-menu"></i>
    </div>
    <a class="navbar-brand" href="/">
        <span class="navbar-logo"><img width="130" src="/images/logo.svg" alt="SkyWalking"></span> 
    </a>
    <div class="td-navbar-nav-scroll navbar-nav-wrapper" id="navigation">
        <ul class="navbar-nav mt-lg-0">
             
            
            
            <li class="nav-item mr-3 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="/docs" ><span>Projects and Docs</span></a>
			</li>
            
            
            
            
            <li class="nav-item mr-3 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="/events" ><span>Events</span></a>
			</li>
            
            
            
            
            <li class="nav-item mr-3 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="/blog" ><span>Blogs</span></a>
			</li>
            
            
            
            
            <li class="nav-item mr-3 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="/downloads" ><span>Downloads</span></a>
			</li>
            
            
            
            
            <li class="nav-item mr-3 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="/team" ><span>Team</span></a>
			</li>
            
            
            
            
            <li class="nav-item mr-3 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="/users" ><span>Users</span></a>
			</li>
            
            
            
            
            
            <li class="nav-item mr-3 mb-lg-0">
                <span class="link dropdown blog">
                    <a class="link-name nav-link dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">中文资料</a>
                    <div class="dropdown-menu">
                        <a class="dropdown-item" href="/zh/">博客</a>
                        <a class="dropdown-item" href="https://space.bilibili.com/390683219" target="_blank" rel="noopener noreferrer">
                            B站
                        </a>
                        <a class="dropdown-item" href="https://juejin.cn/user/13673577331607" target="_blank" rel="noopener noreferrer">
                            掘金
                        </a>
                    </div>
                </span>
            </li>

            
			
        </ul>
    </div>
    <div class="navbar-nav d-none d-lg-block search-input-box">
         
            
        
            
        
            
        
            
        
            
        
            
        
            
            <span class="link dropdown">
                <a class="link-name dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Links
                </a>
                <div class="dropdown-menu">
                    
                    <a class="dropdown-item" href="http://www.apache.org/">Apache Software Foundation</a> 
                    <a class="dropdown-item" href="https://github.com/apache/skywalking/issues">GitHub Issue Tracker</a> 
                    <a class="dropdown-item" href="https://github.com/apache/skywalking/discussions">Discussion</a> 
                    <a class="dropdown-item" href="https://lists.apache.org/list.html?dev@skywalking.apache.org">Dev Mailing List</a> 
                    <a class="dropdown-item" href="https://cwiki.apache.org/confluence/display/SKYWALKING/Home">WIKI</a> 
                    <a class="dropdown-item" href="http://www.apache.org/licenses/">License</a> 
                    <a class="dropdown-item" href="http://www.apache.org/events/current-event">Apache Events</a> 
                    <a class="dropdown-item" href="http://www.apache.org/security/">Security</a> 
                    <a class="dropdown-item" href="http://www.apache.org/foundation/sponsorship.html">Sponsor and Donate</a> 
                    <a class="dropdown-item" href="http://www.apache.org/foundation/thanks.html">Thanks</a> 
                    <a class="dropdown-item" href="https://apache.org/foundation/policies/privacy.html">Privacy</a> 
                </div>
            </span>
            
        
        
<div id="docsearch"></div>


    </div>
</nav>

    </header>
    <div class="container-fluid td-outer">

      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <div class="col-12 col-md-3 col-xl-2 d-print-none scroll-bar td-sidebar">
























                  <div class="description-wrapper">
                    <h5>
                    <img width="26" height="26" src="/images/project/skywalking-go.svg">
                    Go Agent
                    </h5>
                    <p>The Go Agent for Apache SkyWalking, which provides the native tracing/metrics/logging abilities for Golang projects.</p>
                  </div>
                  
                  <div class="version-wrapper">Version: 
                  <select class="version-select">
                  
                    
                    
                    <option ZgotmplZ value="next">
                    
                      next
                    
                    </option>
                  
                    
                    
                    <option ZgotmplZ value="latest">
                    
                      latest
                    
                    </option>
                  
                    
                    
                    <option selected value="v0.4.0">
                    
                      v0.4.0
                    
                    </option>
                  
                  </select>
                  </div>
                  
                  <ul class="sidebar-menu">
    
    <li>
        
            
            <a href="#">Concepts and Designs<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/skywalking-go/v0.4.0/en/concepts-and-designs/hybrid-compilation">Hybrid Compilation</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-go/v0.4.0/en/concepts-and-designs/key-principles">How SkyWalking Agent Works</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-go/v0.4.0/en/concepts-and-designs/project-structure">Project Structure</a>
        
    </li>

    

</ul>

        
    </li>
    
    <li>
        
            
            <a href="#">Setup<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/skywalking-go/v0.4.0/en/setup/gobuild">Quick Start</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-go/v0.4.0/en/setup/docker">Docker</a>
        
    </li>

    

</ul>

        
    </li>
    
    <li>
        
            
            <a href="#">Advanced Features<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/skywalking-go/v0.4.0/en/advanced-features/settings-override">Setting Override</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-go/v0.4.0/en/advanced-features/logging-setup">Logging Setup</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-go/v0.4.0/en/advanced-features/plugin-exclusion">Plugin Exclusion</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-go/v0.4.0/en/agent/plugin-configurations">Plugin Configuration</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-go/v0.4.0/en/advanced-features/grpc-tls">Transport Layer Security (TLS)</a>
        
    </li>

    

    <li>
        

            
            <a href="#">Manual APIs<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/skywalking-go/v0.4.0/en/advanced-features/manual-apis/toolkit-trace">Tracing APIs</a>
        
    </li>

    

</ul>

        
    </li>

    

</ul>

        
    </li>
    
    <li>
        
            
            <a href="#">Plugins<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/skywalking-go/v0.4.0/en/agent/support-plugins">Supported Libraries</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-go/v0.4.0/en/agent/tracing-metrics-logging">Tracing, Metrics and Logging</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-go/v0.4.0/en/agent/performance-tests">Go Agent Performance Test</a>
        
    </li>

    

</ul>

        
    </li>
    
    <li>
        
            
            <a href="#">Development and Contribution<i class="iconfont icon-arrow-right pull-right"></i></a>
            

            
<ul class="sidebar-submenu">
    

    <li>
        
            <a href="/docs/skywalking-go/v0.4.0/en/development-and-contribution/development-guide">Plugin Development Guide</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-go/v0.4.0/en/development-and-contribution/write-plugin-testing">Write Plugin Testing</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-go/v0.4.0/en/development-and-contribution/running-and-debugging">Running And Debugging</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-go/v0.4.0/en/development-and-contribution/build-and-use-agent">Build and Use Agent from source codes</a>
        
    </li>

    

    <li>
        
            <a href="/docs/skywalking-go/v0.4.0/en/development-and-contribution/how-to-release">How to Release</a>
        
    </li>

    

</ul>

        
    </li>
    
</ul>
<script src="/js/sidebar-menu.js"></script>
<script>
  (function (){
    $.sidebarMenu($('.sidebar-menu'))
    var path = window.location.pathname;
    var hash = window.location.hash;
    var $a = $('.sidebar-menu a')
    $a.each(function (e){
      if($(this).attr('href')+'/' === path || $(this).attr('href').replace('#','/#') === path+hash){
        $(this).parents('li').addClass('active').show()
      }
    })
    $a.on('click',function (){
      var url = $(this).attr('href')
      if(url!=='#'){
        window.location.href = url
      }
    })
  })()
</script>

                  <div class="commit-id">Commit Id: 6426060</div>
                



















</div>
            <main class="col-12 col-md-9 col-xl-8 pl-md-5 pr-md-4" role="main">
              <i class="iconfont icon-menu-doc doc-menu-button"></i>
              
<div class="td-content">











	<h1 id="tracing-apis">Tracing APIs</h1>
<h2 id="add-trace-toolkit">Add trace Toolkit</h2>
<p>toolkit/trace provides the APIs to enhance the trace context, such as createLocalSpan, createExitSpan, createEntrySpan, log, tag, prepareForAsync and asyncFinish.
Add the toolkit dependency to your project.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#000;font-weight:bold">import</span> <span style="color:#d14">&#34;github.com/apache/skywalking-go/toolkit/trace&#34;</span>
</code></pre></div><h2 id="use-native-tracing">Use Native Tracing</h2>
<h3 id="context-carrier">Context Carrier</h3>
<p>The context carrier is used to pass the context between the difference application.</p>
<p>When creating an Entry Span, you need to obtain the context carrier from the request. When creating an Exit Span, you need to write the context carrier into the target RPC request.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#000;font-weight:bold">type</span> ExtractorRef <span style="color:#000;font-weight:bold">func</span>(headerKey <span style="color:#458;font-weight:bold">string</span>) (<span style="color:#458;font-weight:bold">string</span>, <span style="color:#458;font-weight:bold">error</span>)

<span style="color:#000;font-weight:bold">type</span> InjectorRef <span style="color:#000;font-weight:bold">func</span>(headerKey, headerValue <span style="color:#458;font-weight:bold">string</span>) <span style="color:#458;font-weight:bold">error</span>
</code></pre></div><p>The following demo demonstrates how to pass the Context Carrier in the Tracing API:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#998;font-style:italic">// create a new entry span and extract the context carrier from the request
</span><span style="color:#998;font-style:italic"></span>trace.<span style="color:#900;font-weight:bold">CreateEntrySpan</span>(<span style="color:#d14">&#34;EntrySpan&#34;</span>, <span style="color:#000;font-weight:bold">func</span>(headerKey <span style="color:#458;font-weight:bold">string</span>) (<span style="color:#458;font-weight:bold">string</span>, <span style="color:#458;font-weight:bold">error</span>) {
    <span style="color:#000;font-weight:bold">return</span> request.Header.<span style="color:#900;font-weight:bold">Get</span>(headerKey), <span style="color:#000;font-weight:bold">nil</span>
})

<span style="color:#998;font-style:italic">// create a new exit span and inject the context carrier into the request
</span><span style="color:#998;font-style:italic"></span>trace.<span style="color:#900;font-weight:bold">CreateExitSpan</span>(<span style="color:#d14">&#34;ExitSpan&#34;</span>, request.Host, <span style="color:#000;font-weight:bold">func</span>(headerKey, headerValue <span style="color:#458;font-weight:bold">string</span>) <span style="color:#458;font-weight:bold">error</span> {
	request.Header.<span style="color:#900;font-weight:bold">Add</span>(headerKey, headerValue)
	<span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">nil</span>
})
</code></pre></div><h3 id="create-span">Create Span</h3>
<p>Use <code>trace.CreateEntrySpan()</code> API to create entry span, and then use <code>SpanRef</code> to contain the reference of created span in agent kernel.</p>
<ul>
<li>The first parameter is operation name of span</li>
<li>the second parameter is <code>InjectorRef</code>.</li>
</ul>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">spanRef, err <span style="color:#000;font-weight:bold">:=</span> trace.<span style="color:#900;font-weight:bold">CreateEntrySpan</span>(<span style="color:#d14">&#34;operationName&#34;</span>, InjectorRef)
</code></pre></div><p>Use <code>trace.CreateLocalSpan()</code> API to create local span</p>
<ul>
<li>the only parameter is the operation name of span.</li>
</ul>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">spanRef, err <span style="color:#000;font-weight:bold">:=</span> trace.<span style="color:#900;font-weight:bold">CreateLocalSpan</span>(<span style="color:#d14">&#34;operationName&#34;</span>)
</code></pre></div><p>Use <code>trace.CreateExitSpan()</code> API to create exit span.</p>
<ul>
<li>the first parameter is the operation name of span</li>
<li>the second parameter is the remote peer which means the peer address of exit operation.</li>
<li>the third parameter is the <code>ExtractorRef</code></li>
</ul>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">spanRef, err <span style="color:#000;font-weight:bold">:=</span> trace.<span style="color:#900;font-weight:bold">CreateExitSpan</span>(<span style="color:#d14">&#34;operationName&#34;</span>, <span style="color:#d14">&#34;peer&#34;</span>, ExtractorRef)
</code></pre></div><p>Use <code>trace.StopSpan()</code> API to stop current span</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">trace.<span style="color:#900;font-weight:bold">StopSpan</span>()
</code></pre></div><h3 id="add-spans-tag-and-log">Add Span’s Tag and Log</h3>
<p>Use <code>trace.AddLog()</code> to record log in span.</p>
<p>Use <code>trace.SetTag()</code> to add tag to span, the parameters of tag are two String which are key and value respectively.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">trace.<span style="color:#900;font-weight:bold">AddLog</span>(<span style="color:#000;font-weight:bold">...</span><span style="color:#458;font-weight:bold">string</span>)

trace.<span style="color:#900;font-weight:bold">SetTag</span>(<span style="color:#d14">&#34;key&#34;</span>,<span style="color:#d14">&#34;value&#34;</span>)
</code></pre></div><h3 id="set-componentid">Set ComponentID</h3>
<p>Use <code>trace.SetComponent()</code> to set the component id of the Span</p>
<ul>
<li>the type of parameter is int32.</li>
</ul>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">trace.<span style="color:#900;font-weight:bold">SetComponent</span>(ComponentID)
</code></pre></div><p>The Component ID in Span is used to identify the current component, which is declared in the <a href="https://github.com/apache/skywalking/blob/master/oap-server/server-starter/src/main/resources/component-libraries.yml">component libraries YAML</a> from the OAP server side.</p>
<h3 id="async-preparefinish">Async Prepare/Finish</h3>
<p><code>SpanRef</code> is the return value of <code>CreateSpan</code>.Use <code>SpanRef.PrepareAsync()</code> to make current span still alive until <code>SpanRef.AsyncFinish()</code> called.</p>
<ul>
<li>Call <code>PrepareAsync()</code>.</li>
<li>Use <code>trace.StopSpan()</code> to stop span in the original goroutine.</li>
<li>Propagate the <code>SpanRef</code> to any other goroutine.</li>
<li>Call <code>SpanRef.AsyncFinish()</code> in any goroutine.</li>
</ul>
<h3 id="capturecontinue-context-snapshot">Capture/Continue Context Snapshot</h3>
<ol>
<li>Use <code>trace.CaptureContext()</code> to get the segment info and store it in <code>ContextSnapshotRef</code>.</li>
<li>Propagate the snapshot context to any other goroutine.</li>
<li>Use <code>trace.ContinueContext(snapshotRef)</code> to load the snapshotRef in the target goroutine.</li>
</ol>
<h2 id="reading-context">Reading Context</h2>
<p>All following APIs provide <strong>readonly</strong> features for the tracing context from tracing system. The values are only available when the current thread is traced.</p>
<ul>
<li>
<p>Use <code>trace.GetTraceID()</code> API to get traceID.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">traceID <span style="color:#000;font-weight:bold">:=</span> trace.<span style="color:#900;font-weight:bold">GetTraceID</span>()
</code></pre></div></li>
<li>
<p>Use <code>trace.GetSegmentID()</code> API to get segmentID.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">segmentID <span style="color:#000;font-weight:bold">:=</span> trace.<span style="color:#900;font-weight:bold">GetSegmentID</span>()
</code></pre></div></li>
<li>
<p>Use <code>trace.GetSpanID()</code> API to get spanID.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">spanID <span style="color:#000;font-weight:bold">:=</span> trace.<span style="color:#900;font-weight:bold">GetSpanID</span>()
</code></pre></div></li>
</ul>
<h2 id="trace-correlation-context">Trace Correlation Context</h2>
<p>Trace correlation context APIs provide a way to put custom data in tracing context. All the data in the context will be propagated with the in-wire process automatically.</p>
<p>Use <code>trace.SetCorrelation()</code> API to set custom data in tracing context.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">trace.<span style="color:#900;font-weight:bold">SetCorrelation</span>(<span style="color:#d14">&#34;key&#34;</span>,<span style="color:#d14">&#34;value&#34;</span>)
</code></pre></div><ul>
<li>Max element count in the correlation context is 3</li>
<li>Max value length of each element is 128</li>
</ul>
<p>CorrelationContext will remove the key when the value is empty.</p>
<p>Use <code>trace.GetCorrelation()</code> API to get custom data.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">value <span style="color:#000;font-weight:bold">:=</span> trace.<span style="color:#900;font-weight:bold">GetCorrelation</span>(<span style="color:#d14">&#34;key&#34;</span>)
</code></pre></div>



</div>


            </main>
          <div id="toc" class="d-none d-xl-block col-xl-2 td-toc d-print-none">
            




<div class="td-page-meta ml-2 pb-1 pt-2 mb-0">











</div>






<nav id="TableOfContents">
  <ul>
    <li><a href="#tracing-apis">Tracing APIs</a>
      <ul>
        <li><a href="#add-trace-toolkit">Add trace Toolkit</a></li>
        <li><a href="#use-native-tracing">Use Native Tracing</a>
          <ul>
            <li><a href="#context-carrier">Context Carrier</a></li>
            <li><a href="#create-span">Create Span</a></li>
            <li><a href="#add-spans-tag-and-log">Add Span’s Tag and Log</a></li>
            <li><a href="#set-componentid">Set ComponentID</a></li>
            <li><a href="#async-preparefinish">Async Prepare/Finish</a></li>
            <li><a href="#capturecontinue-context-snapshot">Capture/Continue Context Snapshot</a></li>
          </ul>
        </li>
        <li><a href="#reading-context">Reading Context</a></li>
        <li><a href="#trace-correlation-context">Trace Correlation Context</a></li>
      </ul>
    </li>
  </ul>
</nav>




<script>
  $(function () {
    var $toc = $("#TableOfContents");
    if (!$toc || !$toc.length) {
      return;
    }
    var top = $toc.offset().top;
    $(window).on("scroll", debounce(setTop, 100))
    $(window).on("scroll", debounce(addActive, 30))

    function addActive() {
      var scrollValue = $(window).scrollTop();
      var topEle = null;
      $.each($('main h1, main h2, main h3'), function (index, item) {
        if ($(item).offset().top - 70 > scrollValue) {
          return
        }
        if (!topEle) {
          topEle = item
        } else if ($(item).offset().top >= $(topEle).offset().top) {
          topEle = item
        }
        if (topEle) {
          var id = $(item).attr('id');
          $toc.find('a').removeClass("active").end().find('a[href="' + '#' + id + '"]').addClass("active")
        }
      })
    }

    function setTop() {
      var scrollValue = $(window).scrollTop();
      if (scrollValue >= top - 70) {
        $toc.addClass('fixed')
      } else {
        $toc.removeClass('fixed')
      }
    }

    function debounce(fn, wait) {
      var timeout = null;
      return function () {
        clearTimeout(timeout);
        timeout = setTimeout(() => {
          fn.apply(this, arguments);
        }, wait);
      };
    }
  })

</script>

          </div>

        </div>
      </div>

      
<footer class="py-5 sky-row">
  <div class="container-fluid text-center">
    <div class="">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Twitter" aria-label="Twitter">
    <a class="text-color" target="_blank" href="https://twitter.com/asfskywalking">
      <i class="iconfont icon-twitter"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Slack" aria-label="Slack">
    <a class="text-color" target="_blank" href="http://s.apache.org/slack-invite">
      <i class="iconfont icon-slack"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Mailing list" aria-label="Mailing list">
    <a class="text-color" target="_blank" href="https://lists.apache.org/list.html?dev@skywalking.apache.org">
      <i class="iconfont icon-email"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-color" target="_blank" href="https://github.com/apache/skywalking">
      <i class="iconfont icon-github"></i>
    </a>
  </li>
  
</ul>

        
        
    </div>
    <div class="">

        <small class="text-color">&copy; 2017 - 2024 The Apache Software Foundation All Rights Reserved</small>
        
	
    </div>
    <div class="">
      <small class="text-color mt-4">Apache SkyWalking, SkyWalking, Apache, the Apache feather logo, and the Apache SkyWalking project logo are either registered trademarks or trademarks of the Apache Software Foundation.</small>
    </div>
  </div>
</footer>


    </div>
    





















































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































    
<div id="popup">
    <div class="mask">
        <img src=""/>
    </div>
</div>

    <div class="sidebar-mask"></div>
<div class="sidebar">
    <nav class="nav-links">
        <div class="nav-item"><a href="/docs/" class="nav-link">Projects and Documentation</a></div>
        <div class="nav-item"><a href="/events/" class="nav-link">Events</a></div>
        <div class="nav-item"><a href="/blog/" class="nav-link router-link-exact-active router-link-active">Blog</a>
        </div>
        <div class="nav-item"><a href="/downloads/" class="nav-link">Downloads</a></div>
        <div class="nav-item"><a href="/team/" class="nav-link">Team</a></div>
        <div class="nav-item"><a href="/users/" class="nav-link">Users</a></div>
        <div class="nav-item">
            <div class="dropdown-wrapper open">
                <a class="dropdown-title"><span>中文资料</span>
                    <span class="arrow down"></span>
                </a>
                <ul class="nav-dropdown">
                    <li class="dropdown-item">
                        <a href="/zh/" class="nav-link external">博客</a>
                    </li>
                    <li class="dropdown-item">
                        <a href="https://space.bilibili.com/390683219" target="_blank"
                           rel="noopener noreferrer" class="nav-link external">B站</a>
                    </li>
                    <li class="dropdown-item">
                        <a href="https://juejin.cn/user/13673577331607" target="_blank"
                           rel="noopener noreferrer" class="nav-link external">掘金</a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="nav-item">
            <div class="dropdown-wrapper open">
                <a class="dropdown-title">
                    <span>Links</span>
                    <span class="arrow down"></span>
                </a>
                <ul class="nav-dropdown">
                    <li class="dropdown-item">
                        <a href="http://www.apache.org/" target="_blank"
                           rel="noopener noreferrer" class="nav-link external">
                            Apache Software Foundation
                        </a>
                    </li>
                    <li class="dropdown-item">
                        <a href="https://github.com/apache/skywalking/issues"
                           target="_blank" rel="noopener noreferrer"
                           class="nav-link external">
                            GitHub Issue Tracker
                        </a>
                    </li>
                    <li class="dropdown-item">
                        <a href="https://lists.apache.org/list.html?dev@skywalking.apache.org" target="_blank"
                           rel="noopener noreferrer" class="nav-link external">
                            Dev Mailing List
                        </a>
                    </li>
                    <li class="dropdown-item">
                        <a href="http://www.apache.org/licenses/" target="_blank"
                           rel="noopener noreferrer" class="nav-link external">
                            License
                        </a>
                    </li>
                    <li class="dropdown-item">
                        <a href="http://www.apache.org/events/current-event"
                           target="_blank" rel="noopener noreferrer"
                           class="nav-link external">
                            Apache Events
                        </a>
                    </li>
                    <li class="dropdown-item">
                        <a href="http://www.apache.org/security/" target="_blank"
                           rel="noopener noreferrer" class="nav-link external">
                            Security
                        </a>
                    </li>
                    <li class="dropdown-item">
                        <a href="http://www.apache.org/foundation/sponsorship.html"
                           target="_blank" rel="noopener noreferrer"
                           class="nav-link external">
                            Sponsorship and Donate
                        </a>
                    </li>
                    <li class="dropdown-item">
                        <a href="http://www.apache.org/foundation/thanks.html"
                           target="_blank" rel="noopener noreferrer"
                           class="nav-link external">
                            Thanks
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</div>

    <script src="/js/bootstrap.bundle.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>









<script src="/js/main.min.dc00f5ca911ee5aa105ea6de6b3b7e8d8169ba5a3bf156b1fcfe23dfe3e62b0a.js" integrity="sha256-3AD1ypEe5aoQXqbeazt&#43;jYFpulo78Vax/P4j3&#43;PmKwo=" crossorigin="anonymous"></script>


<script src="/js/mermaid.min.js"></script>
<script>
    window.onload = () => mermaid.init(undefined, ".language-mermaid");
</script>


<script defer
src="https://widget.kapa.ai/kapa-widget.bundle.js"
data-website-id="8a08392b-9c4d-4816-8bc4-f93e0ecdd2a7"
data-project-name="SkyWalking"
data-project-color="#2B74B8"
data-button-text="Ask AI"
data-search-mode-enabled="true"
data-modal-open-on-command-k="true"
data-modal-disclaimer="The AI supports multiple languages, but it may not be accessible in China, a proxy is required."
data-project-logo="https://miro.medium.com/v2/resize:fit:2400/0*kmS-5BQ8ShAhZ_F4.jpg"
data-modal-example-questions="What is Apache SkyWalking?,How to deploy SkyWalking?,How to inject agents non-intrusively?,How to setup trace sampling?"
data-button-position-top=""
data-button-position-right="20px"
data-button-position-bottom="200px"
data-button-position-left=""
></script>




  </body>
  <script>
    $(function (){
      $('.doc-menu-button').on('click',function (){
        $('.td-sidebar').toggleClass('active')
      })
      $('.version-select').on('change', function (){
        var selectVersion = $(this).val().toLowerCase();
        var prefix = '';
        var url = location.href.replace(/(\/docs\/[a-zA-Z\-]+\/)([\w|\.]+)(\/.*)/, function (match, p1, p2, p3){
          prefix = p1 + selectVersion;
          return p1 + selectVersion + p3
        })
        go2SelectVersion(url, prefix)

      })
      function go2SelectVersion(url, prefix){
        $.ajax({
          url: url,
          type: "get",
          success:function(){
            location.href = url;
          },
          statusCode: {
            404:function(){
              location.href = prefix + '/readme/';
            }
          }
        });
      }
    })
  </script>
</html>
